{
  "version": 3,
  "sources": ["wrangler-modules-watch:wrangler:modules-watch", "../../../node_modules/wrangler/templates/modules-watch-stub.js", "../../../node_modules/fast-xml-parser/src/util.js", "../../../node_modules/fast-xml-parser/src/validator.js", "../../../node_modules/fast-xml-parser/src/xmlparser/OptionsBuilder.js", "../../../node_modules/fast-xml-parser/src/xmlparser/xmlNode.js", "../../../node_modules/fast-xml-parser/src/xmlparser/DocTypeReader.js", "../../../node_modules/strnum/strnum.js", "../../../node_modules/fast-xml-parser/src/ignoreAttributes.js", "../../../node_modules/fast-xml-parser/src/xmlparser/OrderedObjParser.js", "../../../node_modules/fast-xml-parser/src/xmlparser/node2json.js", "../../../node_modules/fast-xml-parser/src/xmlparser/XMLParser.js", "../../../node_modules/fast-xml-parser/src/xmlbuilder/orderedJs2Xml.js", "../../../node_modules/fast-xml-parser/src/xmlbuilder/json2xml.js", "../../../node_modules/fast-xml-parser/src/fxp.js", "../bundle-Dq0ngM/middleware-loader.entry.ts", "../bundle-Dq0ngM/middleware-insertion-facade.js", "../../../src/index.ts", "../../../src/lib/router.ts", "../../../src/middlewares/error.middleware.ts", "../../../src/lib/errors.ts", "../../../src/lib/http.ts", "../../../src/middlewares/cors.middleware.ts", "../../../src/middlewares/auth.middleware.ts", "../../../src/lib/jwt.ts", "../../../node_modules/jose/dist/browser/index.js", "../../../node_modules/jose/dist/browser/runtime/base64url.js", "../../../node_modules/jose/dist/browser/lib/buffer_utils.js", "../../../node_modules/jose/dist/browser/runtime/webcrypto.js", "../../../node_modules/jose/dist/browser/util/errors.js", "../../../node_modules/jose/dist/browser/lib/crypto_key.js", "../../../node_modules/jose/dist/browser/lib/invalid_key_input.js", "../../../node_modules/jose/dist/browser/runtime/is_key_like.js", "../../../node_modules/jose/dist/browser/lib/is_disjoint.js", "../../../node_modules/jose/dist/browser/lib/is_object.js", "../../../node_modules/jose/dist/browser/runtime/check_key_length.js", "../../../node_modules/jose/dist/browser/runtime/normalize_key.js", "../../../node_modules/jose/dist/browser/lib/is_jwk.js", "../../../node_modules/jose/dist/browser/runtime/jwk_to_key.js", "../../../node_modules/jose/dist/browser/key/import.js", "../../../node_modules/jose/dist/browser/lib/check_key_type.js", "../../../node_modules/jose/dist/browser/lib/validate_crit.js", "../../../node_modules/jose/dist/browser/lib/validate_algorithms.js", "../../../node_modules/jose/dist/browser/jws/compact/verify.js", "../../../node_modules/jose/dist/browser/jws/flattened/verify.js", "../../../node_modules/jose/dist/browser/runtime/verify.js", "../../../node_modules/jose/dist/browser/runtime/subtle_dsa.js", "../../../node_modules/jose/dist/browser/runtime/get_sign_verify_key.js", "../../../node_modules/jose/dist/browser/jwt/verify.js", "../../../node_modules/jose/dist/browser/lib/jwt_claims_set.js", "../../../node_modules/jose/dist/browser/lib/epoch.js", "../../../node_modules/jose/dist/browser/lib/secs.js", "../../../node_modules/jose/dist/browser/jws/compact/sign.js", "../../../node_modules/jose/dist/browser/jws/flattened/sign.js", "../../../node_modules/jose/dist/browser/runtime/sign.js", "../../../node_modules/jose/dist/browser/jwt/sign.js", "../../../node_modules/jose/dist/browser/jwt/produce.js", "../../../src/repositories/user.repository.ts", "../../../src/middlewares/require_auth.middleware.ts", "../../../src/controllers/auth.controller.ts", "../../../node_modules/zod/index.js", "../../../node_modules/zod/v3/external.js", "../../../node_modules/zod/v3/errors.js", "../../../node_modules/zod/v3/locales/en.js", "../../../node_modules/zod/v3/ZodError.js", "../../../node_modules/zod/v3/helpers/util.js", "../../../node_modules/zod/v3/helpers/parseUtil.js", "../../../node_modules/zod/v3/types.js", "../../../node_modules/zod/v3/helpers/errorUtil.js", "../../../src/repositories/plan.repository.ts", "../../../src/repositories/preferences.repository.ts", "../../../src/repositories/terms.repository.ts", "../../../src/repositories/password_reset.repository.ts", "../../../src/services/auth.service.ts", "../../../src/lib/password.ts", "../../../src/services/email.service.ts", "../../../src/controllers/_helpers.ts", "../../../src/controllers/account.controller.ts", "../../../src/controllers/assets.controller.ts", "../../../src/repositories/asset.repository.ts", "../../../src/repositories/news.repository.ts", "../../../src/services/asset.service.ts", "../../../src/services/market_data.service.ts", "../../../src/controllers/watchlist.controller.ts", "../../../src/repositories/watchlist.repository.ts", "../../../src/services/watchlist.service.ts", "../../../src/controllers/alerts.controller.ts", "../../../src/repositories/alert.repository.ts", "../../../src/services/alert.service.ts", "../../../src/controllers/preferences.controller.ts", "../../../src/controllers/crypto.controller.ts", "../../../src/controllers/docs.controller.ts", "../../../src/docs/openapi.ts", "../../../src/docs/swagger.ts", "../../../src/controllers/notifications.controller.ts", "../../../src/repositories/notification.repository.ts", "../../../src/services/notification.service.ts", "../../../src/controllers/dashboard.controller.ts", "../../../src/repositories/digest.repository.ts", "../../../src/controllers/news.controller.ts", "../../../src/controllers/digest.controller.ts", "../../../src/controllers/admin.controller.ts", "../../../src/repositories/job.repository.ts", "../../../src/jobs/scheduler.ts", "../../../src/repositories/feature_flags.repository.ts", "../../../src/jobs/price_polling.job.ts", "../../../src/jobs/news_collection.job.ts", "../../../src/services/news.service.ts", "../../../src/lib/crypto.ts", "../../../src/jobs/digest_generation.job.ts", "../../../src/services/openai.service.ts", "../../../src/jobs/dispatch_notifications.job.ts", "../../../src/services/push.service.ts", "../../../node_modules/@pushforge/builder/dist/lib/main.js", "../../../node_modules/@pushforge/builder/dist/lib/request.js", "../../../node_modules/@pushforge/builder/dist/lib/crypto.js", "../../../node_modules/@pushforge/builder/dist/lib/payload.js", "../../../node_modules/@pushforge/builder/dist/lib/base64.js", "../../../node_modules/@pushforge/builder/dist/lib/utils.js", "../../../node_modules/@pushforge/builder/dist/lib/shared-secret.js", "../../../node_modules/@pushforge/builder/dist/lib/vapid.js", "../../../node_modules/@pushforge/builder/dist/lib/jwt.js", "../../../node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts", "../../../node_modules/wrangler/templates/middleware/middleware-miniflare3-json-error.ts", "../../../node_modules/wrangler/templates/middleware/common.ts"],
  "sourceRoot": "C:\\Users\\Kelvin\\Desktop\\repo outros\\Pessoal\\FinancialSecretary\\src\\back\\.wrangler\\tmp\\dev-uSnujB",
  "sourcesContent": ["", "// `esbuild` doesn't support returning `watch*` options from `onStart()`\n// plugin callbacks. Instead, we define an empty virtual module that is\n// imported by this injected file. Importing the module registers watchers.\nimport \"wrangler:modules-watch\";\n", "'use strict';\n\nconst nameStartChar = ':A-Za-z_\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u02FF\\\\u0370-\\\\u037D\\\\u037F-\\\\u1FFF\\\\u200C-\\\\u200D\\\\u2070-\\\\u218F\\\\u2C00-\\\\u2FEF\\\\u3001-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFFD';\nconst nameChar = nameStartChar + '\\\\-.\\\\d\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040';\nconst nameRegexp = '[' + nameStartChar + '][' + nameChar + ']*'\nconst regexName = new RegExp('^' + nameRegexp + '$');\n\nconst getAllMatches = function(string, regex) {\n  const matches = [];\n  let match = regex.exec(string);\n  while (match) {\n    const allmatches = [];\n    allmatches.startIndex = regex.lastIndex - match[0].length;\n    const len = match.length;\n    for (let index = 0; index < len; index++) {\n      allmatches.push(match[index]);\n    }\n    matches.push(allmatches);\n    match = regex.exec(string);\n  }\n  return matches;\n};\n\nconst isName = function(string) {\n  const match = regexName.exec(string);\n  return !(match === null || typeof match === 'undefined');\n};\n\nexports.isExist = function(v) {\n  return typeof v !== 'undefined';\n};\n\nexports.isEmptyObject = function(obj) {\n  return Object.keys(obj).length === 0;\n};\n\n/**\n * Copy all the properties of a into b.\n * @param {*} target\n * @param {*} a\n */\nexports.merge = function(target, a, arrayMode) {\n  if (a) {\n    const keys = Object.keys(a); // will return an array of own properties\n    const len = keys.length; //don't make it inline\n    for (let i = 0; i < len; i++) {\n      if (arrayMode === 'strict') {\n        target[keys[i]] = [ a[keys[i]] ];\n      } else {\n        target[keys[i]] = a[keys[i]];\n      }\n    }\n  }\n};\n/* exports.merge =function (b,a){\n  return Object.assign(b,a);\n} */\n\nexports.getValue = function(v) {\n  if (exports.isExist(v)) {\n    return v;\n  } else {\n    return '';\n  }\n};\n\n// const fakeCall = function(a) {return a;};\n// const fakeCallNoReturn = function() {};\n\nexports.isName = isName;\nexports.getAllMatches = getAllMatches;\nexports.nameRegexp = nameRegexp;\n", "'use strict';\n\nconst util = require('./util');\n\nconst defaultOptions = {\n  allowBooleanAttributes: false, //A tag can have attributes without any value\n  unpairedTags: []\n};\n\n//const tagsPattern = new RegExp(\"<\\\\/?([\\\\w:\\\\-_\\.]+)\\\\s*\\/?>\",\"g\");\nexports.validate = function (xmlData, options) {\n  options = Object.assign({}, defaultOptions, options);\n\n  //xmlData = xmlData.replace(/(\\r\\n|\\n|\\r)/gm,\"\");//make it single line\n  //xmlData = xmlData.replace(/(^\\s*<\\?xml.*?\\?>)/g,\"\");//Remove XML starting tag\n  //xmlData = xmlData.replace(/(<!DOCTYPE[\\s\\w\\\"\\.\\/\\-\\:]+(\\[.*\\])*\\s*>)/g,\"\");//Remove DOCTYPE\n  const tags = [];\n  let tagFound = false;\n\n  //indicates that the root tag has been closed (aka. depth 0 has been reached)\n  let reachedRoot = false;\n\n  if (xmlData[0] === '\\ufeff') {\n    // check for byte order mark (BOM)\n    xmlData = xmlData.substr(1);\n  }\n  \n  for (let i = 0; i < xmlData.length; i++) {\n\n    if (xmlData[i] === '<' && xmlData[i+1] === '?') {\n      i+=2;\n      i = readPI(xmlData,i);\n      if (i.err) return i;\n    }else if (xmlData[i] === '<') {\n      //starting of tag\n      //read until you reach to '>' avoiding any '>' in attribute value\n      let tagStartPos = i;\n      i++;\n      \n      if (xmlData[i] === '!') {\n        i = readCommentAndCDATA(xmlData, i);\n        continue;\n      } else {\n        let closingTag = false;\n        if (xmlData[i] === '/') {\n          //closing tag\n          closingTag = true;\n          i++;\n        }\n        //read tagname\n        let tagName = '';\n        for (; i < xmlData.length &&\n          xmlData[i] !== '>' &&\n          xmlData[i] !== ' ' &&\n          xmlData[i] !== '\\t' &&\n          xmlData[i] !== '\\n' &&\n          xmlData[i] !== '\\r'; i++\n        ) {\n          tagName += xmlData[i];\n        }\n        tagName = tagName.trim();\n        //console.log(tagName);\n\n        if (tagName[tagName.length - 1] === '/') {\n          //self closing tag without attributes\n          tagName = tagName.substring(0, tagName.length - 1);\n          //continue;\n          i--;\n        }\n        if (!validateTagName(tagName)) {\n          let msg;\n          if (tagName.trim().length === 0) {\n            msg = \"Invalid space after '<'.\";\n          } else {\n            msg = \"Tag '\"+tagName+\"' is an invalid name.\";\n          }\n          return getErrorObject('InvalidTag', msg, getLineNumberForPosition(xmlData, i));\n        }\n\n        const result = readAttributeStr(xmlData, i);\n        if (result === false) {\n          return getErrorObject('InvalidAttr', \"Attributes for '\"+tagName+\"' have open quote.\", getLineNumberForPosition(xmlData, i));\n        }\n        let attrStr = result.value;\n        i = result.index;\n\n        if (attrStr[attrStr.length - 1] === '/') {\n          //self closing tag\n          const attrStrStart = i - attrStr.length;\n          attrStr = attrStr.substring(0, attrStr.length - 1);\n          const isValid = validateAttributeString(attrStr, options);\n          if (isValid === true) {\n            tagFound = true;\n            //continue; //text may presents after self closing tag\n          } else {\n            //the result from the nested function returns the position of the error within the attribute\n            //in order to get the 'true' error line, we need to calculate the position where the attribute begins (i - attrStr.length) and then add the position within the attribute\n            //this gives us the absolute index in the entire xml, which we can use to find the line at last\n            return getErrorObject(isValid.err.code, isValid.err.msg, getLineNumberForPosition(xmlData, attrStrStart + isValid.err.line));\n          }\n        } else if (closingTag) {\n          if (!result.tagClosed) {\n            return getErrorObject('InvalidTag', \"Closing tag '\"+tagName+\"' doesn't have proper closing.\", getLineNumberForPosition(xmlData, i));\n          } else if (attrStr.trim().length > 0) {\n            return getErrorObject('InvalidTag', \"Closing tag '\"+tagName+\"' can't have attributes or invalid starting.\", getLineNumberForPosition(xmlData, tagStartPos));\n          } else if (tags.length === 0) {\n            return getErrorObject('InvalidTag', \"Closing tag '\"+tagName+\"' has not been opened.\", getLineNumberForPosition(xmlData, tagStartPos));\n          } else {\n            const otg = tags.pop();\n            if (tagName !== otg.tagName) {\n              let openPos = getLineNumberForPosition(xmlData, otg.tagStartPos);\n              return getErrorObject('InvalidTag',\n                \"Expected closing tag '\"+otg.tagName+\"' (opened in line \"+openPos.line+\", col \"+openPos.col+\") instead of closing tag '\"+tagName+\"'.\",\n                getLineNumberForPosition(xmlData, tagStartPos));\n            }\n\n            //when there are no more tags, we reached the root level.\n            if (tags.length == 0) {\n              reachedRoot = true;\n            }\n          }\n        } else {\n          const isValid = validateAttributeString(attrStr, options);\n          if (isValid !== true) {\n            //the result from the nested function returns the position of the error within the attribute\n            //in order to get the 'true' error line, we need to calculate the position where the attribute begins (i - attrStr.length) and then add the position within the attribute\n            //this gives us the absolute index in the entire xml, which we can use to find the line at last\n            return getErrorObject(isValid.err.code, isValid.err.msg, getLineNumberForPosition(xmlData, i - attrStr.length + isValid.err.line));\n          }\n\n          //if the root level has been reached before ...\n          if (reachedRoot === true) {\n            return getErrorObject('InvalidXml', 'Multiple possible root nodes found.', getLineNumberForPosition(xmlData, i));\n          } else if(options.unpairedTags.indexOf(tagName) !== -1){\n            //don't push into stack\n          } else {\n            tags.push({tagName, tagStartPos});\n          }\n          tagFound = true;\n        }\n\n        //skip tag text value\n        //It may include comments and CDATA value\n        for (i++; i < xmlData.length; i++) {\n          if (xmlData[i] === '<') {\n            if (xmlData[i + 1] === '!') {\n              //comment or CADATA\n              i++;\n              i = readCommentAndCDATA(xmlData, i);\n              continue;\n            } else if (xmlData[i+1] === '?') {\n              i = readPI(xmlData, ++i);\n              if (i.err) return i;\n            } else{\n              break;\n            }\n          } else if (xmlData[i] === '&') {\n            const afterAmp = validateAmpersand(xmlData, i);\n            if (afterAmp == -1)\n              return getErrorObject('InvalidChar', \"char '&' is not expected.\", getLineNumberForPosition(xmlData, i));\n            i = afterAmp;\n          }else{\n            if (reachedRoot === true && !isWhiteSpace(xmlData[i])) {\n              return getErrorObject('InvalidXml', \"Extra text at the end\", getLineNumberForPosition(xmlData, i));\n            }\n          }\n        } //end of reading tag text value\n        if (xmlData[i] === '<') {\n          i--;\n        }\n      }\n    } else {\n      if ( isWhiteSpace(xmlData[i])) {\n        continue;\n      }\n      return getErrorObject('InvalidChar', \"char '\"+xmlData[i]+\"' is not expected.\", getLineNumberForPosition(xmlData, i));\n    }\n  }\n\n  if (!tagFound) {\n    return getErrorObject('InvalidXml', 'Start tag expected.', 1);\n  }else if (tags.length == 1) {\n      return getErrorObject('InvalidTag', \"Unclosed tag '\"+tags[0].tagName+\"'.\", getLineNumberForPosition(xmlData, tags[0].tagStartPos));\n  }else if (tags.length > 0) {\n      return getErrorObject('InvalidXml', \"Invalid '\"+\n          JSON.stringify(tags.map(t => t.tagName), null, 4).replace(/\\r?\\n/g, '')+\n          \"' found.\", {line: 1, col: 1});\n  }\n\n  return true;\n};\n\nfunction isWhiteSpace(char){\n  return char === ' ' || char === '\\t' || char === '\\n'  || char === '\\r';\n}\n/**\n * Read Processing insstructions and skip\n * @param {*} xmlData\n * @param {*} i\n */\nfunction readPI(xmlData, i) {\n  const start = i;\n  for (; i < xmlData.length; i++) {\n    if (xmlData[i] == '?' || xmlData[i] == ' ') {\n      //tagname\n      const tagname = xmlData.substr(start, i - start);\n      if (i > 5 && tagname === 'xml') {\n        return getErrorObject('InvalidXml', 'XML declaration allowed only at the start of the document.', getLineNumberForPosition(xmlData, i));\n      } else if (xmlData[i] == '?' && xmlData[i + 1] == '>') {\n        //check if valid attribut string\n        i++;\n        break;\n      } else {\n        continue;\n      }\n    }\n  }\n  return i;\n}\n\nfunction readCommentAndCDATA(xmlData, i) {\n  if (xmlData.length > i + 5 && xmlData[i + 1] === '-' && xmlData[i + 2] === '-') {\n    //comment\n    for (i += 3; i < xmlData.length; i++) {\n      if (xmlData[i] === '-' && xmlData[i + 1] === '-' && xmlData[i + 2] === '>') {\n        i += 2;\n        break;\n      }\n    }\n  } else if (\n    xmlData.length > i + 8 &&\n    xmlData[i + 1] === 'D' &&\n    xmlData[i + 2] === 'O' &&\n    xmlData[i + 3] === 'C' &&\n    xmlData[i + 4] === 'T' &&\n    xmlData[i + 5] === 'Y' &&\n    xmlData[i + 6] === 'P' &&\n    xmlData[i + 7] === 'E'\n  ) {\n    let angleBracketsCount = 1;\n    for (i += 8; i < xmlData.length; i++) {\n      if (xmlData[i] === '<') {\n        angleBracketsCount++;\n      } else if (xmlData[i] === '>') {\n        angleBracketsCount--;\n        if (angleBracketsCount === 0) {\n          break;\n        }\n      }\n    }\n  } else if (\n    xmlData.length > i + 9 &&\n    xmlData[i + 1] === '[' &&\n    xmlData[i + 2] === 'C' &&\n    xmlData[i + 3] === 'D' &&\n    xmlData[i + 4] === 'A' &&\n    xmlData[i + 5] === 'T' &&\n    xmlData[i + 6] === 'A' &&\n    xmlData[i + 7] === '['\n  ) {\n    for (i += 8; i < xmlData.length; i++) {\n      if (xmlData[i] === ']' && xmlData[i + 1] === ']' && xmlData[i + 2] === '>') {\n        i += 2;\n        break;\n      }\n    }\n  }\n\n  return i;\n}\n\nconst doubleQuote = '\"';\nconst singleQuote = \"'\";\n\n/**\n * Keep reading xmlData until '<' is found outside the attribute value.\n * @param {string} xmlData\n * @param {number} i\n */\nfunction readAttributeStr(xmlData, i) {\n  let attrStr = '';\n  let startChar = '';\n  let tagClosed = false;\n  for (; i < xmlData.length; i++) {\n    if (xmlData[i] === doubleQuote || xmlData[i] === singleQuote) {\n      if (startChar === '') {\n        startChar = xmlData[i];\n      } else if (startChar !== xmlData[i]) {\n        //if vaue is enclosed with double quote then single quotes are allowed inside the value and vice versa\n      } else {\n        startChar = '';\n      }\n    } else if (xmlData[i] === '>') {\n      if (startChar === '') {\n        tagClosed = true;\n        break;\n      }\n    }\n    attrStr += xmlData[i];\n  }\n  if (startChar !== '') {\n    return false;\n  }\n\n  return {\n    value: attrStr,\n    index: i,\n    tagClosed: tagClosed\n  };\n}\n\n/**\n * Select all the attributes whether valid or invalid.\n */\nconst validAttrStrRegxp = new RegExp('(\\\\s*)([^\\\\s=]+)(\\\\s*=)?(\\\\s*([\\'\"])(([\\\\s\\\\S])*?)\\\\5)?', 'g');\n\n//attr, =\"sd\", a=\"amit's\", a=\"sd\"b=\"saf\", ab  cd=\"\"\n\nfunction validateAttributeString(attrStr, options) {\n  //console.log(\"start:\"+attrStr+\":end\");\n\n  //if(attrStr.trim().length === 0) return true; //empty string\n\n  const matches = util.getAllMatches(attrStr, validAttrStrRegxp);\n  const attrNames = {};\n\n  for (let i = 0; i < matches.length; i++) {\n    if (matches[i][1].length === 0) {\n      //nospace before attribute name: a=\"sd\"b=\"saf\"\n      return getErrorObject('InvalidAttr', \"Attribute '\"+matches[i][2]+\"' has no space in starting.\", getPositionFromMatch(matches[i]))\n    } else if (matches[i][3] !== undefined && matches[i][4] === undefined) {\n      return getErrorObject('InvalidAttr', \"Attribute '\"+matches[i][2]+\"' is without value.\", getPositionFromMatch(matches[i]));\n    } else if (matches[i][3] === undefined && !options.allowBooleanAttributes) {\n      //independent attribute: ab\n      return getErrorObject('InvalidAttr', \"boolean attribute '\"+matches[i][2]+\"' is not allowed.\", getPositionFromMatch(matches[i]));\n    }\n    /* else if(matches[i][6] === undefined){//attribute without value: ab=\n                    return { err: { code:\"InvalidAttr\",msg:\"attribute \" + matches[i][2] + \" has no value assigned.\"}};\n                } */\n    const attrName = matches[i][2];\n    if (!validateAttrName(attrName)) {\n      return getErrorObject('InvalidAttr', \"Attribute '\"+attrName+\"' is an invalid name.\", getPositionFromMatch(matches[i]));\n    }\n    if (!attrNames.hasOwnProperty(attrName)) {\n      //check for duplicate attribute.\n      attrNames[attrName] = 1;\n    } else {\n      return getErrorObject('InvalidAttr', \"Attribute '\"+attrName+\"' is repeated.\", getPositionFromMatch(matches[i]));\n    }\n  }\n\n  return true;\n}\n\nfunction validateNumberAmpersand(xmlData, i) {\n  let re = /\\d/;\n  if (xmlData[i] === 'x') {\n    i++;\n    re = /[\\da-fA-F]/;\n  }\n  for (; i < xmlData.length; i++) {\n    if (xmlData[i] === ';')\n      return i;\n    if (!xmlData[i].match(re))\n      break;\n  }\n  return -1;\n}\n\nfunction validateAmpersand(xmlData, i) {\n  // https://www.w3.org/TR/xml/#dt-charref\n  i++;\n  if (xmlData[i] === ';')\n    return -1;\n  if (xmlData[i] === '#') {\n    i++;\n    return validateNumberAmpersand(xmlData, i);\n  }\n  let count = 0;\n  for (; i < xmlData.length; i++, count++) {\n    if (xmlData[i].match(/\\w/) && count < 20)\n      continue;\n    if (xmlData[i] === ';')\n      break;\n    return -1;\n  }\n  return i;\n}\n\nfunction getErrorObject(code, message, lineNumber) {\n  return {\n    err: {\n      code: code,\n      msg: message,\n      line: lineNumber.line || lineNumber,\n      col: lineNumber.col,\n    },\n  };\n}\n\nfunction validateAttrName(attrName) {\n  return util.isName(attrName);\n}\n\n// const startsWithXML = /^xml/i;\n\nfunction validateTagName(tagname) {\n  return util.isName(tagname) /* && !tagname.match(startsWithXML) */;\n}\n\n//this function returns the line number for the character at the given index\nfunction getLineNumberForPosition(xmlData, index) {\n  const lines = xmlData.substring(0, index).split(/\\r?\\n/);\n  return {\n    line: lines.length,\n\n    // column number is last line's length + 1, because column numbering starts at 1:\n    col: lines[lines.length - 1].length + 1\n  };\n}\n\n//this function returns the position of the first character of match within attrStr\nfunction getPositionFromMatch(match) {\n  return match.startIndex + match[1].length;\n}\n", "\nconst defaultOptions = {\n    preserveOrder: false,\n    attributeNamePrefix: '@_',\n    attributesGroupName: false,\n    textNodeName: '#text',\n    ignoreAttributes: true,\n    removeNSPrefix: false, // remove NS from tag name or attribute name if true\n    allowBooleanAttributes: false, //a tag can have attributes without any value\n    //ignoreRootElement : false,\n    parseTagValue: true,\n    parseAttributeValue: false,\n    trimValues: true, //Trim string values of tag and attributes\n    cdataPropName: false,\n    numberParseOptions: {\n      hex: true,\n      leadingZeros: true,\n      eNotation: true\n    },\n    tagValueProcessor: function(tagName, val) {\n      return val;\n    },\n    attributeValueProcessor: function(attrName, val) {\n      return val;\n    },\n    stopNodes: [], //nested tags will not be parsed even for errors\n    alwaysCreateTextNode: false,\n    isArray: () => false,\n    commentPropName: false,\n    unpairedTags: [],\n    processEntities: true,\n    htmlEntities: false,\n    ignoreDeclaration: false,\n    ignorePiTags: false,\n    transformTagName: false,\n    transformAttributeName: false,\n    updateTag: function(tagName, jPath, attrs){\n      return tagName\n    },\n    // skipEmptyListItem: false\n};\n   \nconst buildOptions = function(options) {\n    return Object.assign({}, defaultOptions, options);\n};\n\nexports.buildOptions = buildOptions;\nexports.defaultOptions = defaultOptions;", "'use strict';\n\nclass XmlNode{\n  constructor(tagname) {\n    this.tagname = tagname;\n    this.child = []; //nested tags, text, cdata, comments in order\n    this[\":@\"] = {}; //attributes map\n  }\n  add(key,val){\n    // this.child.push( {name : key, val: val, isCdata: isCdata });\n    if(key === \"__proto__\") key = \"#__proto__\";\n    this.child.push( {[key]: val });\n  }\n  addChild(node) {\n    if(node.tagname === \"__proto__\") node.tagname = \"#__proto__\";\n    if(node[\":@\"] && Object.keys(node[\":@\"]).length > 0){\n      this.child.push( { [node.tagname]: node.child, [\":@\"]: node[\":@\"] });\n    }else{\n      this.child.push( { [node.tagname]: node.child });\n    }\n  };\n};\n\n\nmodule.exports = XmlNode;", "const util = require('../util');\n\n//TODO: handle comments\nfunction readDocType(xmlData, i){\n    \n    const entities = {};\n    if( xmlData[i + 3] === 'O' &&\n         xmlData[i + 4] === 'C' &&\n         xmlData[i + 5] === 'T' &&\n         xmlData[i + 6] === 'Y' &&\n         xmlData[i + 7] === 'P' &&\n         xmlData[i + 8] === 'E')\n    {    \n        i = i+9;\n        let angleBracketsCount = 1;\n        let hasBody = false, comment = false;\n        let exp = \"\";\n        for(;i<xmlData.length;i++){\n            if (xmlData[i] === '<' && !comment) { //Determine the tag type\n                if( hasBody && isEntity(xmlData, i)){\n                    i += 7; \n                    let entityName, val;\n                    [entityName, val,i] = readEntityExp(xmlData,i+1);\n                    if(val.indexOf(\"&\") === -1) //Parameter entities are not supported\n                        entities[ validateEntityName(entityName) ] = {\n                            regx : RegExp( `&${entityName};`,\"g\"),\n                            val: val\n                        };\n                }\n                else if( hasBody && isElement(xmlData, i))  i += 8;//Not supported\n                else if( hasBody && isAttlist(xmlData, i))  i += 8;//Not supported\n                else if( hasBody && isNotation(xmlData, i)) i += 9;//Not supported\n                else if( isComment)                         comment = true;\n                else                                        throw new Error(\"Invalid DOCTYPE\");\n\n                angleBracketsCount++;\n                exp = \"\";\n            } else if (xmlData[i] === '>') { //Read tag content\n                if(comment){\n                    if( xmlData[i - 1] === \"-\" && xmlData[i - 2] === \"-\"){\n                        comment = false;\n                        angleBracketsCount--;\n                    }\n                }else{\n                    angleBracketsCount--;\n                }\n                if (angleBracketsCount === 0) {\n                  break;\n                }\n            }else if( xmlData[i] === '['){\n                hasBody = true;\n            }else{\n                exp += xmlData[i];\n            }\n        }\n        if(angleBracketsCount !== 0){\n            throw new Error(`Unclosed DOCTYPE`);\n        }\n    }else{\n        throw new Error(`Invalid Tag instead of DOCTYPE`);\n    }\n    return {entities, i};\n}\n\nfunction readEntityExp(xmlData,i){\n    //External entities are not supported\n    //    <!ENTITY ext SYSTEM \"http://normal-website.com\" >\n\n    //Parameter entities are not supported\n    //    <!ENTITY entityname \"&anotherElement;\">\n\n    //Internal entities are supported\n    //    <!ENTITY entityname \"replacement text\">\n    \n    //read EntityName\n    let entityName = \"\";\n    for (; i < xmlData.length && (xmlData[i] !== \"'\" && xmlData[i] !== '\"' ); i++) {\n        // if(xmlData[i] === \" \") continue;\n        // else \n        entityName += xmlData[i];\n    }\n    entityName = entityName.trim();\n    if(entityName.indexOf(\" \") !== -1) throw new Error(\"External entites are not supported\");\n\n    //read Entity Value\n    const startChar = xmlData[i++];\n    let val = \"\"\n    for (; i < xmlData.length && xmlData[i] !== startChar ; i++) {\n        val += xmlData[i];\n    }\n    return [entityName, val, i];\n}\n\nfunction isComment(xmlData, i){\n    if(xmlData[i+1] === '!' &&\n    xmlData[i+2] === '-' &&\n    xmlData[i+3] === '-') return true\n    return false\n}\nfunction isEntity(xmlData, i){\n    if(xmlData[i+1] === '!' &&\n    xmlData[i+2] === 'E' &&\n    xmlData[i+3] === 'N' &&\n    xmlData[i+4] === 'T' &&\n    xmlData[i+5] === 'I' &&\n    xmlData[i+6] === 'T' &&\n    xmlData[i+7] === 'Y') return true\n    return false\n}\nfunction isElement(xmlData, i){\n    if(xmlData[i+1] === '!' &&\n    xmlData[i+2] === 'E' &&\n    xmlData[i+3] === 'L' &&\n    xmlData[i+4] === 'E' &&\n    xmlData[i+5] === 'M' &&\n    xmlData[i+6] === 'E' &&\n    xmlData[i+7] === 'N' &&\n    xmlData[i+8] === 'T') return true\n    return false\n}\n\nfunction isAttlist(xmlData, i){\n    if(xmlData[i+1] === '!' &&\n    xmlData[i+2] === 'A' &&\n    xmlData[i+3] === 'T' &&\n    xmlData[i+4] === 'T' &&\n    xmlData[i+5] === 'L' &&\n    xmlData[i+6] === 'I' &&\n    xmlData[i+7] === 'S' &&\n    xmlData[i+8] === 'T') return true\n    return false\n}\nfunction isNotation(xmlData, i){\n    if(xmlData[i+1] === '!' &&\n    xmlData[i+2] === 'N' &&\n    xmlData[i+3] === 'O' &&\n    xmlData[i+4] === 'T' &&\n    xmlData[i+5] === 'A' &&\n    xmlData[i+6] === 'T' &&\n    xmlData[i+7] === 'I' &&\n    xmlData[i+8] === 'O' &&\n    xmlData[i+9] === 'N') return true\n    return false\n}\n\nfunction validateEntityName(name){\n    if (util.isName(name))\n\treturn name;\n    else\n        throw new Error(`Invalid entity name ${name}`);\n}\n\nmodule.exports = readDocType;\n", "const hexRegex = /^[-+]?0x[a-fA-F0-9]+$/;\nconst numRegex = /^([\\-\\+])?(0*)([0-9]*(\\.[0-9]*)?)$/;\n// const octRegex = /^0x[a-z0-9]+/;\n// const binRegex = /0x[a-z0-9]+/;\n\n \nconst consider = {\n    hex :  true,\n    // oct: false,\n    leadingZeros: true,\n    decimalPoint: \"\\.\",\n    eNotation: true,\n    //skipLike: /regex/\n};\n\nfunction toNumber(str, options = {}){\n    options = Object.assign({}, consider, options );\n    if(!str || typeof str !== \"string\" ) return str;\n    \n    let trimmedStr  = str.trim();\n    \n    if(options.skipLike !== undefined && options.skipLike.test(trimmedStr)) return str;\n    else if(str===\"0\") return 0;\n    else if (options.hex && hexRegex.test(trimmedStr)) {\n        return parse_int(trimmedStr, 16);\n    // }else if (options.oct && octRegex.test(str)) {\n    //     return Number.parseInt(val, 8);\n    }else if (trimmedStr.search(/[eE]/)!== -1) { //eNotation\n        const notation = trimmedStr.match(/^([-\\+])?(0*)([0-9]*(\\.[0-9]*)?[eE][-\\+]?[0-9]+)$/); \n        // +00.123 => [ , '+', '00', '.123', ..\n        if(notation){\n            // console.log(notation)\n            if(options.leadingZeros){ //accept with leading zeros\n                trimmedStr = (notation[1] || \"\") + notation[3];\n            }else{\n                if(notation[2] === \"0\" && notation[3][0]=== \".\"){ //valid number\n                }else{\n                    return str;\n                }\n            }\n            return options.eNotation ? Number(trimmedStr) : str;\n        }else{\n            return str;\n        }\n    // }else if (options.parseBin && binRegex.test(str)) {\n    //     return Number.parseInt(val, 2);\n    }else{\n        //separate negative sign, leading zeros, and rest number\n        const match = numRegex.exec(trimmedStr);\n        // +00.123 => [ , '+', '00', '.123', ..\n        if(match){\n            const sign = match[1];\n            const leadingZeros = match[2];\n            let numTrimmedByZeros = trimZeros(match[3]); //complete num without leading zeros\n            //trim ending zeros for floating number\n            \n            if(!options.leadingZeros && leadingZeros.length > 0 && sign && trimmedStr[2] !== \".\") return str; //-0123\n            else if(!options.leadingZeros && leadingZeros.length > 0 && !sign && trimmedStr[1] !== \".\") return str; //0123\n            else if(options.leadingZeros && leadingZeros===str) return 0; //00\n            \n            else{//no leading zeros or leading zeros are allowed\n                const num = Number(trimmedStr);\n                const numStr = \"\" + num;\n\n                if(numStr.search(/[eE]/) !== -1){ //given number is long and parsed to eNotation\n                    if(options.eNotation) return num;\n                    else return str;\n                }else if(trimmedStr.indexOf(\".\") !== -1){ //floating number\n                    if(numStr === \"0\" && (numTrimmedByZeros === \"\") ) return num; //0.0\n                    else if(numStr === numTrimmedByZeros) return num; //0.456. 0.79000\n                    else if( sign && numStr === \"-\"+numTrimmedByZeros) return num;\n                    else return str;\n                }\n                \n                if(leadingZeros){\n                    return (numTrimmedByZeros === numStr) || (sign+numTrimmedByZeros === numStr) ? num : str\n                }else  {\n                    return (trimmedStr === numStr) || (trimmedStr === sign+numStr) ? num : str\n                }\n            }\n        }else{ //non-numeric string\n            return str;\n        }\n    }\n}\n\n/**\n * \n * @param {string} numStr without leading zeros\n * @returns \n */\nfunction trimZeros(numStr){\n    if(numStr && numStr.indexOf(\".\") !== -1){//float\n        numStr = numStr.replace(/0+$/, \"\"); //remove ending zeros\n        if(numStr === \".\")  numStr = \"0\";\n        else if(numStr[0] === \".\")  numStr = \"0\"+numStr;\n        else if(numStr[numStr.length-1] === \".\")  numStr = numStr.substr(0,numStr.length-1);\n        return numStr;\n    }\n    return numStr;\n}\n\nfunction parse_int(numStr, base){\n    //polyfill\n    if(parseInt) return parseInt(numStr, base);\n    else if(Number.parseInt) return Number.parseInt(numStr, base);\n    else if(window && window.parseInt) return window.parseInt(numStr, base);\n    else throw new Error(\"parseInt, Number.parseInt, window.parseInt are not supported\")\n}\n\nmodule.exports = toNumber;", "function getIgnoreAttributesFn(ignoreAttributes) {\n    if (typeof ignoreAttributes === 'function') {\n        return ignoreAttributes\n    }\n    if (Array.isArray(ignoreAttributes)) {\n        return (attrName) => {\n            for (const pattern of ignoreAttributes) {\n                if (typeof pattern === 'string' && attrName === pattern) {\n                    return true\n                }\n                if (pattern instanceof RegExp && pattern.test(attrName)) {\n                    return true\n                }\n            }\n        }\n    }\n    return () => false\n}\n\nmodule.exports = getIgnoreAttributesFn", "'use strict';\n///@ts-check\n\nconst util = require('../util');\nconst xmlNode = require('./xmlNode');\nconst readDocType = require(\"./DocTypeReader\");\nconst toNumber = require(\"strnum\");\nconst getIgnoreAttributesFn = require('../ignoreAttributes')\n\n// const regx =\n//   '<((!\\\\[CDATA\\\\[([\\\\s\\\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\\\/)(NAME)\\\\s*>))([^<]*)'\n//   .replace(/NAME/g, util.nameRegexp);\n\n//const tagsRegx = new RegExp(\"<(\\\\/?[\\\\w:\\\\-\\._]+)([^>]*)>(\\\\s*\"+cdataRegx+\")*([^<]+)?\",\"g\");\n//const tagsRegx = new RegExp(\"<(\\\\/?)((\\\\w*:)?([\\\\w:\\\\-\\._]+))([^>]*)>([^<]*)(\"+cdataRegx+\"([^<]*))*([^<]+)?\",\"g\");\n\nclass OrderedObjParser{\n  constructor(options){\n    this.options = options;\n    this.currentNode = null;\n    this.tagsNodeStack = [];\n    this.docTypeEntities = {};\n    this.lastEntities = {\n      \"apos\" : { regex: /&(apos|#39|#x27);/g, val : \"'\"},\n      \"gt\" : { regex: /&(gt|#62|#x3E);/g, val : \">\"},\n      \"lt\" : { regex: /&(lt|#60|#x3C);/g, val : \"<\"},\n      \"quot\" : { regex: /&(quot|#34|#x22);/g, val : \"\\\"\"},\n    };\n    this.ampEntity = { regex: /&(amp|#38|#x26);/g, val : \"&\"};\n    this.htmlEntities = {\n      \"space\": { regex: /&(nbsp|#160);/g, val: \" \" },\n      // \"lt\" : { regex: /&(lt|#60);/g, val: \"<\" },\n      // \"gt\" : { regex: /&(gt|#62);/g, val: \">\" },\n      // \"amp\" : { regex: /&(amp|#38);/g, val: \"&\" },\n      // \"quot\" : { regex: /&(quot|#34);/g, val: \"\\\"\" },\n      // \"apos\" : { regex: /&(apos|#39);/g, val: \"'\" },\n      \"cent\" : { regex: /&(cent|#162);/g, val: \"\u00A2\" },\n      \"pound\" : { regex: /&(pound|#163);/g, val: \"\u00A3\" },\n      \"yen\" : { regex: /&(yen|#165);/g, val: \"\u00A5\" },\n      \"euro\" : { regex: /&(euro|#8364);/g, val: \"\u20AC\" },\n      \"copyright\" : { regex: /&(copy|#169);/g, val: \"\u00A9\" },\n      \"reg\" : { regex: /&(reg|#174);/g, val: \"\u00AE\" },\n      \"inr\" : { regex: /&(inr|#8377);/g, val: \"\u20B9\" },\n      \"num_dec\": { regex: /&#([0-9]{1,7});/g, val : (_, str) => String.fromCharCode(Number.parseInt(str, 10)) },\n      \"num_hex\": { regex: /&#x([0-9a-fA-F]{1,6});/g, val : (_, str) => String.fromCharCode(Number.parseInt(str, 16)) },\n    };\n    this.addExternalEntities = addExternalEntities;\n    this.parseXml = parseXml;\n    this.parseTextData = parseTextData;\n    this.resolveNameSpace = resolveNameSpace;\n    this.buildAttributesMap = buildAttributesMap;\n    this.isItStopNode = isItStopNode;\n    this.replaceEntitiesValue = replaceEntitiesValue;\n    this.readStopNodeData = readStopNodeData;\n    this.saveTextToParentTag = saveTextToParentTag;\n    this.addChild = addChild;\n    this.ignoreAttributesFn = getIgnoreAttributesFn(this.options.ignoreAttributes)\n  }\n\n}\n\nfunction addExternalEntities(externalEntities){\n  const entKeys = Object.keys(externalEntities);\n  for (let i = 0; i < entKeys.length; i++) {\n    const ent = entKeys[i];\n    this.lastEntities[ent] = {\n       regex: new RegExp(\"&\"+ent+\";\",\"g\"),\n       val : externalEntities[ent]\n    }\n  }\n}\n\n/**\n * @param {string} val\n * @param {string} tagName\n * @param {string} jPath\n * @param {boolean} dontTrim\n * @param {boolean} hasAttributes\n * @param {boolean} isLeafNode\n * @param {boolean} escapeEntities\n */\nfunction parseTextData(val, tagName, jPath, dontTrim, hasAttributes, isLeafNode, escapeEntities) {\n  if (val !== undefined) {\n    if (this.options.trimValues && !dontTrim) {\n      val = val.trim();\n    }\n    if(val.length > 0){\n      if(!escapeEntities) val = this.replaceEntitiesValue(val);\n      \n      const newval = this.options.tagValueProcessor(tagName, val, jPath, hasAttributes, isLeafNode);\n      if(newval === null || newval === undefined){\n        //don't parse\n        return val;\n      }else if(typeof newval !== typeof val || newval !== val){\n        //overwrite\n        return newval;\n      }else if(this.options.trimValues){\n        return parseValue(val, this.options.parseTagValue, this.options.numberParseOptions);\n      }else{\n        const trimmedVal = val.trim();\n        if(trimmedVal === val){\n          return parseValue(val, this.options.parseTagValue, this.options.numberParseOptions);\n        }else{\n          return val;\n        }\n      }\n    }\n  }\n}\n\nfunction resolveNameSpace(tagname) {\n  if (this.options.removeNSPrefix) {\n    const tags = tagname.split(':');\n    const prefix = tagname.charAt(0) === '/' ? '/' : '';\n    if (tags[0] === 'xmlns') {\n      return '';\n    }\n    if (tags.length === 2) {\n      tagname = prefix + tags[1];\n    }\n  }\n  return tagname;\n}\n\n//TODO: change regex to capture NS\n//const attrsRegx = new RegExp(\"([\\\\w\\\\-\\\\.\\\\:]+)\\\\s*=\\\\s*(['\\\"])((.|\\n)*?)\\\\2\",\"gm\");\nconst attrsRegx = new RegExp('([^\\\\s=]+)\\\\s*(=\\\\s*([\\'\"])([\\\\s\\\\S]*?)\\\\3)?', 'gm');\n\nfunction buildAttributesMap(attrStr, jPath, tagName) {\n  if (this.options.ignoreAttributes !== true && typeof attrStr === 'string') {\n    // attrStr = attrStr.replace(/\\r?\\n/g, ' ');\n    //attrStr = attrStr || attrStr.trim();\n\n    const matches = util.getAllMatches(attrStr, attrsRegx);\n    const len = matches.length; //don't make it inline\n    const attrs = {};\n    for (let i = 0; i < len; i++) {\n      const attrName = this.resolveNameSpace(matches[i][1]);\n      if (this.ignoreAttributesFn(attrName, jPath)) {\n        continue\n      }\n      let oldVal = matches[i][4];\n      let aName = this.options.attributeNamePrefix + attrName;\n      if (attrName.length) {\n        if (this.options.transformAttributeName) {\n          aName = this.options.transformAttributeName(aName);\n        }\n        if(aName === \"__proto__\") aName  = \"#__proto__\";\n        if (oldVal !== undefined) {\n          if (this.options.trimValues) {\n            oldVal = oldVal.trim();\n          }\n          oldVal = this.replaceEntitiesValue(oldVal);\n          const newVal = this.options.attributeValueProcessor(attrName, oldVal, jPath);\n          if(newVal === null || newVal === undefined){\n            //don't parse\n            attrs[aName] = oldVal;\n          }else if(typeof newVal !== typeof oldVal || newVal !== oldVal){\n            //overwrite\n            attrs[aName] = newVal;\n          }else{\n            //parse\n            attrs[aName] = parseValue(\n              oldVal,\n              this.options.parseAttributeValue,\n              this.options.numberParseOptions\n            );\n          }\n        } else if (this.options.allowBooleanAttributes) {\n          attrs[aName] = true;\n        }\n      }\n    }\n    if (!Object.keys(attrs).length) {\n      return;\n    }\n    if (this.options.attributesGroupName) {\n      const attrCollection = {};\n      attrCollection[this.options.attributesGroupName] = attrs;\n      return attrCollection;\n    }\n    return attrs\n  }\n}\n\nconst parseXml = function(xmlData) {\n  xmlData = xmlData.replace(/\\r\\n?/g, \"\\n\"); //TODO: remove this line\n  const xmlObj = new xmlNode('!xml');\n  let currentNode = xmlObj;\n  let textData = \"\";\n  let jPath = \"\";\n  for(let i=0; i< xmlData.length; i++){//for each char in XML data\n    const ch = xmlData[i];\n    if(ch === '<'){\n      // const nextIndex = i+1;\n      // const _2ndChar = xmlData[nextIndex];\n      if( xmlData[i+1] === '/') {//Closing Tag\n        const closeIndex = findClosingIndex(xmlData, \">\", i, \"Closing Tag is not closed.\")\n        let tagName = xmlData.substring(i+2,closeIndex).trim();\n\n        if(this.options.removeNSPrefix){\n          const colonIndex = tagName.indexOf(\":\");\n          if(colonIndex !== -1){\n            tagName = tagName.substr(colonIndex+1);\n          }\n        }\n\n        if(this.options.transformTagName) {\n          tagName = this.options.transformTagName(tagName);\n        }\n\n        if(currentNode){\n          textData = this.saveTextToParentTag(textData, currentNode, jPath);\n        }\n\n        //check if last tag of nested tag was unpaired tag\n        const lastTagName = jPath.substring(jPath.lastIndexOf(\".\")+1);\n        if(tagName && this.options.unpairedTags.indexOf(tagName) !== -1 ){\n          throw new Error(`Unpaired tag can not be used as closing tag: </${tagName}>`);\n        }\n        let propIndex = 0\n        if(lastTagName && this.options.unpairedTags.indexOf(lastTagName) !== -1 ){\n          propIndex = jPath.lastIndexOf('.', jPath.lastIndexOf('.')-1)\n          this.tagsNodeStack.pop();\n        }else{\n          propIndex = jPath.lastIndexOf(\".\");\n        }\n        jPath = jPath.substring(0, propIndex);\n\n        currentNode = this.tagsNodeStack.pop();//avoid recursion, set the parent tag scope\n        textData = \"\";\n        i = closeIndex;\n      } else if( xmlData[i+1] === '?') {\n\n        let tagData = readTagExp(xmlData,i, false, \"?>\");\n        if(!tagData) throw new Error(\"Pi Tag is not closed.\");\n\n        textData = this.saveTextToParentTag(textData, currentNode, jPath);\n        if( (this.options.ignoreDeclaration && tagData.tagName === \"?xml\") || this.options.ignorePiTags){\n\n        }else{\n  \n          const childNode = new xmlNode(tagData.tagName);\n          childNode.add(this.options.textNodeName, \"\");\n          \n          if(tagData.tagName !== tagData.tagExp && tagData.attrExpPresent){\n            childNode[\":@\"] = this.buildAttributesMap(tagData.tagExp, jPath, tagData.tagName);\n          }\n          this.addChild(currentNode, childNode, jPath)\n\n        }\n\n\n        i = tagData.closeIndex + 1;\n      } else if(xmlData.substr(i + 1, 3) === '!--') {\n        const endIndex = findClosingIndex(xmlData, \"-->\", i+4, \"Comment is not closed.\")\n        if(this.options.commentPropName){\n          const comment = xmlData.substring(i + 4, endIndex - 2);\n\n          textData = this.saveTextToParentTag(textData, currentNode, jPath);\n\n          currentNode.add(this.options.commentPropName, [ { [this.options.textNodeName] : comment } ]);\n        }\n        i = endIndex;\n      } else if( xmlData.substr(i + 1, 2) === '!D') {\n        const result = readDocType(xmlData, i);\n        this.docTypeEntities = result.entities;\n        i = result.i;\n      }else if(xmlData.substr(i + 1, 2) === '![') {\n        const closeIndex = findClosingIndex(xmlData, \"]]>\", i, \"CDATA is not closed.\") - 2;\n        const tagExp = xmlData.substring(i + 9,closeIndex);\n\n        textData = this.saveTextToParentTag(textData, currentNode, jPath);\n\n        let val = this.parseTextData(tagExp, currentNode.tagname, jPath, true, false, true, true);\n        if(val == undefined) val = \"\";\n\n        //cdata should be set even if it is 0 length string\n        if(this.options.cdataPropName){\n          currentNode.add(this.options.cdataPropName, [ { [this.options.textNodeName] : tagExp } ]);\n        }else{\n          currentNode.add(this.options.textNodeName, val);\n        }\n        \n        i = closeIndex + 2;\n      }else {//Opening tag\n        let result = readTagExp(xmlData,i, this.options.removeNSPrefix);\n        let tagName= result.tagName;\n        const rawTagName = result.rawTagName;\n        let tagExp = result.tagExp;\n        let attrExpPresent = result.attrExpPresent;\n        let closeIndex = result.closeIndex;\n\n        if (this.options.transformTagName) {\n          tagName = this.options.transformTagName(tagName);\n        }\n        \n        //save text as child node\n        if (currentNode && textData) {\n          if(currentNode.tagname !== '!xml'){\n            //when nested tag is found\n            textData = this.saveTextToParentTag(textData, currentNode, jPath, false);\n          }\n        }\n\n        //check if last tag was unpaired tag\n        const lastTag = currentNode;\n        if(lastTag && this.options.unpairedTags.indexOf(lastTag.tagname) !== -1 ){\n          currentNode = this.tagsNodeStack.pop();\n          jPath = jPath.substring(0, jPath.lastIndexOf(\".\"));\n        }\n        if(tagName !== xmlObj.tagname){\n          jPath += jPath ? \".\" + tagName : tagName;\n        }\n        if (this.isItStopNode(this.options.stopNodes, jPath, tagName)) {\n          let tagContent = \"\";\n          //self-closing tag\n          if(tagExp.length > 0 && tagExp.lastIndexOf(\"/\") === tagExp.length - 1){\n            if(tagName[tagName.length - 1] === \"/\"){ //remove trailing '/'\n              tagName = tagName.substr(0, tagName.length - 1);\n              jPath = jPath.substr(0, jPath.length - 1);\n              tagExp = tagName;\n            }else{\n              tagExp = tagExp.substr(0, tagExp.length - 1);\n            }\n            i = result.closeIndex;\n          }\n          //unpaired tag\n          else if(this.options.unpairedTags.indexOf(tagName) !== -1){\n            \n            i = result.closeIndex;\n          }\n          //normal tag\n          else{\n            //read until closing tag is found\n            const result = this.readStopNodeData(xmlData, rawTagName, closeIndex + 1);\n            if(!result) throw new Error(`Unexpected end of ${rawTagName}`);\n            i = result.i;\n            tagContent = result.tagContent;\n          }\n\n          const childNode = new xmlNode(tagName);\n          if(tagName !== tagExp && attrExpPresent){\n            childNode[\":@\"] = this.buildAttributesMap(tagExp, jPath, tagName);\n          }\n          if(tagContent) {\n            tagContent = this.parseTextData(tagContent, tagName, jPath, true, attrExpPresent, true, true);\n          }\n          \n          jPath = jPath.substr(0, jPath.lastIndexOf(\".\"));\n          childNode.add(this.options.textNodeName, tagContent);\n          \n          this.addChild(currentNode, childNode, jPath)\n        }else{\n  //selfClosing tag\n          if(tagExp.length > 0 && tagExp.lastIndexOf(\"/\") === tagExp.length - 1){\n            if(tagName[tagName.length - 1] === \"/\"){ //remove trailing '/'\n              tagName = tagName.substr(0, tagName.length - 1);\n              jPath = jPath.substr(0, jPath.length - 1);\n              tagExp = tagName;\n            }else{\n              tagExp = tagExp.substr(0, tagExp.length - 1);\n            }\n            \n            if(this.options.transformTagName) {\n              tagName = this.options.transformTagName(tagName);\n            }\n\n            const childNode = new xmlNode(tagName);\n            if(tagName !== tagExp && attrExpPresent){\n              childNode[\":@\"] = this.buildAttributesMap(tagExp, jPath, tagName);\n            }\n            this.addChild(currentNode, childNode, jPath)\n            jPath = jPath.substr(0, jPath.lastIndexOf(\".\"));\n          }\n    //opening tag\n          else{\n            const childNode = new xmlNode( tagName);\n            this.tagsNodeStack.push(currentNode);\n            \n            if(tagName !== tagExp && attrExpPresent){\n              childNode[\":@\"] = this.buildAttributesMap(tagExp, jPath, tagName);\n            }\n            this.addChild(currentNode, childNode, jPath)\n            currentNode = childNode;\n          }\n          textData = \"\";\n          i = closeIndex;\n        }\n      }\n    }else{\n      textData += xmlData[i];\n    }\n  }\n  return xmlObj.child;\n}\n\nfunction addChild(currentNode, childNode, jPath){\n  const result = this.options.updateTag(childNode.tagname, jPath, childNode[\":@\"])\n  if(result === false){\n  }else if(typeof result === \"string\"){\n    childNode.tagname = result\n    currentNode.addChild(childNode);\n  }else{\n    currentNode.addChild(childNode);\n  }\n}\n\nconst replaceEntitiesValue = function(val){\n\n  if(this.options.processEntities){\n    for(let entityName in this.docTypeEntities){\n      const entity = this.docTypeEntities[entityName];\n      val = val.replace( entity.regx, entity.val);\n    }\n    for(let entityName in this.lastEntities){\n      const entity = this.lastEntities[entityName];\n      val = val.replace( entity.regex, entity.val);\n    }\n    if(this.options.htmlEntities){\n      for(let entityName in this.htmlEntities){\n        const entity = this.htmlEntities[entityName];\n        val = val.replace( entity.regex, entity.val);\n      }\n    }\n    val = val.replace( this.ampEntity.regex, this.ampEntity.val);\n  }\n  return val;\n}\nfunction saveTextToParentTag(textData, currentNode, jPath, isLeafNode) {\n  if (textData) { //store previously collected data as textNode\n    if(isLeafNode === undefined) isLeafNode = currentNode.child.length === 0\n    \n    textData = this.parseTextData(textData,\n      currentNode.tagname,\n      jPath,\n      false,\n      currentNode[\":@\"] ? Object.keys(currentNode[\":@\"]).length !== 0 : false,\n      isLeafNode);\n\n    if (textData !== undefined && textData !== \"\")\n      currentNode.add(this.options.textNodeName, textData);\n    textData = \"\";\n  }\n  return textData;\n}\n\n//TODO: use jPath to simplify the logic\n/**\n * \n * @param {string[]} stopNodes \n * @param {string} jPath\n * @param {string} currentTagName \n */\nfunction isItStopNode(stopNodes, jPath, currentTagName){\n  const allNodesExp = \"*.\" + currentTagName;\n  for (const stopNodePath in stopNodes) {\n    const stopNodeExp = stopNodes[stopNodePath];\n    if( allNodesExp === stopNodeExp || jPath === stopNodeExp  ) return true;\n  }\n  return false;\n}\n\n/**\n * Returns the tag Expression and where it is ending handling single-double quotes situation\n * @param {string} xmlData \n * @param {number} i starting index\n * @returns \n */\nfunction tagExpWithClosingIndex(xmlData, i, closingChar = \">\"){\n  let attrBoundary;\n  let tagExp = \"\";\n  for (let index = i; index < xmlData.length; index++) {\n    let ch = xmlData[index];\n    if (attrBoundary) {\n        if (ch === attrBoundary) attrBoundary = \"\";//reset\n    } else if (ch === '\"' || ch === \"'\") {\n        attrBoundary = ch;\n    } else if (ch === closingChar[0]) {\n      if(closingChar[1]){\n        if(xmlData[index + 1] === closingChar[1]){\n          return {\n            data: tagExp,\n            index: index\n          }\n        }\n      }else{\n        return {\n          data: tagExp,\n          index: index\n        }\n      }\n    } else if (ch === '\\t') {\n      ch = \" \"\n    }\n    tagExp += ch;\n  }\n}\n\nfunction findClosingIndex(xmlData, str, i, errMsg){\n  const closingIndex = xmlData.indexOf(str, i);\n  if(closingIndex === -1){\n    throw new Error(errMsg)\n  }else{\n    return closingIndex + str.length - 1;\n  }\n}\n\nfunction readTagExp(xmlData,i, removeNSPrefix, closingChar = \">\"){\n  const result = tagExpWithClosingIndex(xmlData, i+1, closingChar);\n  if(!result) return;\n  let tagExp = result.data;\n  const closeIndex = result.index;\n  const separatorIndex = tagExp.search(/\\s/);\n  let tagName = tagExp;\n  let attrExpPresent = true;\n  if(separatorIndex !== -1){//separate tag name and attributes expression\n    tagName = tagExp.substring(0, separatorIndex);\n    tagExp = tagExp.substring(separatorIndex + 1).trimStart();\n  }\n\n  const rawTagName = tagName;\n  if(removeNSPrefix){\n    const colonIndex = tagName.indexOf(\":\");\n    if(colonIndex !== -1){\n      tagName = tagName.substr(colonIndex+1);\n      attrExpPresent = tagName !== result.data.substr(colonIndex + 1);\n    }\n  }\n\n  return {\n    tagName: tagName,\n    tagExp: tagExp,\n    closeIndex: closeIndex,\n    attrExpPresent: attrExpPresent,\n    rawTagName: rawTagName,\n  }\n}\n/**\n * find paired tag for a stop node\n * @param {string} xmlData \n * @param {string} tagName \n * @param {number} i \n */\nfunction readStopNodeData(xmlData, tagName, i){\n  const startIndex = i;\n  // Starting at 1 since we already have an open tag\n  let openTagCount = 1;\n\n  for (; i < xmlData.length; i++) {\n    if( xmlData[i] === \"<\"){ \n      if (xmlData[i+1] === \"/\") {//close tag\n          const closeIndex = findClosingIndex(xmlData, \">\", i, `${tagName} is not closed`);\n          let closeTagName = xmlData.substring(i+2,closeIndex).trim();\n          if(closeTagName === tagName){\n            openTagCount--;\n            if (openTagCount === 0) {\n              return {\n                tagContent: xmlData.substring(startIndex, i),\n                i : closeIndex\n              }\n            }\n          }\n          i=closeIndex;\n        } else if(xmlData[i+1] === '?') { \n          const closeIndex = findClosingIndex(xmlData, \"?>\", i+1, \"StopNode is not closed.\")\n          i=closeIndex;\n        } else if(xmlData.substr(i + 1, 3) === '!--') { \n          const closeIndex = findClosingIndex(xmlData, \"-->\", i+3, \"StopNode is not closed.\")\n          i=closeIndex;\n        } else if(xmlData.substr(i + 1, 2) === '![') { \n          const closeIndex = findClosingIndex(xmlData, \"]]>\", i, \"StopNode is not closed.\") - 2;\n          i=closeIndex;\n        } else {\n          const tagData = readTagExp(xmlData, i, '>')\n\n          if (tagData) {\n            const openTagName = tagData && tagData.tagName;\n            if (openTagName === tagName && tagData.tagExp[tagData.tagExp.length-1] !== \"/\") {\n              openTagCount++;\n            }\n            i=tagData.closeIndex;\n          }\n        }\n      }\n  }//end for loop\n}\n\nfunction parseValue(val, shouldParse, options) {\n  if (shouldParse && typeof val === 'string') {\n    //console.log(options)\n    const newval = val.trim();\n    if(newval === 'true' ) return true;\n    else if(newval === 'false' ) return false;\n    else return toNumber(val, options);\n  } else {\n    if (util.isExist(val)) {\n      return val;\n    } else {\n      return '';\n    }\n  }\n}\n\n\nmodule.exports = OrderedObjParser;\n", "'use strict';\n\n/**\n * \n * @param {array} node \n * @param {any} options \n * @returns \n */\nfunction prettify(node, options){\n  return compress( node, options);\n}\n\n/**\n * \n * @param {array} arr \n * @param {object} options \n * @param {string} jPath \n * @returns object\n */\nfunction compress(arr, options, jPath){\n  let text;\n  const compressedObj = {};\n  for (let i = 0; i < arr.length; i++) {\n    const tagObj = arr[i];\n    const property = propName(tagObj);\n    let newJpath = \"\";\n    if(jPath === undefined) newJpath = property;\n    else newJpath = jPath + \".\" + property;\n\n    if(property === options.textNodeName){\n      if(text === undefined) text = tagObj[property];\n      else text += \"\" + tagObj[property];\n    }else if(property === undefined){\n      continue;\n    }else if(tagObj[property]){\n      \n      let val = compress(tagObj[property], options, newJpath);\n      const isLeaf = isLeafTag(val, options);\n\n      if(tagObj[\":@\"]){\n        assignAttributes( val, tagObj[\":@\"], newJpath, options);\n      }else if(Object.keys(val).length === 1 && val[options.textNodeName] !== undefined && !options.alwaysCreateTextNode){\n        val = val[options.textNodeName];\n      }else if(Object.keys(val).length === 0){\n        if(options.alwaysCreateTextNode) val[options.textNodeName] = \"\";\n        else val = \"\";\n      }\n\n      if(compressedObj[property] !== undefined && compressedObj.hasOwnProperty(property)) {\n        if(!Array.isArray(compressedObj[property])) {\n            compressedObj[property] = [ compressedObj[property] ];\n        }\n        compressedObj[property].push(val);\n      }else{\n        //TODO: if a node is not an array, then check if it should be an array\n        //also determine if it is a leaf node\n        if (options.isArray(property, newJpath, isLeaf )) {\n          compressedObj[property] = [val];\n        }else{\n          compressedObj[property] = val;\n        }\n      }\n    }\n    \n  }\n  // if(text && text.length > 0) compressedObj[options.textNodeName] = text;\n  if(typeof text === \"string\"){\n    if(text.length > 0) compressedObj[options.textNodeName] = text;\n  }else if(text !== undefined) compressedObj[options.textNodeName] = text;\n  return compressedObj;\n}\n\nfunction propName(obj){\n  const keys = Object.keys(obj);\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    if(key !== \":@\") return key;\n  }\n}\n\nfunction assignAttributes(obj, attrMap, jpath, options){\n  if (attrMap) {\n    const keys = Object.keys(attrMap);\n    const len = keys.length; //don't make it inline\n    for (let i = 0; i < len; i++) {\n      const atrrName = keys[i];\n      if (options.isArray(atrrName, jpath + \".\" + atrrName, true, true)) {\n        obj[atrrName] = [ attrMap[atrrName] ];\n      } else {\n        obj[atrrName] = attrMap[atrrName];\n      }\n    }\n  }\n}\n\nfunction isLeafTag(obj, options){\n  const { textNodeName } = options;\n  const propCount = Object.keys(obj).length;\n  \n  if (propCount === 0) {\n    return true;\n  }\n\n  if (\n    propCount === 1 &&\n    (obj[textNodeName] || typeof obj[textNodeName] === \"boolean\" || obj[textNodeName] === 0)\n  ) {\n    return true;\n  }\n\n  return false;\n}\nexports.prettify = prettify;\n", "const { buildOptions} = require(\"./OptionsBuilder\");\nconst OrderedObjParser = require(\"./OrderedObjParser\");\nconst { prettify} = require(\"./node2json\");\nconst validator = require('../validator');\n\nclass XMLParser{\n    \n    constructor(options){\n        this.externalEntities = {};\n        this.options = buildOptions(options);\n        \n    }\n    /**\n     * Parse XML dats to JS object \n     * @param {string|Buffer} xmlData \n     * @param {boolean|Object} validationOption \n     */\n    parse(xmlData,validationOption){\n        if(typeof xmlData === \"string\"){\n        }else if( xmlData.toString){\n            xmlData = xmlData.toString();\n        }else{\n            throw new Error(\"XML data is accepted in String or Bytes[] form.\")\n        }\n        if( validationOption){\n            if(validationOption === true) validationOption = {}; //validate with default options\n            \n            const result = validator.validate(xmlData, validationOption);\n            if (result !== true) {\n              throw Error( `${result.err.msg}:${result.err.line}:${result.err.col}` )\n            }\n          }\n        const orderedObjParser = new OrderedObjParser(this.options);\n        orderedObjParser.addExternalEntities(this.externalEntities);\n        const orderedResult = orderedObjParser.parseXml(xmlData);\n        if(this.options.preserveOrder || orderedResult === undefined) return orderedResult;\n        else return prettify(orderedResult, this.options);\n    }\n\n    /**\n     * Add Entity which is not by default supported by this library\n     * @param {string} key \n     * @param {string} value \n     */\n    addEntity(key, value){\n        if(value.indexOf(\"&\") !== -1){\n            throw new Error(\"Entity value can't have '&'\")\n        }else if(key.indexOf(\"&\") !== -1 || key.indexOf(\";\") !== -1){\n            throw new Error(\"An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'\")\n        }else if(value === \"&\"){\n            throw new Error(\"An entity with value '&' is not permitted\");\n        }else{\n            this.externalEntities[key] = value;\n        }\n    }\n}\n\nmodule.exports = XMLParser;", "const EOL = \"\\n\";\n\n/**\n * \n * @param {array} jArray \n * @param {any} options \n * @returns \n */\nfunction toXml(jArray, options) {\n    let indentation = \"\";\n    if (options.format && options.indentBy.length > 0) {\n        indentation = EOL;\n    }\n    return arrToStr(jArray, options, \"\", indentation);\n}\n\nfunction arrToStr(arr, options, jPath, indentation) {\n    let xmlStr = \"\";\n    let isPreviousElementTag = false;\n\n    for (let i = 0; i < arr.length; i++) {\n        const tagObj = arr[i];\n        const tagName = propName(tagObj);\n        if(tagName === undefined) continue;\n\n        let newJPath = \"\";\n        if (jPath.length === 0) newJPath = tagName\n        else newJPath = `${jPath}.${tagName}`;\n\n        if (tagName === options.textNodeName) {\n            let tagText = tagObj[tagName];\n            if (!isStopNode(newJPath, options)) {\n                tagText = options.tagValueProcessor(tagName, tagText);\n                tagText = replaceEntitiesValue(tagText, options);\n            }\n            if (isPreviousElementTag) {\n                xmlStr += indentation;\n            }\n            xmlStr += tagText;\n            isPreviousElementTag = false;\n            continue;\n        } else if (tagName === options.cdataPropName) {\n            if (isPreviousElementTag) {\n                xmlStr += indentation;\n            }\n            xmlStr += `<![CDATA[${tagObj[tagName][0][options.textNodeName]}]]>`;\n            isPreviousElementTag = false;\n            continue;\n        } else if (tagName === options.commentPropName) {\n            xmlStr += indentation + `<!--${tagObj[tagName][0][options.textNodeName]}-->`;\n            isPreviousElementTag = true;\n            continue;\n        } else if (tagName[0] === \"?\") {\n            const attStr = attr_to_str(tagObj[\":@\"], options);\n            const tempInd = tagName === \"?xml\" ? \"\" : indentation;\n            let piTextNodeName = tagObj[tagName][0][options.textNodeName];\n            piTextNodeName = piTextNodeName.length !== 0 ? \" \" + piTextNodeName : \"\"; //remove extra spacing\n            xmlStr += tempInd + `<${tagName}${piTextNodeName}${attStr}?>`;\n            isPreviousElementTag = true;\n            continue;\n        }\n        let newIdentation = indentation;\n        if (newIdentation !== \"\") {\n            newIdentation += options.indentBy;\n        }\n        const attStr = attr_to_str(tagObj[\":@\"], options);\n        const tagStart = indentation + `<${tagName}${attStr}`;\n        const tagValue = arrToStr(tagObj[tagName], options, newJPath, newIdentation);\n        if (options.unpairedTags.indexOf(tagName) !== -1) {\n            if (options.suppressUnpairedNode) xmlStr += tagStart + \">\";\n            else xmlStr += tagStart + \"/>\";\n        } else if ((!tagValue || tagValue.length === 0) && options.suppressEmptyNode) {\n            xmlStr += tagStart + \"/>\";\n        } else if (tagValue && tagValue.endsWith(\">\")) {\n            xmlStr += tagStart + `>${tagValue}${indentation}</${tagName}>`;\n        } else {\n            xmlStr += tagStart + \">\";\n            if (tagValue && indentation !== \"\" && (tagValue.includes(\"/>\") || tagValue.includes(\"</\"))) {\n                xmlStr += indentation + options.indentBy + tagValue + indentation;\n            } else {\n                xmlStr += tagValue;\n            }\n            xmlStr += `</${tagName}>`;\n        }\n        isPreviousElementTag = true;\n    }\n\n    return xmlStr;\n}\n\nfunction propName(obj) {\n    const keys = Object.keys(obj);\n    for (let i = 0; i < keys.length; i++) {\n        const key = keys[i];\n        if(!obj.hasOwnProperty(key)) continue;\n        if (key !== \":@\") return key;\n    }\n}\n\nfunction attr_to_str(attrMap, options) {\n    let attrStr = \"\";\n    if (attrMap && !options.ignoreAttributes) {\n        for (let attr in attrMap) {\n            if(!attrMap.hasOwnProperty(attr)) continue;\n            let attrVal = options.attributeValueProcessor(attr, attrMap[attr]);\n            attrVal = replaceEntitiesValue(attrVal, options);\n            if (attrVal === true && options.suppressBooleanAttributes) {\n                attrStr += ` ${attr.substr(options.attributeNamePrefix.length)}`;\n            } else {\n                attrStr += ` ${attr.substr(options.attributeNamePrefix.length)}=\"${attrVal}\"`;\n            }\n        }\n    }\n    return attrStr;\n}\n\nfunction isStopNode(jPath, options) {\n    jPath = jPath.substr(0, jPath.length - options.textNodeName.length - 1);\n    let tagName = jPath.substr(jPath.lastIndexOf(\".\") + 1);\n    for (let index in options.stopNodes) {\n        if (options.stopNodes[index] === jPath || options.stopNodes[index] === \"*.\" + tagName) return true;\n    }\n    return false;\n}\n\nfunction replaceEntitiesValue(textValue, options) {\n    if (textValue && textValue.length > 0 && options.processEntities) {\n        for (let i = 0; i < options.entities.length; i++) {\n            const entity = options.entities[i];\n            textValue = textValue.replace(entity.regex, entity.val);\n        }\n    }\n    return textValue;\n}\nmodule.exports = toXml;\n", "'use strict';\n//parse Empty Node as self closing node\nconst buildFromOrderedJs = require('./orderedJs2Xml');\nconst getIgnoreAttributesFn = require('../ignoreAttributes')\n\nconst defaultOptions = {\n  attributeNamePrefix: '@_',\n  attributesGroupName: false,\n  textNodeName: '#text',\n  ignoreAttributes: true,\n  cdataPropName: false,\n  format: false,\n  indentBy: '  ',\n  suppressEmptyNode: false,\n  suppressUnpairedNode: true,\n  suppressBooleanAttributes: true,\n  tagValueProcessor: function(key, a) {\n    return a;\n  },\n  attributeValueProcessor: function(attrName, a) {\n    return a;\n  },\n  preserveOrder: false,\n  commentPropName: false,\n  unpairedTags: [],\n  entities: [\n    { regex: new RegExp(\"&\", \"g\"), val: \"&amp;\" },//it must be on top\n    { regex: new RegExp(\">\", \"g\"), val: \"&gt;\" },\n    { regex: new RegExp(\"<\", \"g\"), val: \"&lt;\" },\n    { regex: new RegExp(\"\\'\", \"g\"), val: \"&apos;\" },\n    { regex: new RegExp(\"\\\"\", \"g\"), val: \"&quot;\" }\n  ],\n  processEntities: true,\n  stopNodes: [],\n  // transformTagName: false,\n  // transformAttributeName: false,\n  oneListGroup: false\n};\n\nfunction Builder(options) {\n  this.options = Object.assign({}, defaultOptions, options);\n  if (this.options.ignoreAttributes === true || this.options.attributesGroupName) {\n    this.isAttribute = function(/*a*/) {\n      return false;\n    };\n  } else {\n    this.ignoreAttributesFn = getIgnoreAttributesFn(this.options.ignoreAttributes)\n    this.attrPrefixLen = this.options.attributeNamePrefix.length;\n    this.isAttribute = isAttribute;\n  }\n\n  this.processTextOrObjNode = processTextOrObjNode\n\n  if (this.options.format) {\n    this.indentate = indentate;\n    this.tagEndChar = '>\\n';\n    this.newLine = '\\n';\n  } else {\n    this.indentate = function() {\n      return '';\n    };\n    this.tagEndChar = '>';\n    this.newLine = '';\n  }\n}\n\nBuilder.prototype.build = function(jObj) {\n  if(this.options.preserveOrder){\n    return buildFromOrderedJs(jObj, this.options);\n  }else {\n    if(Array.isArray(jObj) && this.options.arrayNodeName && this.options.arrayNodeName.length > 1){\n      jObj = {\n        [this.options.arrayNodeName] : jObj\n      }\n    }\n    return this.j2x(jObj, 0, []).val;\n  }\n};\n\nBuilder.prototype.j2x = function(jObj, level, ajPath) {\n  let attrStr = '';\n  let val = '';\n  const jPath = ajPath.join('.')\n  for (let key in jObj) {\n    if(!Object.prototype.hasOwnProperty.call(jObj, key)) continue;\n    if (typeof jObj[key] === 'undefined') {\n      // supress undefined node only if it is not an attribute\n      if (this.isAttribute(key)) {\n        val += '';\n      }\n    } else if (jObj[key] === null) {\n      // null attribute should be ignored by the attribute list, but should not cause the tag closing\n      if (this.isAttribute(key)) {\n        val += '';\n      } else if (key === this.options.cdataPropName) {\n        val += '';\n      } else if (key[0] === '?') {\n        val += this.indentate(level) + '<' + key + '?' + this.tagEndChar;\n      } else {\n        val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n      }\n      // val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n    } else if (jObj[key] instanceof Date) {\n      val += this.buildTextValNode(jObj[key], key, '', level);\n    } else if (typeof jObj[key] !== 'object') {\n      //premitive type\n      const attr = this.isAttribute(key);\n      if (attr && !this.ignoreAttributesFn(attr, jPath)) {\n        attrStr += this.buildAttrPairStr(attr, '' + jObj[key]);\n      } else if (!attr) {\n        //tag value\n        if (key === this.options.textNodeName) {\n          let newval = this.options.tagValueProcessor(key, '' + jObj[key]);\n          val += this.replaceEntitiesValue(newval);\n        } else {\n          val += this.buildTextValNode(jObj[key], key, '', level);\n        }\n      }\n    } else if (Array.isArray(jObj[key])) {\n      //repeated nodes\n      const arrLen = jObj[key].length;\n      let listTagVal = \"\";\n      let listTagAttr = \"\";\n      for (let j = 0; j < arrLen; j++) {\n        const item = jObj[key][j];\n        if (typeof item === 'undefined') {\n          // supress undefined node\n        } else if (item === null) {\n          if(key[0] === \"?\") val += this.indentate(level) + '<' + key + '?' + this.tagEndChar;\n          else val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n          // val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n        } else if (typeof item === 'object') {\n          if(this.options.oneListGroup){\n            const result = this.j2x(item, level + 1, ajPath.concat(key));\n            listTagVal += result.val;\n            if (this.options.attributesGroupName && item.hasOwnProperty(this.options.attributesGroupName)) {\n              listTagAttr += result.attrStr\n            }\n          }else{\n            listTagVal += this.processTextOrObjNode(item, key, level, ajPath)\n          }\n        } else {\n          if (this.options.oneListGroup) {\n            let textValue = this.options.tagValueProcessor(key, item);\n            textValue = this.replaceEntitiesValue(textValue);\n            listTagVal += textValue;\n          } else {\n            listTagVal += this.buildTextValNode(item, key, '', level);\n          }\n        }\n      }\n      if(this.options.oneListGroup){\n        listTagVal = this.buildObjectNode(listTagVal, key, listTagAttr, level);\n      }\n      val += listTagVal;\n    } else {\n      //nested node\n      if (this.options.attributesGroupName && key === this.options.attributesGroupName) {\n        const Ks = Object.keys(jObj[key]);\n        const L = Ks.length;\n        for (let j = 0; j < L; j++) {\n          attrStr += this.buildAttrPairStr(Ks[j], '' + jObj[key][Ks[j]]);\n        }\n      } else {\n        val += this.processTextOrObjNode(jObj[key], key, level, ajPath)\n      }\n    }\n  }\n  return {attrStr: attrStr, val: val};\n};\n\nBuilder.prototype.buildAttrPairStr = function(attrName, val){\n  val = this.options.attributeValueProcessor(attrName, '' + val);\n  val = this.replaceEntitiesValue(val);\n  if (this.options.suppressBooleanAttributes && val === \"true\") {\n    return ' ' + attrName;\n  } else return ' ' + attrName + '=\"' + val + '\"';\n}\n\nfunction processTextOrObjNode (object, key, level, ajPath) {\n  const result = this.j2x(object, level + 1, ajPath.concat(key));\n  if (object[this.options.textNodeName] !== undefined && Object.keys(object).length === 1) {\n    return this.buildTextValNode(object[this.options.textNodeName], key, result.attrStr, level);\n  } else {\n    return this.buildObjectNode(result.val, key, result.attrStr, level);\n  }\n}\n\nBuilder.prototype.buildObjectNode = function(val, key, attrStr, level) {\n  if(val === \"\"){\n    if(key[0] === \"?\") return  this.indentate(level) + '<' + key + attrStr+ '?' + this.tagEndChar;\n    else {\n      return this.indentate(level) + '<' + key + attrStr + this.closeTag(key) + this.tagEndChar;\n    }\n  }else{\n\n    let tagEndExp = '</' + key + this.tagEndChar;\n    let piClosingChar = \"\";\n    \n    if(key[0] === \"?\") {\n      piClosingChar = \"?\";\n      tagEndExp = \"\";\n    }\n  \n    // attrStr is an empty string in case the attribute came as undefined or null\n    if ((attrStr || attrStr === '') && val.indexOf('<') === -1) {\n      return ( this.indentate(level) + '<' +  key + attrStr + piClosingChar + '>' + val + tagEndExp );\n    } else if (this.options.commentPropName !== false && key === this.options.commentPropName && piClosingChar.length === 0) {\n      return this.indentate(level) + `<!--${val}-->` + this.newLine;\n    }else {\n      return (\n        this.indentate(level) + '<' + key + attrStr + piClosingChar + this.tagEndChar +\n        val +\n        this.indentate(level) + tagEndExp    );\n    }\n  }\n}\n\nBuilder.prototype.closeTag = function(key){\n  let closeTag = \"\";\n  if(this.options.unpairedTags.indexOf(key) !== -1){ //unpaired\n    if(!this.options.suppressUnpairedNode) closeTag = \"/\"\n  }else if(this.options.suppressEmptyNode){ //empty\n    closeTag = \"/\";\n  }else{\n    closeTag = `></${key}`\n  }\n  return closeTag;\n}\n\nfunction buildEmptyObjNode(val, key, attrStr, level) {\n  if (val !== '') {\n    return this.buildObjectNode(val, key, attrStr, level);\n  } else {\n    if(key[0] === \"?\") return  this.indentate(level) + '<' + key + attrStr+ '?' + this.tagEndChar;\n    else {\n      return  this.indentate(level) + '<' + key + attrStr + '/' + this.tagEndChar;\n      // return this.buildTagStr(level,key, attrStr);\n    }\n  }\n}\n\nBuilder.prototype.buildTextValNode = function(val, key, attrStr, level) {\n  if (this.options.cdataPropName !== false && key === this.options.cdataPropName) {\n    return this.indentate(level) + `<![CDATA[${val}]]>` +  this.newLine;\n  }else if (this.options.commentPropName !== false && key === this.options.commentPropName) {\n    return this.indentate(level) + `<!--${val}-->` +  this.newLine;\n  }else if(key[0] === \"?\") {//PI tag\n    return  this.indentate(level) + '<' + key + attrStr+ '?' + this.tagEndChar; \n  }else{\n    let textValue = this.options.tagValueProcessor(key, val);\n    textValue = this.replaceEntitiesValue(textValue);\n  \n    if( textValue === ''){\n      return this.indentate(level) + '<' + key + attrStr + this.closeTag(key) + this.tagEndChar;\n    }else{\n      return this.indentate(level) + '<' + key + attrStr + '>' +\n         textValue +\n        '</' + key + this.tagEndChar;\n    }\n  }\n}\n\nBuilder.prototype.replaceEntitiesValue = function(textValue){\n  if(textValue && textValue.length > 0 && this.options.processEntities){\n    for (let i=0; i<this.options.entities.length; i++) {\n      const entity = this.options.entities[i];\n      textValue = textValue.replace(entity.regex, entity.val);\n    }\n  }\n  return textValue;\n}\n\nfunction indentate(level) {\n  return this.options.indentBy.repeat(level);\n}\n\nfunction isAttribute(name /*, options*/) {\n  if (name.startsWith(this.options.attributeNamePrefix) && name !== this.options.textNodeName) {\n    return name.substr(this.attrPrefixLen);\n  } else {\n    return false;\n  }\n}\n\nmodule.exports = Builder;\n", "'use strict';\n\nconst validator = require('./validator');\nconst XMLParser = require('./xmlparser/XMLParser');\nconst XMLBuilder = require('./xmlbuilder/json2xml');\n\nmodule.exports = {\n  XMLParser: XMLParser,\n  XMLValidator: validator,\n  XMLBuilder: XMLBuilder\n}", "// This loads all middlewares exposed on the middleware object and then starts\n// the invocation chain. The big idea is that we can add these to the middleware\n// export dynamically through wrangler, or we can potentially let users directly\n// add them as a sort of \"plugin\" system.\n\nimport ENTRY, { __INTERNAL_WRANGLER_MIDDLEWARE__ } from \"C:\\\\Users\\\\Kelvin\\\\Desktop\\\\repo outros\\\\Pessoal\\\\FinancialSecretary\\\\src\\\\back\\\\.wrangler\\\\tmp\\\\bundle-Dq0ngM\\\\middleware-insertion-facade.js\";\nimport { __facade_invoke__, __facade_register__, Dispatcher } from \"C:\\\\Users\\\\Kelvin\\\\Desktop\\\\repo outros\\\\Pessoal\\\\FinancialSecretary\\\\src\\\\back\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\common.ts\";\nimport type { WorkerEntrypointConstructor } from \"C:\\\\Users\\\\Kelvin\\\\Desktop\\\\repo outros\\\\Pessoal\\\\FinancialSecretary\\\\src\\\\back\\\\.wrangler\\\\tmp\\\\bundle-Dq0ngM\\\\middleware-insertion-facade.js\";\n\n// Preserve all the exports from the worker\nexport * from \"C:\\\\Users\\\\Kelvin\\\\Desktop\\\\repo outros\\\\Pessoal\\\\FinancialSecretary\\\\src\\\\back\\\\.wrangler\\\\tmp\\\\bundle-Dq0ngM\\\\middleware-insertion-facade.js\";\n\nclass __Facade_ScheduledController__ implements ScheduledController {\n\treadonly #noRetry: ScheduledController[\"noRetry\"];\n\n\tconstructor(\n\t\treadonly scheduledTime: number,\n\t\treadonly cron: string,\n\t\tnoRetry: ScheduledController[\"noRetry\"]\n\t) {\n\t\tthis.#noRetry = noRetry;\n\t}\n\n\tnoRetry() {\n\t\tif (!(this instanceof __Facade_ScheduledController__)) {\n\t\t\tthrow new TypeError(\"Illegal invocation\");\n\t\t}\n\t\t// Need to call native method immediately in case uncaught error thrown\n\t\tthis.#noRetry();\n\t}\n}\n\nfunction wrapExportedHandler(worker: ExportedHandler): ExportedHandler {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn worker;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\tconst fetchDispatcher: ExportedHandlerFetchHandler = function (\n\t\trequest,\n\t\tenv,\n\t\tctx\n\t) {\n\t\tif (worker.fetch === undefined) {\n\t\t\tthrow new Error(\"Handler does not export a fetch() function.\");\n\t\t}\n\t\treturn worker.fetch(request, env, ctx);\n\t};\n\n\treturn {\n\t\t...worker,\n\t\tfetch(request, env, ctx) {\n\t\t\tconst dispatcher: Dispatcher = function (type, init) {\n\t\t\t\tif (type === \"scheduled\" && worker.scheduled !== undefined) {\n\t\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\t\tDate.now(),\n\t\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t\t() => {}\n\t\t\t\t\t);\n\t\t\t\t\treturn worker.scheduled(controller, env, ctx);\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn __facade_invoke__(request, env, ctx, dispatcher, fetchDispatcher);\n\t\t},\n\t};\n}\n\nfunction wrapWorkerEntrypoint(\n\tklass: WorkerEntrypointConstructor\n): WorkerEntrypointConstructor {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn klass;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\t// `extend`ing `klass` here so other RPC methods remain callable\n\treturn class extends klass {\n\t\t#fetchDispatcher: ExportedHandlerFetchHandler<Record<string, unknown>> = (\n\t\t\trequest,\n\t\t\tenv,\n\t\t\tctx\n\t\t) => {\n\t\t\tthis.env = env;\n\t\t\tthis.ctx = ctx;\n\t\t\tif (super.fetch === undefined) {\n\t\t\t\tthrow new Error(\"Entrypoint class does not define a fetch() function.\");\n\t\t\t}\n\t\t\treturn super.fetch(request);\n\t\t};\n\n\t\t#dispatcher: Dispatcher = (type, init) => {\n\t\t\tif (type === \"scheduled\" && super.scheduled !== undefined) {\n\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\tDate.now(),\n\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t() => {}\n\t\t\t\t);\n\t\t\t\treturn super.scheduled(controller);\n\t\t\t}\n\t\t};\n\n\t\tfetch(request: Request<unknown, IncomingRequestCfProperties>) {\n\t\t\treturn __facade_invoke__(\n\t\t\t\trequest,\n\t\t\t\tthis.env,\n\t\t\t\tthis.ctx,\n\t\t\t\tthis.#dispatcher,\n\t\t\t\tthis.#fetchDispatcher\n\t\t\t);\n\t\t}\n\t};\n}\n\nlet WRAPPED_ENTRY: ExportedHandler | WorkerEntrypointConstructor | undefined;\nif (typeof ENTRY === \"object\") {\n\tWRAPPED_ENTRY = wrapExportedHandler(ENTRY);\n} else if (typeof ENTRY === \"function\") {\n\tWRAPPED_ENTRY = wrapWorkerEntrypoint(ENTRY);\n}\nexport default WRAPPED_ENTRY;\n", "\t\t\t\timport worker, * as OTHER_EXPORTS from \"C:\\\\Users\\\\Kelvin\\\\Desktop\\\\repo outros\\\\Pessoal\\\\FinancialSecretary\\\\src\\\\back\\\\src\\\\index.ts\";\n\t\t\t\timport * as __MIDDLEWARE_0__ from \"C:\\\\Users\\\\Kelvin\\\\Desktop\\\\repo outros\\\\Pessoal\\\\FinancialSecretary\\\\src\\\\back\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-ensure-req-body-drained.ts\";\nimport * as __MIDDLEWARE_1__ from \"C:\\\\Users\\\\Kelvin\\\\Desktop\\\\repo outros\\\\Pessoal\\\\FinancialSecretary\\\\src\\\\back\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-miniflare3-json-error.ts\";\n\n\t\t\t\texport * from \"C:\\\\Users\\\\Kelvin\\\\Desktop\\\\repo outros\\\\Pessoal\\\\FinancialSecretary\\\\src\\\\back\\\\src\\\\index.ts\";\n\t\t\t\tconst MIDDLEWARE_TEST_INJECT = \"__INJECT_FOR_TESTING_WRANGLER_MIDDLEWARE__\";\n\t\t\t\texport const __INTERNAL_WRANGLER_MIDDLEWARE__ = [\n\t\t\t\t\t\n\t\t\t\t\t__MIDDLEWARE_0__.default,__MIDDLEWARE_1__.default\n\t\t\t\t]\n\t\t\t\texport default worker;", "import { Router } from './lib/router';\nimport { errorMiddleware } from './middlewares/error.middleware';\nimport { corsMiddleware } from './middlewares/cors.middleware';\nimport { authMiddleware } from './middlewares/auth.middleware';\nimport { requireAuthMiddleware } from './middlewares/require_auth.middleware';\n\nimport { registerAuthController } from './controllers/auth.controller';\nimport { registerAccountController } from './controllers/account.controller';\nimport { registerAssetsController } from './controllers/assets.controller';\nimport { registerWatchlistController } from './controllers/watchlist.controller';\nimport { registerAlertsController } from './controllers/alerts.controller';\nimport { registerPreferencesController } from './controllers/preferences.controller';\nimport { registerCryptoController } from './controllers/crypto.controller';\nimport { registerDocsController } from './controllers/docs.controller';\nimport { registerNotificationsController } from './controllers/notifications.controller';\nimport { registerDashboardController } from './controllers/dashboard.controller';\nimport { registerNewsController } from './controllers/news.controller';\nimport { registerDigestController } from './controllers/digest.controller';\nimport { registerAdminController } from './controllers/admin.controller';\n\nimport type { Env } from './types/env';\nimport { handleScheduled } from './jobs/scheduler';\n\nfunction buildRouter(env: Env) {\n  const router = new Router();\n  \n  router.use(errorMiddleware);         \n  router.use(corsMiddleware);    \n  router.use(authMiddleware);\n  router.use(requireAuthMiddleware); \n\n  registerDocsController(router);\n  registerAuthController(router);\n  registerAccountController(router);\n  registerPreferencesController(router);\n  registerAssetsController(router);\n  registerWatchlistController(router);\n  registerAlertsController(router);\n  registerCryptoController(router);\n  registerNewsController(router);\n  registerDigestController(router);\n  registerNotificationsController(router);\n  registerDashboardController(router);\n  registerAdminController(router);\n\n  router.get('/', async () => new Response('FinancialSecretary Worker API'));\n\n  return router;\n}\n\nexport default {\n  async fetch(request: Request, env: Env, ctx: ExecutionContext) {\n    const router = buildRouter(env);\n    return router.handle(request, env);\n  },\n\n  async scheduled(event: any, env: Env, ctx: ExecutionContext) {\n    ctx.waitUntil(handleScheduled(event, env));\n  }\n};\n", "import type { Env, RequestContext } from '../types/env';\n\nexport type Handler = (ctx: RequestContext) => Promise<Response> | Response;\n\n// Eu recomendo permitir Response | Promise<Response> aqui tamb\u00E9m\nexport type Middleware = (\n  ctx: RequestContext,\n  next: () => Promise<Response>\n) => Promise<Response> | Response;\n\ntype Route = {\n  method: string;\n  regex: RegExp;\n  keys: string[];\n  handler: Handler;\n};\n\nfunction compilePath(path: string) {\n  const keys: string[] = [];\n\n  const normalized = path === '/' ? '' : path.replace(/\\/$/, '');\n\n  const escaped = normalized\n    .replace(/([.+*?=^!:${}()[\\]|\\/\\\\])/g, '\\\\$1')\n    .replace(/\\\\\\/:([A-Za-z0-9_]+)/g, (_m, key) => {\n      keys.push(String(key));\n      return '\\\\\\/([^\\\\/]+)';\n    });\n\n  const regex = new RegExp(`^${escaped || ''}\\\\/?$`);\n  return { regex, keys };\n}\n\ntype StoredMiddleware = {\n  fn: Middleware;\n  name: string;\n  addedAt?: string;\n};\n\nfunction describeValue(v: unknown) {\n  const t = typeof v;\n  if (v === null) return 'null';\n  if (t === 'function') return `function ${(v as Function).name || '(anonymous)'}`;\n  if (t !== 'object') return `${t}(${String(v)})`;\n\n  const obj = v as Record<string, unknown>;\n  const ctor = (obj as any)?.constructor?.name;\n  const keys = Object.keys(obj);\n  return `object${ctor ? `(${ctor})` : ''} keys=[${keys.slice(0, 8).join(', ')}${keys.length > 8 ? ', ...' : ''}]`;\n}\n\nexport class Router {\n  private routes: Route[] = [];\n  private middlewares: StoredMiddleware[] = [];\n\n  // aceita v\u00E1rios e tamb\u00E9m arrays (app.use([mw1, mw2]) ou app.use(mw1, mw2))\n  use(...mws: Array<Middleware | Middleware[]>) {\n    const flat = (mws as any[]).flat?.(Infinity) ?? ([] as any[]).concat(...(mws as any[]));\n\n    for (const mw of flat) {\n      if (typeof mw !== 'function') {\n        throw new TypeError(\n          `[Router.use] Middleware inv\u00E1lido: ${describeValue(mw)}\\n` +\n          `Dicas comuns: import errado (import * as X), array passado sem spread, factory chamada errado (mw()), ou router/objeto passado no lugar da fun\u00E7\u00E3o.`\n        );\n      }\n\n      const stack = new Error().stack;\n      // guarda s\u00F3 um pedacinho \u00FAtil do stack\n      const addedAt = stack ? stack.split('\\n').slice(2, 7).join('\\n') : undefined;\n\n      this.middlewares.push({\n        fn: mw,\n        name: mw.name || '(anonymous)',\n        addedAt,\n      });\n    }\n    return this;\n  }\n\n  get(path: string, handler: Handler) { return this.add('GET', path, handler); }\n  post(path: string, handler: Handler) { return this.add('POST', path, handler); }\n  put(path: string, handler: Handler) { return this.add('PUT', path, handler); }\n  patch(path: string, handler: Handler) { return this.add('PATCH', path, handler); }\n  delete(path: string, handler: Handler) { return this.add('DELETE', path, handler); }\n  options(path: string, handler: Handler) { return this.add('OPTIONS', path, handler); }\n\n  private add(method: string, path: string, handler: Handler) {\n    const { regex, keys } = compilePath(path);\n    this.routes.push({ method, regex, keys, handler });\n    return this;\n  }\n\n  async handle(req: Request, env: Env) {\n    const url = new URL(req.url);\n    const method = req.method.toUpperCase();\n    const pathname = url.pathname;\n\n    const route = this.routes.find((r) => r.method === method && r.regex.test(pathname));\n    if (!route) return new Response('Not found', { status: 404 });\n\n    const match = pathname.match(route.regex);\n    const params: Record<string, string> = {};\n    if (match) {\n      for (let i = 0; i < route.keys.length; i++) {\n        params[route.keys[i]] = decodeURIComponent(match[i + 1]);\n      }\n    }\n\n    const query: Record<string, string> = {};\n    url.searchParams.forEach((value, key) => { query[key] = value; });\n\n    const ctx: RequestContext = {\n      requestId: crypto.randomUUID(),\n      req,\n      env,\n      params,\n      query\n    };\n\n    let idx = -1;\n    const dispatch = async (i: number): Promise<Response> => {\n      if (i <= idx) throw new Error('Middleware chain error');\n      idx = i;\n\n      const stored = this.middlewares[i];\n      if (stored !== undefined) {\n        // redund\u00E2ncia: se algu\u00E9m empurrar lixo por fora (as any), a msg fica clara\n        if (typeof stored.fn !== 'function') {\n          throw new TypeError(\n            `[Router.dispatch] Middleware corrompido no \u00EDndice ${i}: ${describeValue(stored.fn)}`\n          );\n        }\n\n        try {\n          return await stored.fn(ctx, () => dispatch(i + 1));\n        } catch (e) {\n          const msg = e instanceof Error ? e.message : String(e);\n          throw new Error(\n            `Erro no middleware #${i} (${stored.name}).\\n` +\n            (stored.addedAt ? `Registrado em:\\n${stored.addedAt}\\n` : '') +\n            `Original: ${msg}`\n          );\n        }\n      }\n\n      return await Promise.resolve(route.handler(ctx));\n    };\n\n    return dispatch(0);\n  }\n}\n", "import type { Middleware } from '../lib/router';\nimport { AppError } from '../lib/errors';\nimport { HttpError, jsonResponse } from '../lib/http';\n\nexport const errorMiddleware: Middleware = async (ctx, next) => {\n  try {\n    return await next();\n  } catch (err) {\n    if (err instanceof AppError) {\n      return jsonResponse(\n        {\n          error: {\n            code: err.code,\n            message: err.message\n          }\n        },\n        err.status\n      );\n    }\n\n    if (err instanceof HttpError) {\n      return jsonResponse(\n        {\n          error: {\n            code: 'http_error',\n            message: err.message\n          }\n        },\n        err.status\n      );\n    }\n\n    const message = err instanceof Error ? err.message : String(err);\n    return jsonResponse(\n      {\n        error: {\n          code: 'internal_error',\n          message: 'Erro interno.'\n        },\n        debug: ctx.env.ENV === 'dev' ? message : undefined\n      },\n      500\n    );\n  }\n};\n", "export class AppError extends Error {\n  status: number;\n  code: string;\n  details?: unknown;\n\n  constructor(status: number, code: string, message: string, details?: unknown) {\n    super(message);\n    this.status = status;\n    this.code = code;\n    this.details = details;\n  }\n}\n\nexport class ValidationError extends AppError {\n  constructor(message: string, details?: unknown) {\n    super(400, 'VALIDATION_ERROR', message, details);\n  }\n}\n\nexport class BadRequestError extends ValidationError {\n  constructor(message: string = 'Bad request', details?: unknown) {\n    super(message, details);\n  }\n}\n\nexport class UnauthorizedError extends AppError {\n  constructor(message: string = 'Unauthorized') {\n    super(401, 'UNAUTHORIZED', message);\n  }\n}\n\nexport class ForbiddenError extends AppError {\n  constructor(message: string = 'Forbidden') {\n    super(403, 'FORBIDDEN', message);\n  }\n}\n\nexport class NotFoundError extends AppError {\n  constructor(message: string = 'Not found') {\n    super(404, 'NOT_FOUND', message);\n  }\n}\n\nexport class ConflictError extends AppError {\n  constructor(message: string = 'Conflict') {\n    super(409, 'CONFLICT', message);\n  }\n}\n", "import { z } from 'zod';\n\nexport type Json = Record<string, unknown> | unknown[] | string | number | boolean | null;\n\nexport function jsonResponse(body: Json, init: ResponseInit = {}) {\n  const headers = new Headers(init.headers);\n  if (!headers.has('content-type')) headers.set('content-type', 'application/json; charset=utf-8');\n  return new Response(JSON.stringify(body), { ...init, headers });\n}\n\nexport function errorResponse(status: number, message: string, details?: unknown) {\n  return jsonResponse({ success: false, message, details }, { status });\n}\n\nexport async function parseJson<T>(req: Request, schema: z.ZodSchema<T>) {\n  let data: unknown;\n  try {\n    data = await req.json();\n  } catch {\n    throw new HttpError(400, 'Invalid JSON body');\n  }\n\n  const parsed = schema.safeParse(data);\n  if (!parsed.success) {\n    throw new HttpError(400, 'Validation error', parsed.error.flatten());\n  }\n  return parsed.data;\n}\n\nexport function paginate(page: number, pageSize: number) {\n  const safePage = Number.isFinite(page) && page > 0 ? Math.floor(page) : 1;\n  const safeSize = Number.isFinite(pageSize) && pageSize > 0 && pageSize <= 100 ? Math.floor(pageSize) : 20;\n  const offset = (safePage - 1) * safeSize;\n  return { page: safePage, pageSize: safeSize, offset, limit: safeSize };\n}\n\nexport function paginatedResponse<T>(items: T[], total: number, page: number, pageSize: number) {\n  const pages = Math.ceil(total / pageSize);\n  return jsonResponse({\n    success: true,\n    data: items,\n    pagination: { page, pageSize, total, pages }\n  });\n}\n\nexport class HttpError extends Error {\n  status: number;\n  details?: unknown;\n\n  constructor(status: number, message: string, details?: unknown) {\n    super(message);\n    this.status = status;\n    this.details = details;\n  }\n}\n", "import type { Middleware } from '../lib/router';\n\nexport const corsMiddleware: Middleware = async (ctx, next) => {\n  const origin = ctx.req.headers.get('origin') || '*';\n\n  const headers = new Headers();\n  headers.set('access-control-allow-origin', origin);\n  headers.set('access-control-allow-methods', 'GET,POST,PUT,PATCH,DELETE,OPTIONS');\n  headers.set('access-control-allow-headers', 'content-type,authorization,x-admin-key');\n  headers.set('access-control-max-age', '86400');\n  headers.set('access-control-allow-credentials', 'true');\n\n  if (ctx.req.method.toUpperCase() === 'OPTIONS') {\n    return new Response(null, { status: 204, headers });\n  }\n\n  const res = await next();\n  const merged = new Headers(res.headers);\n  headers.forEach((v, k) => merged.set(k, v));\n\n  return new Response(res.body, {\n    status: res.status,\n    statusText: res.statusText,\n    headers: merged\n  });\n};\n", "import type { Middleware } from '../lib/router';\nimport { verifyAccessToken } from '../lib/jwt';\nimport { UserRepository } from '../repositories/user.repository';\n\nexport const authMiddleware: Middleware = async (ctx, next) => {\n  const auth = ctx.req.headers.get('authorization') || ctx.req.headers.get('Authorization') || '';\n  const token = auth.toLowerCase().startsWith('bearer ') ? auth.slice(7).trim() : null;\n\n  const secret = ctx.env.JWT_SECRET;\n  if (token && secret) {\n    try {\n      const issuer = ctx.env.JWT_ISSUER || 'financialsecretary';\n      const payload = await verifyAccessToken(token, secret, issuer);\n\n      const userId = typeof payload.sub === 'string' ? payload.sub : null;\n      if (userId) {\n        const userRepo = new UserRepository(ctx.env.DB);\n        const user = await userRepo.getById(userId);\n        if (user && !user.excluido_em) {\n          ctx.user = {\n            id: user.id,\n            perfil: user.perfil,\n            email: user.email,\n            nome: user.nome\n          };\n        }\n      }\n    } catch {\n      // token inv\u00E1lido -> segue como n\u00E3o autenticado\n    }\n  }\n\n  return await next();\n};\n", "import { SignJWT, jwtVerify } from 'jose';\n\nexport type JwtPayload = {\n  sub: string;\n  perfil: 'USUARIO' | 'ADMIN';\n  email: string;\n  nome: string;\n};\n\nexport async function signAccessToken(payload: JwtPayload, secret: string, issuer: string, expiresIn = '7d') {\n  const key = new TextEncoder().encode(secret);\n  const jwt = await new SignJWT(payload)\n    .setProtectedHeader({ alg: 'HS256' })\n    .setSubject(payload.sub)\n    .setIssuer(issuer)\n    .setIssuedAt()\n    .setExpirationTime(expiresIn)\n    .sign(key);\n  return jwt;\n}\n\nexport async function verifyAccessToken(token: string, secret: string, issuer: string) {\n  const key = new TextEncoder().encode(secret);\n  const { payload } = await jwtVerify(token, key, { issuer });\n  return payload as unknown as JwtPayload & { iat: number; exp: number; iss: string; sub: string };\n}\n", "export { compactDecrypt } from './jwe/compact/decrypt.js';\nexport { flattenedDecrypt } from './jwe/flattened/decrypt.js';\nexport { generalDecrypt } from './jwe/general/decrypt.js';\nexport { GeneralEncrypt } from './jwe/general/encrypt.js';\nexport { compactVerify } from './jws/compact/verify.js';\nexport { flattenedVerify } from './jws/flattened/verify.js';\nexport { generalVerify } from './jws/general/verify.js';\nexport { jwtVerify } from './jwt/verify.js';\nexport { jwtDecrypt } from './jwt/decrypt.js';\nexport { CompactEncrypt } from './jwe/compact/encrypt.js';\nexport { FlattenedEncrypt } from './jwe/flattened/encrypt.js';\nexport { CompactSign } from './jws/compact/sign.js';\nexport { FlattenedSign } from './jws/flattened/sign.js';\nexport { GeneralSign } from './jws/general/sign.js';\nexport { SignJWT } from './jwt/sign.js';\nexport { EncryptJWT } from './jwt/encrypt.js';\nexport { calculateJwkThumbprint, calculateJwkThumbprintUri } from './jwk/thumbprint.js';\nexport { EmbeddedJWK } from './jwk/embedded.js';\nexport { createLocalJWKSet } from './jwks/local.js';\nexport { createRemoteJWKSet, jwksCache, experimental_jwksCache } from './jwks/remote.js';\nexport { UnsecuredJWT } from './jwt/unsecured.js';\nexport { exportPKCS8, exportSPKI, exportJWK } from './key/export.js';\nexport { importSPKI, importPKCS8, importX509, importJWK } from './key/import.js';\nexport { decodeProtectedHeader } from './util/decode_protected_header.js';\nexport { decodeJwt } from './util/decode_jwt.js';\nexport * as errors from './util/errors.js';\nexport { generateKeyPair } from './key/generate_key_pair.js';\nexport { generateSecret } from './key/generate_secret.js';\nexport * as base64url from './util/base64url.js';\nexport { default as cryptoRuntime } from './util/runtime.js';\n", "import { encoder, decoder } from '../lib/buffer_utils.js';\nexport const encodeBase64 = (input) => {\n    let unencoded = input;\n    if (typeof unencoded === 'string') {\n        unencoded = encoder.encode(unencoded);\n    }\n    const CHUNK_SIZE = 0x8000;\n    const arr = [];\n    for (let i = 0; i < unencoded.length; i += CHUNK_SIZE) {\n        arr.push(String.fromCharCode.apply(null, unencoded.subarray(i, i + CHUNK_SIZE)));\n    }\n    return btoa(arr.join(''));\n};\nexport const encode = (input) => {\n    return encodeBase64(input).replace(/=/g, '').replace(/\\+/g, '-').replace(/\\//g, '_');\n};\nexport const decodeBase64 = (encoded) => {\n    const binary = atob(encoded);\n    const bytes = new Uint8Array(binary.length);\n    for (let i = 0; i < binary.length; i++) {\n        bytes[i] = binary.charCodeAt(i);\n    }\n    return bytes;\n};\nexport const decode = (input) => {\n    let encoded = input;\n    if (encoded instanceof Uint8Array) {\n        encoded = decoder.decode(encoded);\n    }\n    encoded = encoded.replace(/-/g, '+').replace(/_/g, '/').replace(/\\s/g, '');\n    try {\n        return decodeBase64(encoded);\n    }\n    catch {\n        throw new TypeError('The input to be decoded is not correctly encoded.');\n    }\n};\n", "import digest from '../runtime/digest.js';\nexport const encoder = new TextEncoder();\nexport const decoder = new TextDecoder();\nconst MAX_INT32 = 2 ** 32;\nexport function concat(...buffers) {\n    const size = buffers.reduce((acc, { length }) => acc + length, 0);\n    const buf = new Uint8Array(size);\n    let i = 0;\n    for (const buffer of buffers) {\n        buf.set(buffer, i);\n        i += buffer.length;\n    }\n    return buf;\n}\nexport function p2s(alg, p2sInput) {\n    return concat(encoder.encode(alg), new Uint8Array([0]), p2sInput);\n}\nfunction writeUInt32BE(buf, value, offset) {\n    if (value < 0 || value >= MAX_INT32) {\n        throw new RangeError(`value must be >= 0 and <= ${MAX_INT32 - 1}. Received ${value}`);\n    }\n    buf.set([value >>> 24, value >>> 16, value >>> 8, value & 0xff], offset);\n}\nexport function uint64be(value) {\n    const high = Math.floor(value / MAX_INT32);\n    const low = value % MAX_INT32;\n    const buf = new Uint8Array(8);\n    writeUInt32BE(buf, high, 0);\n    writeUInt32BE(buf, low, 4);\n    return buf;\n}\nexport function uint32be(value) {\n    const buf = new Uint8Array(4);\n    writeUInt32BE(buf, value);\n    return buf;\n}\nexport function lengthAndInput(input) {\n    return concat(uint32be(input.length), input);\n}\nexport async function concatKdf(secret, bits, value) {\n    const iterations = Math.ceil((bits >> 3) / 32);\n    const res = new Uint8Array(iterations * 32);\n    for (let iter = 0; iter < iterations; iter++) {\n        const buf = new Uint8Array(4 + secret.length + value.length);\n        buf.set(uint32be(iter + 1));\n        buf.set(secret, 4);\n        buf.set(value, 4 + secret.length);\n        res.set(await digest('sha256', buf), iter * 32);\n    }\n    return res.slice(0, bits >> 3);\n}\n", "export default crypto;\nexport const isCryptoKey = (key) => key instanceof CryptoKey;\n", "export class JOSEError extends Error {\n    constructor(message, options) {\n        super(message, options);\n        this.code = 'ERR_JOSE_GENERIC';\n        this.name = this.constructor.name;\n        Error.captureStackTrace?.(this, this.constructor);\n    }\n}\nJOSEError.code = 'ERR_JOSE_GENERIC';\nexport class JWTClaimValidationFailed extends JOSEError {\n    constructor(message, payload, claim = 'unspecified', reason = 'unspecified') {\n        super(message, { cause: { claim, reason, payload } });\n        this.code = 'ERR_JWT_CLAIM_VALIDATION_FAILED';\n        this.claim = claim;\n        this.reason = reason;\n        this.payload = payload;\n    }\n}\nJWTClaimValidationFailed.code = 'ERR_JWT_CLAIM_VALIDATION_FAILED';\nexport class JWTExpired extends JOSEError {\n    constructor(message, payload, claim = 'unspecified', reason = 'unspecified') {\n        super(message, { cause: { claim, reason, payload } });\n        this.code = 'ERR_JWT_EXPIRED';\n        this.claim = claim;\n        this.reason = reason;\n        this.payload = payload;\n    }\n}\nJWTExpired.code = 'ERR_JWT_EXPIRED';\nexport class JOSEAlgNotAllowed extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JOSE_ALG_NOT_ALLOWED';\n    }\n}\nJOSEAlgNotAllowed.code = 'ERR_JOSE_ALG_NOT_ALLOWED';\nexport class JOSENotSupported extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JOSE_NOT_SUPPORTED';\n    }\n}\nJOSENotSupported.code = 'ERR_JOSE_NOT_SUPPORTED';\nexport class JWEDecryptionFailed extends JOSEError {\n    constructor(message = 'decryption operation failed', options) {\n        super(message, options);\n        this.code = 'ERR_JWE_DECRYPTION_FAILED';\n    }\n}\nJWEDecryptionFailed.code = 'ERR_JWE_DECRYPTION_FAILED';\nexport class JWEInvalid extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JWE_INVALID';\n    }\n}\nJWEInvalid.code = 'ERR_JWE_INVALID';\nexport class JWSInvalid extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JWS_INVALID';\n    }\n}\nJWSInvalid.code = 'ERR_JWS_INVALID';\nexport class JWTInvalid extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JWT_INVALID';\n    }\n}\nJWTInvalid.code = 'ERR_JWT_INVALID';\nexport class JWKInvalid extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JWK_INVALID';\n    }\n}\nJWKInvalid.code = 'ERR_JWK_INVALID';\nexport class JWKSInvalid extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JWKS_INVALID';\n    }\n}\nJWKSInvalid.code = 'ERR_JWKS_INVALID';\nexport class JWKSNoMatchingKey extends JOSEError {\n    constructor(message = 'no applicable key found in the JSON Web Key Set', options) {\n        super(message, options);\n        this.code = 'ERR_JWKS_NO_MATCHING_KEY';\n    }\n}\nJWKSNoMatchingKey.code = 'ERR_JWKS_NO_MATCHING_KEY';\nexport class JWKSMultipleMatchingKeys extends JOSEError {\n    constructor(message = 'multiple matching keys found in the JSON Web Key Set', options) {\n        super(message, options);\n        this.code = 'ERR_JWKS_MULTIPLE_MATCHING_KEYS';\n    }\n}\nSymbol.asyncIterator;\nJWKSMultipleMatchingKeys.code = 'ERR_JWKS_MULTIPLE_MATCHING_KEYS';\nexport class JWKSTimeout extends JOSEError {\n    constructor(message = 'request timed out', options) {\n        super(message, options);\n        this.code = 'ERR_JWKS_TIMEOUT';\n    }\n}\nJWKSTimeout.code = 'ERR_JWKS_TIMEOUT';\nexport class JWSSignatureVerificationFailed extends JOSEError {\n    constructor(message = 'signature verification failed', options) {\n        super(message, options);\n        this.code = 'ERR_JWS_SIGNATURE_VERIFICATION_FAILED';\n    }\n}\nJWSSignatureVerificationFailed.code = 'ERR_JWS_SIGNATURE_VERIFICATION_FAILED';\n", "function unusable(name, prop = 'algorithm.name') {\n    return new TypeError(`CryptoKey does not support this operation, its ${prop} must be ${name}`);\n}\nfunction isAlgorithm(algorithm, name) {\n    return algorithm.name === name;\n}\nfunction getHashLength(hash) {\n    return parseInt(hash.name.slice(4), 10);\n}\nfunction getNamedCurve(alg) {\n    switch (alg) {\n        case 'ES256':\n            return 'P-256';\n        case 'ES384':\n            return 'P-384';\n        case 'ES512':\n            return 'P-521';\n        default:\n            throw new Error('unreachable');\n    }\n}\nfunction checkUsage(key, usages) {\n    if (usages.length && !usages.some((expected) => key.usages.includes(expected))) {\n        let msg = 'CryptoKey does not support this operation, its usages must include ';\n        if (usages.length > 2) {\n            const last = usages.pop();\n            msg += `one of ${usages.join(', ')}, or ${last}.`;\n        }\n        else if (usages.length === 2) {\n            msg += `one of ${usages[0]} or ${usages[1]}.`;\n        }\n        else {\n            msg += `${usages[0]}.`;\n        }\n        throw new TypeError(msg);\n    }\n}\nexport function checkSigCryptoKey(key, alg, ...usages) {\n    switch (alg) {\n        case 'HS256':\n        case 'HS384':\n        case 'HS512': {\n            if (!isAlgorithm(key.algorithm, 'HMAC'))\n                throw unusable('HMAC');\n            const expected = parseInt(alg.slice(2), 10);\n            const actual = getHashLength(key.algorithm.hash);\n            if (actual !== expected)\n                throw unusable(`SHA-${expected}`, 'algorithm.hash');\n            break;\n        }\n        case 'RS256':\n        case 'RS384':\n        case 'RS512': {\n            if (!isAlgorithm(key.algorithm, 'RSASSA-PKCS1-v1_5'))\n                throw unusable('RSASSA-PKCS1-v1_5');\n            const expected = parseInt(alg.slice(2), 10);\n            const actual = getHashLength(key.algorithm.hash);\n            if (actual !== expected)\n                throw unusable(`SHA-${expected}`, 'algorithm.hash');\n            break;\n        }\n        case 'PS256':\n        case 'PS384':\n        case 'PS512': {\n            if (!isAlgorithm(key.algorithm, 'RSA-PSS'))\n                throw unusable('RSA-PSS');\n            const expected = parseInt(alg.slice(2), 10);\n            const actual = getHashLength(key.algorithm.hash);\n            if (actual !== expected)\n                throw unusable(`SHA-${expected}`, 'algorithm.hash');\n            break;\n        }\n        case 'EdDSA': {\n            if (key.algorithm.name !== 'Ed25519' && key.algorithm.name !== 'Ed448') {\n                throw unusable('Ed25519 or Ed448');\n            }\n            break;\n        }\n        case 'Ed25519': {\n            if (!isAlgorithm(key.algorithm, 'Ed25519'))\n                throw unusable('Ed25519');\n            break;\n        }\n        case 'ES256':\n        case 'ES384':\n        case 'ES512': {\n            if (!isAlgorithm(key.algorithm, 'ECDSA'))\n                throw unusable('ECDSA');\n            const expected = getNamedCurve(alg);\n            const actual = key.algorithm.namedCurve;\n            if (actual !== expected)\n                throw unusable(expected, 'algorithm.namedCurve');\n            break;\n        }\n        default:\n            throw new TypeError('CryptoKey does not support this operation');\n    }\n    checkUsage(key, usages);\n}\nexport function checkEncCryptoKey(key, alg, ...usages) {\n    switch (alg) {\n        case 'A128GCM':\n        case 'A192GCM':\n        case 'A256GCM': {\n            if (!isAlgorithm(key.algorithm, 'AES-GCM'))\n                throw unusable('AES-GCM');\n            const expected = parseInt(alg.slice(1, 4), 10);\n            const actual = key.algorithm.length;\n            if (actual !== expected)\n                throw unusable(expected, 'algorithm.length');\n            break;\n        }\n        case 'A128KW':\n        case 'A192KW':\n        case 'A256KW': {\n            if (!isAlgorithm(key.algorithm, 'AES-KW'))\n                throw unusable('AES-KW');\n            const expected = parseInt(alg.slice(1, 4), 10);\n            const actual = key.algorithm.length;\n            if (actual !== expected)\n                throw unusable(expected, 'algorithm.length');\n            break;\n        }\n        case 'ECDH': {\n            switch (key.algorithm.name) {\n                case 'ECDH':\n                case 'X25519':\n                case 'X448':\n                    break;\n                default:\n                    throw unusable('ECDH, X25519, or X448');\n            }\n            break;\n        }\n        case 'PBES2-HS256+A128KW':\n        case 'PBES2-HS384+A192KW':\n        case 'PBES2-HS512+A256KW':\n            if (!isAlgorithm(key.algorithm, 'PBKDF2'))\n                throw unusable('PBKDF2');\n            break;\n        case 'RSA-OAEP':\n        case 'RSA-OAEP-256':\n        case 'RSA-OAEP-384':\n        case 'RSA-OAEP-512': {\n            if (!isAlgorithm(key.algorithm, 'RSA-OAEP'))\n                throw unusable('RSA-OAEP');\n            const expected = parseInt(alg.slice(9), 10) || 1;\n            const actual = getHashLength(key.algorithm.hash);\n            if (actual !== expected)\n                throw unusable(`SHA-${expected}`, 'algorithm.hash');\n            break;\n        }\n        default:\n            throw new TypeError('CryptoKey does not support this operation');\n    }\n    checkUsage(key, usages);\n}\n", "function message(msg, actual, ...types) {\n    types = types.filter(Boolean);\n    if (types.length > 2) {\n        const last = types.pop();\n        msg += `one of type ${types.join(', ')}, or ${last}.`;\n    }\n    else if (types.length === 2) {\n        msg += `one of type ${types[0]} or ${types[1]}.`;\n    }\n    else {\n        msg += `of type ${types[0]}.`;\n    }\n    if (actual == null) {\n        msg += ` Received ${actual}`;\n    }\n    else if (typeof actual === 'function' && actual.name) {\n        msg += ` Received function ${actual.name}`;\n    }\n    else if (typeof actual === 'object' && actual != null) {\n        if (actual.constructor?.name) {\n            msg += ` Received an instance of ${actual.constructor.name}`;\n        }\n    }\n    return msg;\n}\nexport default (actual, ...types) => {\n    return message('Key must be ', actual, ...types);\n};\nexport function withAlg(alg, actual, ...types) {\n    return message(`Key for the ${alg} algorithm must be `, actual, ...types);\n}\n", "import { isCryptoKey } from './webcrypto.js';\nexport default (key) => {\n    if (isCryptoKey(key)) {\n        return true;\n    }\n    return key?.[Symbol.toStringTag] === 'KeyObject';\n};\nexport const types = ['CryptoKey'];\n", "const isDisjoint = (...headers) => {\n    const sources = headers.filter(Boolean);\n    if (sources.length === 0 || sources.length === 1) {\n        return true;\n    }\n    let acc;\n    for (const header of sources) {\n        const parameters = Object.keys(header);\n        if (!acc || acc.size === 0) {\n            acc = new Set(parameters);\n            continue;\n        }\n        for (const parameter of parameters) {\n            if (acc.has(parameter)) {\n                return false;\n            }\n            acc.add(parameter);\n        }\n    }\n    return true;\n};\nexport default isDisjoint;\n", "function isObjectLike(value) {\n    return typeof value === 'object' && value !== null;\n}\nexport default function isObject(input) {\n    if (!isObjectLike(input) || Object.prototype.toString.call(input) !== '[object Object]') {\n        return false;\n    }\n    if (Object.getPrototypeOf(input) === null) {\n        return true;\n    }\n    let proto = input;\n    while (Object.getPrototypeOf(proto) !== null) {\n        proto = Object.getPrototypeOf(proto);\n    }\n    return Object.getPrototypeOf(input) === proto;\n}\n", "export default (alg, key) => {\n    if (alg.startsWith('RS') || alg.startsWith('PS')) {\n        const { modulusLength } = key.algorithm;\n        if (typeof modulusLength !== 'number' || modulusLength < 2048) {\n            throw new TypeError(`${alg} requires key modulusLength to be 2048 bits or larger`);\n        }\n    }\n};\n", "import { isJWK } from '../lib/is_jwk.js';\nimport { decode } from './base64url.js';\nimport importJWK from './jwk_to_key.js';\nconst exportKeyValue = (k) => decode(k);\nlet privCache;\nlet pubCache;\nconst isKeyObject = (key) => {\n    return key?.[Symbol.toStringTag] === 'KeyObject';\n};\nconst importAndCache = async (cache, key, jwk, alg, freeze = false) => {\n    let cached = cache.get(key);\n    if (cached?.[alg]) {\n        return cached[alg];\n    }\n    const cryptoKey = await importJWK({ ...jwk, alg });\n    if (freeze)\n        Object.freeze(key);\n    if (!cached) {\n        cache.set(key, { [alg]: cryptoKey });\n    }\n    else {\n        cached[alg] = cryptoKey;\n    }\n    return cryptoKey;\n};\nconst normalizePublicKey = (key, alg) => {\n    if (isKeyObject(key)) {\n        let jwk = key.export({ format: 'jwk' });\n        delete jwk.d;\n        delete jwk.dp;\n        delete jwk.dq;\n        delete jwk.p;\n        delete jwk.q;\n        delete jwk.qi;\n        if (jwk.k) {\n            return exportKeyValue(jwk.k);\n        }\n        pubCache || (pubCache = new WeakMap());\n        return importAndCache(pubCache, key, jwk, alg);\n    }\n    if (isJWK(key)) {\n        if (key.k)\n            return decode(key.k);\n        pubCache || (pubCache = new WeakMap());\n        const cryptoKey = importAndCache(pubCache, key, key, alg, true);\n        return cryptoKey;\n    }\n    return key;\n};\nconst normalizePrivateKey = (key, alg) => {\n    if (isKeyObject(key)) {\n        let jwk = key.export({ format: 'jwk' });\n        if (jwk.k) {\n            return exportKeyValue(jwk.k);\n        }\n        privCache || (privCache = new WeakMap());\n        return importAndCache(privCache, key, jwk, alg);\n    }\n    if (isJWK(key)) {\n        if (key.k)\n            return decode(key.k);\n        privCache || (privCache = new WeakMap());\n        const cryptoKey = importAndCache(privCache, key, key, alg, true);\n        return cryptoKey;\n    }\n    return key;\n};\nexport default { normalizePublicKey, normalizePrivateKey };\n", "import isObject from './is_object.js';\nexport function isJWK(key) {\n    return isObject(key) && typeof key.kty === 'string';\n}\nexport function isPrivateJWK(key) {\n    return key.kty !== 'oct' && typeof key.d === 'string';\n}\nexport function isPublicJWK(key) {\n    return key.kty !== 'oct' && typeof key.d === 'undefined';\n}\nexport function isSecretJWK(key) {\n    return isJWK(key) && key.kty === 'oct' && typeof key.k === 'string';\n}\n", "import crypto from './webcrypto.js';\nimport { JOSENotSupported } from '../util/errors.js';\nfunction subtleMapping(jwk) {\n    let algorithm;\n    let keyUsages;\n    switch (jwk.kty) {\n        case 'RSA': {\n            switch (jwk.alg) {\n                case 'PS256':\n                case 'PS384':\n                case 'PS512':\n                    algorithm = { name: 'RSA-PSS', hash: `SHA-${jwk.alg.slice(-3)}` };\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\n                    break;\n                case 'RS256':\n                case 'RS384':\n                case 'RS512':\n                    algorithm = { name: 'RSASSA-PKCS1-v1_5', hash: `SHA-${jwk.alg.slice(-3)}` };\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\n                    break;\n                case 'RSA-OAEP':\n                case 'RSA-OAEP-256':\n                case 'RSA-OAEP-384':\n                case 'RSA-OAEP-512':\n                    algorithm = {\n                        name: 'RSA-OAEP',\n                        hash: `SHA-${parseInt(jwk.alg.slice(-3), 10) || 1}`,\n                    };\n                    keyUsages = jwk.d ? ['decrypt', 'unwrapKey'] : ['encrypt', 'wrapKey'];\n                    break;\n                default:\n                    throw new JOSENotSupported('Invalid or unsupported JWK \"alg\" (Algorithm) Parameter value');\n            }\n            break;\n        }\n        case 'EC': {\n            switch (jwk.alg) {\n                case 'ES256':\n                    algorithm = { name: 'ECDSA', namedCurve: 'P-256' };\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\n                    break;\n                case 'ES384':\n                    algorithm = { name: 'ECDSA', namedCurve: 'P-384' };\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\n                    break;\n                case 'ES512':\n                    algorithm = { name: 'ECDSA', namedCurve: 'P-521' };\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\n                    break;\n                case 'ECDH-ES':\n                case 'ECDH-ES+A128KW':\n                case 'ECDH-ES+A192KW':\n                case 'ECDH-ES+A256KW':\n                    algorithm = { name: 'ECDH', namedCurve: jwk.crv };\n                    keyUsages = jwk.d ? ['deriveBits'] : [];\n                    break;\n                default:\n                    throw new JOSENotSupported('Invalid or unsupported JWK \"alg\" (Algorithm) Parameter value');\n            }\n            break;\n        }\n        case 'OKP': {\n            switch (jwk.alg) {\n                case 'Ed25519':\n                    algorithm = { name: 'Ed25519' };\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\n                    break;\n                case 'EdDSA':\n                    algorithm = { name: jwk.crv };\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\n                    break;\n                case 'ECDH-ES':\n                case 'ECDH-ES+A128KW':\n                case 'ECDH-ES+A192KW':\n                case 'ECDH-ES+A256KW':\n                    algorithm = { name: jwk.crv };\n                    keyUsages = jwk.d ? ['deriveBits'] : [];\n                    break;\n                default:\n                    throw new JOSENotSupported('Invalid or unsupported JWK \"alg\" (Algorithm) Parameter value');\n            }\n            break;\n        }\n        default:\n            throw new JOSENotSupported('Invalid or unsupported JWK \"kty\" (Key Type) Parameter value');\n    }\n    return { algorithm, keyUsages };\n}\nconst parse = async (jwk) => {\n    if (!jwk.alg) {\n        throw new TypeError('\"alg\" argument is required when \"jwk.alg\" is not present');\n    }\n    const { algorithm, keyUsages } = subtleMapping(jwk);\n    const rest = [\n        algorithm,\n        jwk.ext ?? false,\n        jwk.key_ops ?? keyUsages,\n    ];\n    const keyData = { ...jwk };\n    delete keyData.alg;\n    delete keyData.use;\n    return crypto.subtle.importKey('jwk', keyData, ...rest);\n};\nexport default parse;\n", "import { decode as decodeBase64URL } from '../runtime/base64url.js';\nimport { fromSPKI, fromPKCS8, fromX509 } from '../runtime/asn1.js';\nimport asKeyObject from '../runtime/jwk_to_key.js';\nimport { JOSENotSupported } from '../util/errors.js';\nimport isObject from '../lib/is_object.js';\nexport async function importSPKI(spki, alg, options) {\n    if (typeof spki !== 'string' || spki.indexOf('-----BEGIN PUBLIC KEY-----') !== 0) {\n        throw new TypeError('\"spki\" must be SPKI formatted string');\n    }\n    return fromSPKI(spki, alg, options);\n}\nexport async function importX509(x509, alg, options) {\n    if (typeof x509 !== 'string' || x509.indexOf('-----BEGIN CERTIFICATE-----') !== 0) {\n        throw new TypeError('\"x509\" must be X.509 formatted string');\n    }\n    return fromX509(x509, alg, options);\n}\nexport async function importPKCS8(pkcs8, alg, options) {\n    if (typeof pkcs8 !== 'string' || pkcs8.indexOf('-----BEGIN PRIVATE KEY-----') !== 0) {\n        throw new TypeError('\"pkcs8\" must be PKCS#8 formatted string');\n    }\n    return fromPKCS8(pkcs8, alg, options);\n}\nexport async function importJWK(jwk, alg) {\n    if (!isObject(jwk)) {\n        throw new TypeError('JWK must be an object');\n    }\n    alg || (alg = jwk.alg);\n    switch (jwk.kty) {\n        case 'oct':\n            if (typeof jwk.k !== 'string' || !jwk.k) {\n                throw new TypeError('missing \"k\" (Key Value) Parameter value');\n            }\n            return decodeBase64URL(jwk.k);\n        case 'RSA':\n            if ('oth' in jwk && jwk.oth !== undefined) {\n                throw new JOSENotSupported('RSA JWK \"oth\" (Other Primes Info) Parameter value is not supported');\n            }\n        case 'EC':\n        case 'OKP':\n            return asKeyObject({ ...jwk, alg });\n        default:\n            throw new JOSENotSupported('Unsupported \"kty\" (Key Type) Parameter value');\n    }\n}\n", "import { withAlg as invalidKeyInput } from './invalid_key_input.js';\nimport isKeyLike, { types } from '../runtime/is_key_like.js';\nimport * as jwk from './is_jwk.js';\nconst tag = (key) => key?.[Symbol.toStringTag];\nconst jwkMatchesOp = (alg, key, usage) => {\n    if (key.use !== undefined && key.use !== 'sig') {\n        throw new TypeError('Invalid key for this operation, when present its use must be sig');\n    }\n    if (key.key_ops !== undefined && key.key_ops.includes?.(usage) !== true) {\n        throw new TypeError(`Invalid key for this operation, when present its key_ops must include ${usage}`);\n    }\n    if (key.alg !== undefined && key.alg !== alg) {\n        throw new TypeError(`Invalid key for this operation, when present its alg must be ${alg}`);\n    }\n    return true;\n};\nconst symmetricTypeCheck = (alg, key, usage, allowJwk) => {\n    if (key instanceof Uint8Array)\n        return;\n    if (allowJwk && jwk.isJWK(key)) {\n        if (jwk.isSecretJWK(key) && jwkMatchesOp(alg, key, usage))\n            return;\n        throw new TypeError(`JSON Web Key for symmetric algorithms must have JWK \"kty\" (Key Type) equal to \"oct\" and the JWK \"k\" (Key Value) present`);\n    }\n    if (!isKeyLike(key)) {\n        throw new TypeError(invalidKeyInput(alg, key, ...types, 'Uint8Array', allowJwk ? 'JSON Web Key' : null));\n    }\n    if (key.type !== 'secret') {\n        throw new TypeError(`${tag(key)} instances for symmetric algorithms must be of type \"secret\"`);\n    }\n};\nconst asymmetricTypeCheck = (alg, key, usage, allowJwk) => {\n    if (allowJwk && jwk.isJWK(key)) {\n        switch (usage) {\n            case 'sign':\n                if (jwk.isPrivateJWK(key) && jwkMatchesOp(alg, key, usage))\n                    return;\n                throw new TypeError(`JSON Web Key for this operation be a private JWK`);\n            case 'verify':\n                if (jwk.isPublicJWK(key) && jwkMatchesOp(alg, key, usage))\n                    return;\n                throw new TypeError(`JSON Web Key for this operation be a public JWK`);\n        }\n    }\n    if (!isKeyLike(key)) {\n        throw new TypeError(invalidKeyInput(alg, key, ...types, allowJwk ? 'JSON Web Key' : null));\n    }\n    if (key.type === 'secret') {\n        throw new TypeError(`${tag(key)} instances for asymmetric algorithms must not be of type \"secret\"`);\n    }\n    if (usage === 'sign' && key.type === 'public') {\n        throw new TypeError(`${tag(key)} instances for asymmetric algorithm signing must be of type \"private\"`);\n    }\n    if (usage === 'decrypt' && key.type === 'public') {\n        throw new TypeError(`${tag(key)} instances for asymmetric algorithm decryption must be of type \"private\"`);\n    }\n    if (key.algorithm && usage === 'verify' && key.type === 'private') {\n        throw new TypeError(`${tag(key)} instances for asymmetric algorithm verifying must be of type \"public\"`);\n    }\n    if (key.algorithm && usage === 'encrypt' && key.type === 'private') {\n        throw new TypeError(`${tag(key)} instances for asymmetric algorithm encryption must be of type \"public\"`);\n    }\n};\nfunction checkKeyType(allowJwk, alg, key, usage) {\n    const symmetric = alg.startsWith('HS') ||\n        alg === 'dir' ||\n        alg.startsWith('PBES2') ||\n        /^A\\d{3}(?:GCM)?KW$/.test(alg);\n    if (symmetric) {\n        symmetricTypeCheck(alg, key, usage, allowJwk);\n    }\n    else {\n        asymmetricTypeCheck(alg, key, usage, allowJwk);\n    }\n}\nexport default checkKeyType.bind(undefined, false);\nexport const checkKeyTypeWithJwk = checkKeyType.bind(undefined, true);\n", "import { JOSENotSupported } from '../util/errors.js';\nfunction validateCrit(Err, recognizedDefault, recognizedOption, protectedHeader, joseHeader) {\n    if (joseHeader.crit !== undefined && protectedHeader?.crit === undefined) {\n        throw new Err('\"crit\" (Critical) Header Parameter MUST be integrity protected');\n    }\n    if (!protectedHeader || protectedHeader.crit === undefined) {\n        return new Set();\n    }\n    if (!Array.isArray(protectedHeader.crit) ||\n        protectedHeader.crit.length === 0 ||\n        protectedHeader.crit.some((input) => typeof input !== 'string' || input.length === 0)) {\n        throw new Err('\"crit\" (Critical) Header Parameter MUST be an array of non-empty strings when present');\n    }\n    let recognized;\n    if (recognizedOption !== undefined) {\n        recognized = new Map([...Object.entries(recognizedOption), ...recognizedDefault.entries()]);\n    }\n    else {\n        recognized = recognizedDefault;\n    }\n    for (const parameter of protectedHeader.crit) {\n        if (!recognized.has(parameter)) {\n            throw new JOSENotSupported(`Extension Header Parameter \"${parameter}\" is not recognized`);\n        }\n        if (joseHeader[parameter] === undefined) {\n            throw new Err(`Extension Header Parameter \"${parameter}\" is missing`);\n        }\n        if (recognized.get(parameter) && protectedHeader[parameter] === undefined) {\n            throw new Err(`Extension Header Parameter \"${parameter}\" MUST be integrity protected`);\n        }\n    }\n    return new Set(protectedHeader.crit);\n}\nexport default validateCrit;\n", "const validateAlgorithms = (option, algorithms) => {\n    if (algorithms !== undefined &&\n        (!Array.isArray(algorithms) || algorithms.some((s) => typeof s !== 'string'))) {\n        throw new TypeError(`\"${option}\" option must be an array of strings`);\n    }\n    if (!algorithms) {\n        return undefined;\n    }\n    return new Set(algorithms);\n};\nexport default validateAlgorithms;\n", "import { flattenedVerify } from '../flattened/verify.js';\nimport { JWSInvalid } from '../../util/errors.js';\nimport { decoder } from '../../lib/buffer_utils.js';\nexport async function compactVerify(jws, key, options) {\n    if (jws instanceof Uint8Array) {\n        jws = decoder.decode(jws);\n    }\n    if (typeof jws !== 'string') {\n        throw new JWSInvalid('Compact JWS must be a string or Uint8Array');\n    }\n    const { 0: protectedHeader, 1: payload, 2: signature, length } = jws.split('.');\n    if (length !== 3) {\n        throw new JWSInvalid('Invalid Compact JWS');\n    }\n    const verified = await flattenedVerify({ payload, protected: protectedHeader, signature }, key, options);\n    const result = { payload: verified.payload, protectedHeader: verified.protectedHeader };\n    if (typeof key === 'function') {\n        return { ...result, key: verified.key };\n    }\n    return result;\n}\n", "import { decode as base64url } from '../../runtime/base64url.js';\nimport verify from '../../runtime/verify.js';\nimport { JOSEAlgNotAllowed, JWSInvalid, JWSSignatureVerificationFailed } from '../../util/errors.js';\nimport { concat, encoder, decoder } from '../../lib/buffer_utils.js';\nimport isDisjoint from '../../lib/is_disjoint.js';\nimport isObject from '../../lib/is_object.js';\nimport { checkKeyTypeWithJwk } from '../../lib/check_key_type.js';\nimport validateCrit from '../../lib/validate_crit.js';\nimport validateAlgorithms from '../../lib/validate_algorithms.js';\nimport { isJWK } from '../../lib/is_jwk.js';\nimport { importJWK } from '../../key/import.js';\nexport async function flattenedVerify(jws, key, options) {\n    if (!isObject(jws)) {\n        throw new JWSInvalid('Flattened JWS must be an object');\n    }\n    if (jws.protected === undefined && jws.header === undefined) {\n        throw new JWSInvalid('Flattened JWS must have either of the \"protected\" or \"header\" members');\n    }\n    if (jws.protected !== undefined && typeof jws.protected !== 'string') {\n        throw new JWSInvalid('JWS Protected Header incorrect type');\n    }\n    if (jws.payload === undefined) {\n        throw new JWSInvalid('JWS Payload missing');\n    }\n    if (typeof jws.signature !== 'string') {\n        throw new JWSInvalid('JWS Signature missing or incorrect type');\n    }\n    if (jws.header !== undefined && !isObject(jws.header)) {\n        throw new JWSInvalid('JWS Unprotected Header incorrect type');\n    }\n    let parsedProt = {};\n    if (jws.protected) {\n        try {\n            const protectedHeader = base64url(jws.protected);\n            parsedProt = JSON.parse(decoder.decode(protectedHeader));\n        }\n        catch {\n            throw new JWSInvalid('JWS Protected Header is invalid');\n        }\n    }\n    if (!isDisjoint(parsedProt, jws.header)) {\n        throw new JWSInvalid('JWS Protected and JWS Unprotected Header Parameter names must be disjoint');\n    }\n    const joseHeader = {\n        ...parsedProt,\n        ...jws.header,\n    };\n    const extensions = validateCrit(JWSInvalid, new Map([['b64', true]]), options?.crit, parsedProt, joseHeader);\n    let b64 = true;\n    if (extensions.has('b64')) {\n        b64 = parsedProt.b64;\n        if (typeof b64 !== 'boolean') {\n            throw new JWSInvalid('The \"b64\" (base64url-encode payload) Header Parameter must be a boolean');\n        }\n    }\n    const { alg } = joseHeader;\n    if (typeof alg !== 'string' || !alg) {\n        throw new JWSInvalid('JWS \"alg\" (Algorithm) Header Parameter missing or invalid');\n    }\n    const algorithms = options && validateAlgorithms('algorithms', options.algorithms);\n    if (algorithms && !algorithms.has(alg)) {\n        throw new JOSEAlgNotAllowed('\"alg\" (Algorithm) Header Parameter value not allowed');\n    }\n    if (b64) {\n        if (typeof jws.payload !== 'string') {\n            throw new JWSInvalid('JWS Payload must be a string');\n        }\n    }\n    else if (typeof jws.payload !== 'string' && !(jws.payload instanceof Uint8Array)) {\n        throw new JWSInvalid('JWS Payload must be a string or an Uint8Array instance');\n    }\n    let resolvedKey = false;\n    if (typeof key === 'function') {\n        key = await key(parsedProt, jws);\n        resolvedKey = true;\n        checkKeyTypeWithJwk(alg, key, 'verify');\n        if (isJWK(key)) {\n            key = await importJWK(key, alg);\n        }\n    }\n    else {\n        checkKeyTypeWithJwk(alg, key, 'verify');\n    }\n    const data = concat(encoder.encode(jws.protected ?? ''), encoder.encode('.'), typeof jws.payload === 'string' ? encoder.encode(jws.payload) : jws.payload);\n    let signature;\n    try {\n        signature = base64url(jws.signature);\n    }\n    catch {\n        throw new JWSInvalid('Failed to base64url decode the signature');\n    }\n    const verified = await verify(alg, key, signature, data);\n    if (!verified) {\n        throw new JWSSignatureVerificationFailed();\n    }\n    let payload;\n    if (b64) {\n        try {\n            payload = base64url(jws.payload);\n        }\n        catch {\n            throw new JWSInvalid('Failed to base64url decode the payload');\n        }\n    }\n    else if (typeof jws.payload === 'string') {\n        payload = encoder.encode(jws.payload);\n    }\n    else {\n        payload = jws.payload;\n    }\n    const result = { payload };\n    if (jws.protected !== undefined) {\n        result.protectedHeader = parsedProt;\n    }\n    if (jws.header !== undefined) {\n        result.unprotectedHeader = jws.header;\n    }\n    if (resolvedKey) {\n        return { ...result, key };\n    }\n    return result;\n}\n", "import subtleAlgorithm from './subtle_dsa.js';\nimport crypto from './webcrypto.js';\nimport checkKeyLength from './check_key_length.js';\nimport getVerifyKey from './get_sign_verify_key.js';\nconst verify = async (alg, key, signature, data) => {\n    const cryptoKey = await getVerifyKey(alg, key, 'verify');\n    checkKeyLength(alg, cryptoKey);\n    const algorithm = subtleAlgorithm(alg, cryptoKey.algorithm);\n    try {\n        return await crypto.subtle.verify(algorithm, cryptoKey, signature, data);\n    }\n    catch {\n        return false;\n    }\n};\nexport default verify;\n", "import { JOSENotSupported } from '../util/errors.js';\nexport default function subtleDsa(alg, algorithm) {\n    const hash = `SHA-${alg.slice(-3)}`;\n    switch (alg) {\n        case 'HS256':\n        case 'HS384':\n        case 'HS512':\n            return { hash, name: 'HMAC' };\n        case 'PS256':\n        case 'PS384':\n        case 'PS512':\n            return { hash, name: 'RSA-PSS', saltLength: alg.slice(-3) >> 3 };\n        case 'RS256':\n        case 'RS384':\n        case 'RS512':\n            return { hash, name: 'RSASSA-PKCS1-v1_5' };\n        case 'ES256':\n        case 'ES384':\n        case 'ES512':\n            return { hash, name: 'ECDSA', namedCurve: algorithm.namedCurve };\n        case 'Ed25519':\n            return { name: 'Ed25519' };\n        case 'EdDSA':\n            return { name: algorithm.name };\n        default:\n            throw new JOSENotSupported(`alg ${alg} is not supported either by JOSE or your javascript runtime`);\n    }\n}\n", "import crypto, { isCryptoKey } from './webcrypto.js';\nimport { checkSigCryptoKey } from '../lib/crypto_key.js';\nimport invalidKeyInput from '../lib/invalid_key_input.js';\nimport { types } from './is_key_like.js';\nimport normalize from './normalize_key.js';\nexport default async function getCryptoKey(alg, key, usage) {\n    if (usage === 'sign') {\n        key = await normalize.normalizePrivateKey(key, alg);\n    }\n    if (usage === 'verify') {\n        key = await normalize.normalizePublicKey(key, alg);\n    }\n    if (isCryptoKey(key)) {\n        checkSigCryptoKey(key, alg, usage);\n        return key;\n    }\n    if (key instanceof Uint8Array) {\n        if (!alg.startsWith('HS')) {\n            throw new TypeError(invalidKeyInput(key, ...types));\n        }\n        return crypto.subtle.importKey('raw', key, { hash: `SHA-${alg.slice(-3)}`, name: 'HMAC' }, false, [usage]);\n    }\n    throw new TypeError(invalidKeyInput(key, ...types, 'Uint8Array', 'JSON Web Key'));\n}\n", "import { compactVerify } from '../jws/compact/verify.js';\nimport jwtPayload from '../lib/jwt_claims_set.js';\nimport { JWTInvalid } from '../util/errors.js';\nexport async function jwtVerify(jwt, key, options) {\n    const verified = await compactVerify(jwt, key, options);\n    if (verified.protectedHeader.crit?.includes('b64') && verified.protectedHeader.b64 === false) {\n        throw new JWTInvalid('JWTs MUST NOT use unencoded payload');\n    }\n    const payload = jwtPayload(verified.protectedHeader, verified.payload, options);\n    const result = { payload, protectedHeader: verified.protectedHeader };\n    if (typeof key === 'function') {\n        return { ...result, key: verified.key };\n    }\n    return result;\n}\n", "import { JWTClaimValidationFailed, JWTExpired, JWTInvalid } from '../util/errors.js';\nimport { decoder } from './buffer_utils.js';\nimport epoch from './epoch.js';\nimport secs from './secs.js';\nimport isObject from './is_object.js';\nconst normalizeTyp = (value) => value.toLowerCase().replace(/^application\\//, '');\nconst checkAudiencePresence = (audPayload, audOption) => {\n    if (typeof audPayload === 'string') {\n        return audOption.includes(audPayload);\n    }\n    if (Array.isArray(audPayload)) {\n        return audOption.some(Set.prototype.has.bind(new Set(audPayload)));\n    }\n    return false;\n};\nexport default (protectedHeader, encodedPayload, options = {}) => {\n    let payload;\n    try {\n        payload = JSON.parse(decoder.decode(encodedPayload));\n    }\n    catch {\n    }\n    if (!isObject(payload)) {\n        throw new JWTInvalid('JWT Claims Set must be a top-level JSON object');\n    }\n    const { typ } = options;\n    if (typ &&\n        (typeof protectedHeader.typ !== 'string' ||\n            normalizeTyp(protectedHeader.typ) !== normalizeTyp(typ))) {\n        throw new JWTClaimValidationFailed('unexpected \"typ\" JWT header value', payload, 'typ', 'check_failed');\n    }\n    const { requiredClaims = [], issuer, subject, audience, maxTokenAge } = options;\n    const presenceCheck = [...requiredClaims];\n    if (maxTokenAge !== undefined)\n        presenceCheck.push('iat');\n    if (audience !== undefined)\n        presenceCheck.push('aud');\n    if (subject !== undefined)\n        presenceCheck.push('sub');\n    if (issuer !== undefined)\n        presenceCheck.push('iss');\n    for (const claim of new Set(presenceCheck.reverse())) {\n        if (!(claim in payload)) {\n            throw new JWTClaimValidationFailed(`missing required \"${claim}\" claim`, payload, claim, 'missing');\n        }\n    }\n    if (issuer &&\n        !(Array.isArray(issuer) ? issuer : [issuer]).includes(payload.iss)) {\n        throw new JWTClaimValidationFailed('unexpected \"iss\" claim value', payload, 'iss', 'check_failed');\n    }\n    if (subject && payload.sub !== subject) {\n        throw new JWTClaimValidationFailed('unexpected \"sub\" claim value', payload, 'sub', 'check_failed');\n    }\n    if (audience &&\n        !checkAudiencePresence(payload.aud, typeof audience === 'string' ? [audience] : audience)) {\n        throw new JWTClaimValidationFailed('unexpected \"aud\" claim value', payload, 'aud', 'check_failed');\n    }\n    let tolerance;\n    switch (typeof options.clockTolerance) {\n        case 'string':\n            tolerance = secs(options.clockTolerance);\n            break;\n        case 'number':\n            tolerance = options.clockTolerance;\n            break;\n        case 'undefined':\n            tolerance = 0;\n            break;\n        default:\n            throw new TypeError('Invalid clockTolerance option type');\n    }\n    const { currentDate } = options;\n    const now = epoch(currentDate || new Date());\n    if ((payload.iat !== undefined || maxTokenAge) && typeof payload.iat !== 'number') {\n        throw new JWTClaimValidationFailed('\"iat\" claim must be a number', payload, 'iat', 'invalid');\n    }\n    if (payload.nbf !== undefined) {\n        if (typeof payload.nbf !== 'number') {\n            throw new JWTClaimValidationFailed('\"nbf\" claim must be a number', payload, 'nbf', 'invalid');\n        }\n        if (payload.nbf > now + tolerance) {\n            throw new JWTClaimValidationFailed('\"nbf\" claim timestamp check failed', payload, 'nbf', 'check_failed');\n        }\n    }\n    if (payload.exp !== undefined) {\n        if (typeof payload.exp !== 'number') {\n            throw new JWTClaimValidationFailed('\"exp\" claim must be a number', payload, 'exp', 'invalid');\n        }\n        if (payload.exp <= now - tolerance) {\n            throw new JWTExpired('\"exp\" claim timestamp check failed', payload, 'exp', 'check_failed');\n        }\n    }\n    if (maxTokenAge) {\n        const age = now - payload.iat;\n        const max = typeof maxTokenAge === 'number' ? maxTokenAge : secs(maxTokenAge);\n        if (age - tolerance > max) {\n            throw new JWTExpired('\"iat\" claim timestamp check failed (too far in the past)', payload, 'iat', 'check_failed');\n        }\n        if (age < 0 - tolerance) {\n            throw new JWTClaimValidationFailed('\"iat\" claim timestamp check failed (it should be in the past)', payload, 'iat', 'check_failed');\n        }\n    }\n    return payload;\n};\n", "export default (date) => Math.floor(date.getTime() / 1000);\n", "const minute = 60;\nconst hour = minute * 60;\nconst day = hour * 24;\nconst week = day * 7;\nconst year = day * 365.25;\nconst REGEX = /^(\\+|\\-)? ?(\\d+|\\d+\\.\\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i;\nexport default (str) => {\n    const matched = REGEX.exec(str);\n    if (!matched || (matched[4] && matched[1])) {\n        throw new TypeError('Invalid time period format');\n    }\n    const value = parseFloat(matched[2]);\n    const unit = matched[3].toLowerCase();\n    let numericDate;\n    switch (unit) {\n        case 'sec':\n        case 'secs':\n        case 'second':\n        case 'seconds':\n        case 's':\n            numericDate = Math.round(value);\n            break;\n        case 'minute':\n        case 'minutes':\n        case 'min':\n        case 'mins':\n        case 'm':\n            numericDate = Math.round(value * minute);\n            break;\n        case 'hour':\n        case 'hours':\n        case 'hr':\n        case 'hrs':\n        case 'h':\n            numericDate = Math.round(value * hour);\n            break;\n        case 'day':\n        case 'days':\n        case 'd':\n            numericDate = Math.round(value * day);\n            break;\n        case 'week':\n        case 'weeks':\n        case 'w':\n            numericDate = Math.round(value * week);\n            break;\n        default:\n            numericDate = Math.round(value * year);\n            break;\n    }\n    if (matched[1] === '-' || matched[4] === 'ago') {\n        return -numericDate;\n    }\n    return numericDate;\n};\n", "import { FlattenedSign } from '../flattened/sign.js';\nexport class CompactSign {\n    constructor(payload) {\n        this._flattened = new FlattenedSign(payload);\n    }\n    setProtectedHeader(protectedHeader) {\n        this._flattened.setProtectedHeader(protectedHeader);\n        return this;\n    }\n    async sign(key, options) {\n        const jws = await this._flattened.sign(key, options);\n        if (jws.payload === undefined) {\n            throw new TypeError('use the flattened module for creating JWS with b64: false');\n        }\n        return `${jws.protected}.${jws.payload}.${jws.signature}`;\n    }\n}\n", "import { encode as base64url } from '../../runtime/base64url.js';\nimport sign from '../../runtime/sign.js';\nimport isDisjoint from '../../lib/is_disjoint.js';\nimport { JWSInvalid } from '../../util/errors.js';\nimport { encoder, decoder, concat } from '../../lib/buffer_utils.js';\nimport { checkKeyTypeWithJwk } from '../../lib/check_key_type.js';\nimport validateCrit from '../../lib/validate_crit.js';\nexport class FlattenedSign {\n    constructor(payload) {\n        if (!(payload instanceof Uint8Array)) {\n            throw new TypeError('payload must be an instance of Uint8Array');\n        }\n        this._payload = payload;\n    }\n    setProtectedHeader(protectedHeader) {\n        if (this._protectedHeader) {\n            throw new TypeError('setProtectedHeader can only be called once');\n        }\n        this._protectedHeader = protectedHeader;\n        return this;\n    }\n    setUnprotectedHeader(unprotectedHeader) {\n        if (this._unprotectedHeader) {\n            throw new TypeError('setUnprotectedHeader can only be called once');\n        }\n        this._unprotectedHeader = unprotectedHeader;\n        return this;\n    }\n    async sign(key, options) {\n        if (!this._protectedHeader && !this._unprotectedHeader) {\n            throw new JWSInvalid('either setProtectedHeader or setUnprotectedHeader must be called before #sign()');\n        }\n        if (!isDisjoint(this._protectedHeader, this._unprotectedHeader)) {\n            throw new JWSInvalid('JWS Protected and JWS Unprotected Header Parameter names must be disjoint');\n        }\n        const joseHeader = {\n            ...this._protectedHeader,\n            ...this._unprotectedHeader,\n        };\n        const extensions = validateCrit(JWSInvalid, new Map([['b64', true]]), options?.crit, this._protectedHeader, joseHeader);\n        let b64 = true;\n        if (extensions.has('b64')) {\n            b64 = this._protectedHeader.b64;\n            if (typeof b64 !== 'boolean') {\n                throw new JWSInvalid('The \"b64\" (base64url-encode payload) Header Parameter must be a boolean');\n            }\n        }\n        const { alg } = joseHeader;\n        if (typeof alg !== 'string' || !alg) {\n            throw new JWSInvalid('JWS \"alg\" (Algorithm) Header Parameter missing or invalid');\n        }\n        checkKeyTypeWithJwk(alg, key, 'sign');\n        let payload = this._payload;\n        if (b64) {\n            payload = encoder.encode(base64url(payload));\n        }\n        let protectedHeader;\n        if (this._protectedHeader) {\n            protectedHeader = encoder.encode(base64url(JSON.stringify(this._protectedHeader)));\n        }\n        else {\n            protectedHeader = encoder.encode('');\n        }\n        const data = concat(protectedHeader, encoder.encode('.'), payload);\n        const signature = await sign(alg, key, data);\n        const jws = {\n            signature: base64url(signature),\n            payload: '',\n        };\n        if (b64) {\n            jws.payload = decoder.decode(payload);\n        }\n        if (this._unprotectedHeader) {\n            jws.header = this._unprotectedHeader;\n        }\n        if (this._protectedHeader) {\n            jws.protected = decoder.decode(protectedHeader);\n        }\n        return jws;\n    }\n}\n", "import subtleAlgorithm from './subtle_dsa.js';\nimport crypto from './webcrypto.js';\nimport checkKeyLength from './check_key_length.js';\nimport getSignKey from './get_sign_verify_key.js';\nconst sign = async (alg, key, data) => {\n    const cryptoKey = await getSignKey(alg, key, 'sign');\n    checkKeyLength(alg, cryptoKey);\n    const signature = await crypto.subtle.sign(subtleAlgorithm(alg, cryptoKey.algorithm), cryptoKey, data);\n    return new Uint8Array(signature);\n};\nexport default sign;\n", "import { CompactSign } from '../jws/compact/sign.js';\nimport { JWTInvalid } from '../util/errors.js';\nimport { encoder } from '../lib/buffer_utils.js';\nimport { ProduceJWT } from './produce.js';\nexport class SignJWT extends ProduceJWT {\n    setProtectedHeader(protectedHeader) {\n        this._protectedHeader = protectedHeader;\n        return this;\n    }\n    async sign(key, options) {\n        const sig = new CompactSign(encoder.encode(JSON.stringify(this._payload)));\n        sig.setProtectedHeader(this._protectedHeader);\n        if (Array.isArray(this._protectedHeader?.crit) &&\n            this._protectedHeader.crit.includes('b64') &&\n            this._protectedHeader.b64 === false) {\n            throw new JWTInvalid('JWTs MUST NOT use unencoded payload');\n        }\n        return sig.sign(key, options);\n    }\n}\n", "import epoch from '../lib/epoch.js';\nimport isObject from '../lib/is_object.js';\nimport secs from '../lib/secs.js';\nfunction validateInput(label, input) {\n    if (!Number.isFinite(input)) {\n        throw new TypeError(`Invalid ${label} input`);\n    }\n    return input;\n}\nexport class ProduceJWT {\n    constructor(payload = {}) {\n        if (!isObject(payload)) {\n            throw new TypeError('JWT Claims Set MUST be an object');\n        }\n        this._payload = payload;\n    }\n    setIssuer(issuer) {\n        this._payload = { ...this._payload, iss: issuer };\n        return this;\n    }\n    setSubject(subject) {\n        this._payload = { ...this._payload, sub: subject };\n        return this;\n    }\n    setAudience(audience) {\n        this._payload = { ...this._payload, aud: audience };\n        return this;\n    }\n    setJti(jwtId) {\n        this._payload = { ...this._payload, jti: jwtId };\n        return this;\n    }\n    setNotBefore(input) {\n        if (typeof input === 'number') {\n            this._payload = { ...this._payload, nbf: validateInput('setNotBefore', input) };\n        }\n        else if (input instanceof Date) {\n            this._payload = { ...this._payload, nbf: validateInput('setNotBefore', epoch(input)) };\n        }\n        else {\n            this._payload = { ...this._payload, nbf: epoch(new Date()) + secs(input) };\n        }\n        return this;\n    }\n    setExpirationTime(input) {\n        if (typeof input === 'number') {\n            this._payload = { ...this._payload, exp: validateInput('setExpirationTime', input) };\n        }\n        else if (input instanceof Date) {\n            this._payload = { ...this._payload, exp: validateInput('setExpirationTime', epoch(input)) };\n        }\n        else {\n            this._payload = { ...this._payload, exp: epoch(new Date()) + secs(input) };\n        }\n        return this;\n    }\n    setIssuedAt(input) {\n        if (typeof input === 'undefined') {\n            this._payload = { ...this._payload, iat: epoch(new Date()) };\n        }\n        else if (input instanceof Date) {\n            this._payload = { ...this._payload, iat: validateInput('setIssuedAt', epoch(input)) };\n        }\n        else if (typeof input === 'string') {\n            this._payload = {\n                ...this._payload,\n                iat: validateInput('setIssuedAt', epoch(new Date()) + secs(input)),\n            };\n        }\n        else {\n            this._payload = { ...this._payload, iat: validateInput('setIssuedAt', input) };\n        }\n        return this;\n    }\n}\n", "import type { D1Database } from '@cloudflare/workers-types';\n\nexport type UserProfile = 'USUARIO' | 'ADMIN';\n\nexport interface UserRow {\n  id: string;\n  email: string;\n  hash_senha: string;\n  nome: string;\n  perfil: UserProfile;\n  criado_em: string;\n  atualizado_em: string;\n  excluido_em: string | null;\n}\n\nexport class UserRepository {\n  constructor(private readonly db: D1Database) {}\n\n  async getById(id: string): Promise<UserRow | null> {\n    const row = await this.db\n      .prepare(\n        `SELECT id, email, hash_senha, nome, perfil, criado_em, atualizado_em, excluido_em\n         FROM usuarios\n         WHERE id = ?\n         LIMIT 1`\n      )\n      .bind(id)\n      .first<UserRow>();\n\n    return row ?? null;\n  }\n\n  async getByEmail(email: string): Promise<UserRow | null> {\n    const row = await this.db\n      .prepare(\n        `SELECT id, email, hash_senha, nome, perfil, criado_em, atualizado_em, excluido_em\n         FROM usuarios\n         WHERE lower(email) = lower(?)\n           AND excluido_em IS NULL\n         LIMIT 1`\n      )\n      .bind(email)\n      .first<UserRow>();\n\n    return row ?? null;\n  }\n\n  async createUser(params: {\n    email: string;\n    hash_senha: string;\n    nome: string;\n    perfil?: UserProfile;\n  }): Promise<UserRow> {\n    const id = crypto.randomUUID();\n    const perfil: UserProfile = params.perfil ?? 'USUARIO';\n\n    await this.db\n      .prepare(\n        `INSERT INTO usuarios (id, email, hash_senha, nome, perfil)\n         VALUES (?, ?, ?, ?, ?)`\n      )\n      .bind(id, params.email, params.hash_senha, params.nome, perfil)\n      .run();\n\n    const created = await this.getById(id);\n    if (!created) throw new Error('Falha ao criar usu\u00E1rio');\n\n    return created;\n  }\n\n  async updateName(userId: string, nome: string): Promise<void> {\n    await this.db\n      .prepare(\n        `UPDATE usuarios\n         SET nome = ?, atualizado_em = datetime('now')\n         WHERE id = ? AND excluido_em IS NULL`\n      )\n      .bind(nome, userId)\n      .run();\n  }\n\n  async updateEmail(userId: string, email: string): Promise<void> {\n    await this.db\n      .prepare(\n        `UPDATE usuarios\n         SET email = ?, atualizado_em = datetime('now')\n         WHERE id = ? AND excluido_em IS NULL`\n      )\n      .bind(email, userId)\n      .run();\n  }\n\n  async updatePassword(userId: string, newHash: string): Promise<void> {\n    await this.db\n      .prepare(\n        `UPDATE usuarios\n         SET hash_senha = ?, atualizado_em = datetime('now')\n         WHERE id = ? AND excluido_em IS NULL`\n      )\n      .bind(newHash, userId)\n      .run();\n  }\n\n  async softDelete(userId: string): Promise<void> {\n    await this.db\n      .prepare(\n        `UPDATE usuarios\n         SET excluido_em = datetime('now'), atualizado_em = datetime('now')\n         WHERE id = ? AND excluido_em IS NULL`\n      )\n      .bind(userId)\n      .run();\n  }\n\n}\n", "import type { Middleware } from '../lib/router';\nimport { UnauthorizedError } from '../lib/errors';\n\nconst PUBLIC_PATHS = new Set([\n  '/',\n  '/api/v1/health',\n  '/api/v1/docs',\n  '/api/v1/openapi.json',\n  '/api/v1/plans',\n  '/api/v1/terms/current',\n  '/api/v1/auth/register',\n  '/api/v1/auth/login',\n  '/api/v1/auth/forgot-password',\n  '/api/v1/auth/reset-password'\n]);\n\nexport const requireAuthMiddleware: Middleware = async (ctx, next) => {\n  const pathname = new URL(ctx.req.url).pathname;\n  if (PUBLIC_PATHS.has(pathname)) {\n    return await next();\n  }\n\n  if (pathname.startsWith('/api/v1/') && !ctx.user) {\n    throw new UnauthorizedError();\n  }\n\n  return await next();\n};\n", "import type { Router } from '../lib/router';\nimport { jsonResponse, parseJson } from '../lib/http';\nimport { z } from 'zod';\nimport { UserRepository } from '../repositories/user.repository';\nimport { PlanRepository } from '../repositories/plan.repository';\nimport { PreferencesRepository } from '../repositories/preferences.repository';\nimport { TermsRepository } from '../repositories/terms.repository';\nimport { PasswordResetRepository } from '../repositories/password_reset.repository';\nimport { AuthService } from '../services/auth.service';\nimport { EmailService } from '../services/email.service';\nimport { getClientIp, getUserAgent } from './_helpers';\n\nconst registerSchema = z.object({\n  email: z.string().email(),\n  senha: z.string().min(6),\n  nome: z.string().min(1),\n  aceitou_termos: z.boolean()\n});\n\nconst loginSchema = z.object({\n  email: z.string().email(),\n  senha: z.string().min(1)\n});\n\nconst forgotSchema = z.object({\n  email: z.string().email()\n});\n\nconst resetSchema = z.object({\n  token: z.string().min(10),\n  nova_senha: z.string().min(6)\n});\n\nfunction buildAuthService(ctx: any) {\n  const userRepo = new UserRepository(ctx.env.DB);\n  const planRepo = new PlanRepository(ctx.env.DB);\n  const prefsRepo = new PreferencesRepository(ctx.env.DB);\n  const termsRepo = new TermsRepository(ctx.env.DB);\n  const resetRepo = new PasswordResetRepository(ctx.env.DB);\n  const emailService = new EmailService(ctx.env);\n  return new AuthService(ctx.env, userRepo, prefsRepo, termsRepo, planRepo, resetRepo, emailService);\n}\n\nexport function registerAuthController(router: Router) {\n  router.post('/api/v1/auth/register', async (ctx) => {\n    const body = await parseJson(ctx.req, registerSchema);\n    const service = buildAuthService(ctx);\n    const { user, token } = await service.register({\n      email: body.email,\n      senha: body.senha,\n      nome: body.nome,\n      termos_versao: ctx.env.TERMS_VERSION || 'v1',\n      termos_aceito: body.aceitou_termos,\n      ip: getClientIp(ctx.req),\n      user_agent: getUserAgent(ctx.req)\n    });\n\n    return jsonResponse({ user, token },  { status: 200 });\n  });\n\n  router.post('/api/v1/auth/login', async (ctx) => {\n    const body = await parseJson(ctx.req, loginSchema);\n    const service = buildAuthService(ctx);\n    const { user, token } = await service.login({ email: body.email, senha: body.senha });\n    return jsonResponse({ user, token },  { status: 200 });\n  });\n\n  router.post('/api/v1/auth/forgot-password', async (ctx) => {\n    const body = await parseJson(ctx.req, forgotSchema);\n    const service = buildAuthService(ctx);\n    const resetUrlBase = `${(ctx.env.APP_BASE_URL || new URL(ctx.req.url).origin).replace(/\\/$/, '')}/reset-password`;\n    const result = await service.forgotPassword({ email: body.email, resetUrlBase });\n    return jsonResponse(result,  { status: 200 });\n  });\n\n  router.post('/api/v1/auth/reset-password', async (ctx) => {\n    const body = await parseJson(ctx.req, resetSchema);\n    const service = buildAuthService(ctx);\n    const result = await service.resetPassword({ token: body.token, newPassword: body.nova_senha });\n    return jsonResponse(result,  { status: 200 });\n  });\n}\n", "import * as z from \"./v3/external.js\";\nexport * from \"./v3/external.js\";\nexport { z };\nexport default z;\n", "export * from \"./errors.js\";\nexport * from \"./helpers/parseUtil.js\";\nexport * from \"./helpers/typeAliases.js\";\nexport * from \"./helpers/util.js\";\nexport * from \"./types.js\";\nexport * from \"./ZodError.js\";\n", "import defaultErrorMap from \"./locales/en.js\";\nlet overrideErrorMap = defaultErrorMap;\nexport { defaultErrorMap };\nexport function setErrorMap(map) {\n    overrideErrorMap = map;\n}\nexport function getErrorMap() {\n    return overrideErrorMap;\n}\n", "import { ZodIssueCode } from \"../ZodError.js\";\nimport { util, ZodParsedType } from \"../helpers/util.js\";\nconst errorMap = (issue, _ctx) => {\n    let message;\n    switch (issue.code) {\n        case ZodIssueCode.invalid_type:\n            if (issue.received === ZodParsedType.undefined) {\n                message = \"Required\";\n            }\n            else {\n                message = `Expected ${issue.expected}, received ${issue.received}`;\n            }\n            break;\n        case ZodIssueCode.invalid_literal:\n            message = `Invalid literal value, expected ${JSON.stringify(issue.expected, util.jsonStringifyReplacer)}`;\n            break;\n        case ZodIssueCode.unrecognized_keys:\n            message = `Unrecognized key(s) in object: ${util.joinValues(issue.keys, \", \")}`;\n            break;\n        case ZodIssueCode.invalid_union:\n            message = `Invalid input`;\n            break;\n        case ZodIssueCode.invalid_union_discriminator:\n            message = `Invalid discriminator value. Expected ${util.joinValues(issue.options)}`;\n            break;\n        case ZodIssueCode.invalid_enum_value:\n            message = `Invalid enum value. Expected ${util.joinValues(issue.options)}, received '${issue.received}'`;\n            break;\n        case ZodIssueCode.invalid_arguments:\n            message = `Invalid function arguments`;\n            break;\n        case ZodIssueCode.invalid_return_type:\n            message = `Invalid function return type`;\n            break;\n        case ZodIssueCode.invalid_date:\n            message = `Invalid date`;\n            break;\n        case ZodIssueCode.invalid_string:\n            if (typeof issue.validation === \"object\") {\n                if (\"includes\" in issue.validation) {\n                    message = `Invalid input: must include \"${issue.validation.includes}\"`;\n                    if (typeof issue.validation.position === \"number\") {\n                        message = `${message} at one or more positions greater than or equal to ${issue.validation.position}`;\n                    }\n                }\n                else if (\"startsWith\" in issue.validation) {\n                    message = `Invalid input: must start with \"${issue.validation.startsWith}\"`;\n                }\n                else if (\"endsWith\" in issue.validation) {\n                    message = `Invalid input: must end with \"${issue.validation.endsWith}\"`;\n                }\n                else {\n                    util.assertNever(issue.validation);\n                }\n            }\n            else if (issue.validation !== \"regex\") {\n                message = `Invalid ${issue.validation}`;\n            }\n            else {\n                message = \"Invalid\";\n            }\n            break;\n        case ZodIssueCode.too_small:\n            if (issue.type === \"array\")\n                message = `Array must contain ${issue.exact ? \"exactly\" : issue.inclusive ? `at least` : `more than`} ${issue.minimum} element(s)`;\n            else if (issue.type === \"string\")\n                message = `String must contain ${issue.exact ? \"exactly\" : issue.inclusive ? `at least` : `over`} ${issue.minimum} character(s)`;\n            else if (issue.type === \"number\")\n                message = `Number must be ${issue.exact ? `exactly equal to ` : issue.inclusive ? `greater than or equal to ` : `greater than `}${issue.minimum}`;\n            else if (issue.type === \"bigint\")\n                message = `Number must be ${issue.exact ? `exactly equal to ` : issue.inclusive ? `greater than or equal to ` : `greater than `}${issue.minimum}`;\n            else if (issue.type === \"date\")\n                message = `Date must be ${issue.exact ? `exactly equal to ` : issue.inclusive ? `greater than or equal to ` : `greater than `}${new Date(Number(issue.minimum))}`;\n            else\n                message = \"Invalid input\";\n            break;\n        case ZodIssueCode.too_big:\n            if (issue.type === \"array\")\n                message = `Array must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `less than`} ${issue.maximum} element(s)`;\n            else if (issue.type === \"string\")\n                message = `String must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `under`} ${issue.maximum} character(s)`;\n            else if (issue.type === \"number\")\n                message = `Number must be ${issue.exact ? `exactly` : issue.inclusive ? `less than or equal to` : `less than`} ${issue.maximum}`;\n            else if (issue.type === \"bigint\")\n                message = `BigInt must be ${issue.exact ? `exactly` : issue.inclusive ? `less than or equal to` : `less than`} ${issue.maximum}`;\n            else if (issue.type === \"date\")\n                message = `Date must be ${issue.exact ? `exactly` : issue.inclusive ? `smaller than or equal to` : `smaller than`} ${new Date(Number(issue.maximum))}`;\n            else\n                message = \"Invalid input\";\n            break;\n        case ZodIssueCode.custom:\n            message = `Invalid input`;\n            break;\n        case ZodIssueCode.invalid_intersection_types:\n            message = `Intersection results could not be merged`;\n            break;\n        case ZodIssueCode.not_multiple_of:\n            message = `Number must be a multiple of ${issue.multipleOf}`;\n            break;\n        case ZodIssueCode.not_finite:\n            message = \"Number must be finite\";\n            break;\n        default:\n            message = _ctx.defaultError;\n            util.assertNever(issue);\n    }\n    return { message };\n};\nexport default errorMap;\n", "import { util } from \"./helpers/util.js\";\nexport const ZodIssueCode = util.arrayToEnum([\n    \"invalid_type\",\n    \"invalid_literal\",\n    \"custom\",\n    \"invalid_union\",\n    \"invalid_union_discriminator\",\n    \"invalid_enum_value\",\n    \"unrecognized_keys\",\n    \"invalid_arguments\",\n    \"invalid_return_type\",\n    \"invalid_date\",\n    \"invalid_string\",\n    \"too_small\",\n    \"too_big\",\n    \"invalid_intersection_types\",\n    \"not_multiple_of\",\n    \"not_finite\",\n]);\nexport const quotelessJson = (obj) => {\n    const json = JSON.stringify(obj, null, 2);\n    return json.replace(/\"([^\"]+)\":/g, \"$1:\");\n};\nexport class ZodError extends Error {\n    get errors() {\n        return this.issues;\n    }\n    constructor(issues) {\n        super();\n        this.issues = [];\n        this.addIssue = (sub) => {\n            this.issues = [...this.issues, sub];\n        };\n        this.addIssues = (subs = []) => {\n            this.issues = [...this.issues, ...subs];\n        };\n        const actualProto = new.target.prototype;\n        if (Object.setPrototypeOf) {\n            // eslint-disable-next-line ban/ban\n            Object.setPrototypeOf(this, actualProto);\n        }\n        else {\n            this.__proto__ = actualProto;\n        }\n        this.name = \"ZodError\";\n        this.issues = issues;\n    }\n    format(_mapper) {\n        const mapper = _mapper ||\n            function (issue) {\n                return issue.message;\n            };\n        const fieldErrors = { _errors: [] };\n        const processError = (error) => {\n            for (const issue of error.issues) {\n                if (issue.code === \"invalid_union\") {\n                    issue.unionErrors.map(processError);\n                }\n                else if (issue.code === \"invalid_return_type\") {\n                    processError(issue.returnTypeError);\n                }\n                else if (issue.code === \"invalid_arguments\") {\n                    processError(issue.argumentsError);\n                }\n                else if (issue.path.length === 0) {\n                    fieldErrors._errors.push(mapper(issue));\n                }\n                else {\n                    let curr = fieldErrors;\n                    let i = 0;\n                    while (i < issue.path.length) {\n                        const el = issue.path[i];\n                        const terminal = i === issue.path.length - 1;\n                        if (!terminal) {\n                            curr[el] = curr[el] || { _errors: [] };\n                            // if (typeof el === \"string\") {\n                            //   curr[el] = curr[el] || { _errors: [] };\n                            // } else if (typeof el === \"number\") {\n                            //   const errorArray: any = [];\n                            //   errorArray._errors = [];\n                            //   curr[el] = curr[el] || errorArray;\n                            // }\n                        }\n                        else {\n                            curr[el] = curr[el] || { _errors: [] };\n                            curr[el]._errors.push(mapper(issue));\n                        }\n                        curr = curr[el];\n                        i++;\n                    }\n                }\n            }\n        };\n        processError(this);\n        return fieldErrors;\n    }\n    static assert(value) {\n        if (!(value instanceof ZodError)) {\n            throw new Error(`Not a ZodError: ${value}`);\n        }\n    }\n    toString() {\n        return this.message;\n    }\n    get message() {\n        return JSON.stringify(this.issues, util.jsonStringifyReplacer, 2);\n    }\n    get isEmpty() {\n        return this.issues.length === 0;\n    }\n    flatten(mapper = (issue) => issue.message) {\n        const fieldErrors = {};\n        const formErrors = [];\n        for (const sub of this.issues) {\n            if (sub.path.length > 0) {\n                const firstEl = sub.path[0];\n                fieldErrors[firstEl] = fieldErrors[firstEl] || [];\n                fieldErrors[firstEl].push(mapper(sub));\n            }\n            else {\n                formErrors.push(mapper(sub));\n            }\n        }\n        return { formErrors, fieldErrors };\n    }\n    get formErrors() {\n        return this.flatten();\n    }\n}\nZodError.create = (issues) => {\n    const error = new ZodError(issues);\n    return error;\n};\n", "export var util;\n(function (util) {\n    util.assertEqual = (_) => { };\n    function assertIs(_arg) { }\n    util.assertIs = assertIs;\n    function assertNever(_x) {\n        throw new Error();\n    }\n    util.assertNever = assertNever;\n    util.arrayToEnum = (items) => {\n        const obj = {};\n        for (const item of items) {\n            obj[item] = item;\n        }\n        return obj;\n    };\n    util.getValidEnumValues = (obj) => {\n        const validKeys = util.objectKeys(obj).filter((k) => typeof obj[obj[k]] !== \"number\");\n        const filtered = {};\n        for (const k of validKeys) {\n            filtered[k] = obj[k];\n        }\n        return util.objectValues(filtered);\n    };\n    util.objectValues = (obj) => {\n        return util.objectKeys(obj).map(function (e) {\n            return obj[e];\n        });\n    };\n    util.objectKeys = typeof Object.keys === \"function\" // eslint-disable-line ban/ban\n        ? (obj) => Object.keys(obj) // eslint-disable-line ban/ban\n        : (object) => {\n            const keys = [];\n            for (const key in object) {\n                if (Object.prototype.hasOwnProperty.call(object, key)) {\n                    keys.push(key);\n                }\n            }\n            return keys;\n        };\n    util.find = (arr, checker) => {\n        for (const item of arr) {\n            if (checker(item))\n                return item;\n        }\n        return undefined;\n    };\n    util.isInteger = typeof Number.isInteger === \"function\"\n        ? (val) => Number.isInteger(val) // eslint-disable-line ban/ban\n        : (val) => typeof val === \"number\" && Number.isFinite(val) && Math.floor(val) === val;\n    function joinValues(array, separator = \" | \") {\n        return array.map((val) => (typeof val === \"string\" ? `'${val}'` : val)).join(separator);\n    }\n    util.joinValues = joinValues;\n    util.jsonStringifyReplacer = (_, value) => {\n        if (typeof value === \"bigint\") {\n            return value.toString();\n        }\n        return value;\n    };\n})(util || (util = {}));\nexport var objectUtil;\n(function (objectUtil) {\n    objectUtil.mergeShapes = (first, second) => {\n        return {\n            ...first,\n            ...second, // second overwrites first\n        };\n    };\n})(objectUtil || (objectUtil = {}));\nexport const ZodParsedType = util.arrayToEnum([\n    \"string\",\n    \"nan\",\n    \"number\",\n    \"integer\",\n    \"float\",\n    \"boolean\",\n    \"date\",\n    \"bigint\",\n    \"symbol\",\n    \"function\",\n    \"undefined\",\n    \"null\",\n    \"array\",\n    \"object\",\n    \"unknown\",\n    \"promise\",\n    \"void\",\n    \"never\",\n    \"map\",\n    \"set\",\n]);\nexport const getParsedType = (data) => {\n    const t = typeof data;\n    switch (t) {\n        case \"undefined\":\n            return ZodParsedType.undefined;\n        case \"string\":\n            return ZodParsedType.string;\n        case \"number\":\n            return Number.isNaN(data) ? ZodParsedType.nan : ZodParsedType.number;\n        case \"boolean\":\n            return ZodParsedType.boolean;\n        case \"function\":\n            return ZodParsedType.function;\n        case \"bigint\":\n            return ZodParsedType.bigint;\n        case \"symbol\":\n            return ZodParsedType.symbol;\n        case \"object\":\n            if (Array.isArray(data)) {\n                return ZodParsedType.array;\n            }\n            if (data === null) {\n                return ZodParsedType.null;\n            }\n            if (data.then && typeof data.then === \"function\" && data.catch && typeof data.catch === \"function\") {\n                return ZodParsedType.promise;\n            }\n            if (typeof Map !== \"undefined\" && data instanceof Map) {\n                return ZodParsedType.map;\n            }\n            if (typeof Set !== \"undefined\" && data instanceof Set) {\n                return ZodParsedType.set;\n            }\n            if (typeof Date !== \"undefined\" && data instanceof Date) {\n                return ZodParsedType.date;\n            }\n            return ZodParsedType.object;\n        default:\n            return ZodParsedType.unknown;\n    }\n};\n", "import { getErrorMap } from \"../errors.js\";\nimport defaultErrorMap from \"../locales/en.js\";\nexport const makeIssue = (params) => {\n    const { data, path, errorMaps, issueData } = params;\n    const fullPath = [...path, ...(issueData.path || [])];\n    const fullIssue = {\n        ...issueData,\n        path: fullPath,\n    };\n    if (issueData.message !== undefined) {\n        return {\n            ...issueData,\n            path: fullPath,\n            message: issueData.message,\n        };\n    }\n    let errorMessage = \"\";\n    const maps = errorMaps\n        .filter((m) => !!m)\n        .slice()\n        .reverse();\n    for (const map of maps) {\n        errorMessage = map(fullIssue, { data, defaultError: errorMessage }).message;\n    }\n    return {\n        ...issueData,\n        path: fullPath,\n        message: errorMessage,\n    };\n};\nexport const EMPTY_PATH = [];\nexport function addIssueToContext(ctx, issueData) {\n    const overrideMap = getErrorMap();\n    const issue = makeIssue({\n        issueData: issueData,\n        data: ctx.data,\n        path: ctx.path,\n        errorMaps: [\n            ctx.common.contextualErrorMap, // contextual error map is first priority\n            ctx.schemaErrorMap, // then schema-bound map if available\n            overrideMap, // then global override map\n            overrideMap === defaultErrorMap ? undefined : defaultErrorMap, // then global default map\n        ].filter((x) => !!x),\n    });\n    ctx.common.issues.push(issue);\n}\nexport class ParseStatus {\n    constructor() {\n        this.value = \"valid\";\n    }\n    dirty() {\n        if (this.value === \"valid\")\n            this.value = \"dirty\";\n    }\n    abort() {\n        if (this.value !== \"aborted\")\n            this.value = \"aborted\";\n    }\n    static mergeArray(status, results) {\n        const arrayValue = [];\n        for (const s of results) {\n            if (s.status === \"aborted\")\n                return INVALID;\n            if (s.status === \"dirty\")\n                status.dirty();\n            arrayValue.push(s.value);\n        }\n        return { status: status.value, value: arrayValue };\n    }\n    static async mergeObjectAsync(status, pairs) {\n        const syncPairs = [];\n        for (const pair of pairs) {\n            const key = await pair.key;\n            const value = await pair.value;\n            syncPairs.push({\n                key,\n                value,\n            });\n        }\n        return ParseStatus.mergeObjectSync(status, syncPairs);\n    }\n    static mergeObjectSync(status, pairs) {\n        const finalObject = {};\n        for (const pair of pairs) {\n            const { key, value } = pair;\n            if (key.status === \"aborted\")\n                return INVALID;\n            if (value.status === \"aborted\")\n                return INVALID;\n            if (key.status === \"dirty\")\n                status.dirty();\n            if (value.status === \"dirty\")\n                status.dirty();\n            if (key.value !== \"__proto__\" && (typeof value.value !== \"undefined\" || pair.alwaysSet)) {\n                finalObject[key.value] = value.value;\n            }\n        }\n        return { status: status.value, value: finalObject };\n    }\n}\nexport const INVALID = Object.freeze({\n    status: \"aborted\",\n});\nexport const DIRTY = (value) => ({ status: \"dirty\", value });\nexport const OK = (value) => ({ status: \"valid\", value });\nexport const isAborted = (x) => x.status === \"aborted\";\nexport const isDirty = (x) => x.status === \"dirty\";\nexport const isValid = (x) => x.status === \"valid\";\nexport const isAsync = (x) => typeof Promise !== \"undefined\" && x instanceof Promise;\n", "import { ZodError, ZodIssueCode, } from \"./ZodError.js\";\nimport { defaultErrorMap, getErrorMap } from \"./errors.js\";\nimport { errorUtil } from \"./helpers/errorUtil.js\";\nimport { DIRTY, INVALID, OK, ParseStatus, addIssueToContext, isAborted, isAsync, isDirty, isValid, makeIssue, } from \"./helpers/parseUtil.js\";\nimport { util, ZodParsedType, getParsedType } from \"./helpers/util.js\";\nclass ParseInputLazyPath {\n    constructor(parent, value, path, key) {\n        this._cachedPath = [];\n        this.parent = parent;\n        this.data = value;\n        this._path = path;\n        this._key = key;\n    }\n    get path() {\n        if (!this._cachedPath.length) {\n            if (Array.isArray(this._key)) {\n                this._cachedPath.push(...this._path, ...this._key);\n            }\n            else {\n                this._cachedPath.push(...this._path, this._key);\n            }\n        }\n        return this._cachedPath;\n    }\n}\nconst handleResult = (ctx, result) => {\n    if (isValid(result)) {\n        return { success: true, data: result.value };\n    }\n    else {\n        if (!ctx.common.issues.length) {\n            throw new Error(\"Validation failed but no issues detected.\");\n        }\n        return {\n            success: false,\n            get error() {\n                if (this._error)\n                    return this._error;\n                const error = new ZodError(ctx.common.issues);\n                this._error = error;\n                return this._error;\n            },\n        };\n    }\n};\nfunction processCreateParams(params) {\n    if (!params)\n        return {};\n    const { errorMap, invalid_type_error, required_error, description } = params;\n    if (errorMap && (invalid_type_error || required_error)) {\n        throw new Error(`Can't use \"invalid_type_error\" or \"required_error\" in conjunction with custom error map.`);\n    }\n    if (errorMap)\n        return { errorMap: errorMap, description };\n    const customMap = (iss, ctx) => {\n        const { message } = params;\n        if (iss.code === \"invalid_enum_value\") {\n            return { message: message ?? ctx.defaultError };\n        }\n        if (typeof ctx.data === \"undefined\") {\n            return { message: message ?? required_error ?? ctx.defaultError };\n        }\n        if (iss.code !== \"invalid_type\")\n            return { message: ctx.defaultError };\n        return { message: message ?? invalid_type_error ?? ctx.defaultError };\n    };\n    return { errorMap: customMap, description };\n}\nexport class ZodType {\n    get description() {\n        return this._def.description;\n    }\n    _getType(input) {\n        return getParsedType(input.data);\n    }\n    _getOrReturnCtx(input, ctx) {\n        return (ctx || {\n            common: input.parent.common,\n            data: input.data,\n            parsedType: getParsedType(input.data),\n            schemaErrorMap: this._def.errorMap,\n            path: input.path,\n            parent: input.parent,\n        });\n    }\n    _processInputParams(input) {\n        return {\n            status: new ParseStatus(),\n            ctx: {\n                common: input.parent.common,\n                data: input.data,\n                parsedType: getParsedType(input.data),\n                schemaErrorMap: this._def.errorMap,\n                path: input.path,\n                parent: input.parent,\n            },\n        };\n    }\n    _parseSync(input) {\n        const result = this._parse(input);\n        if (isAsync(result)) {\n            throw new Error(\"Synchronous parse encountered promise.\");\n        }\n        return result;\n    }\n    _parseAsync(input) {\n        const result = this._parse(input);\n        return Promise.resolve(result);\n    }\n    parse(data, params) {\n        const result = this.safeParse(data, params);\n        if (result.success)\n            return result.data;\n        throw result.error;\n    }\n    safeParse(data, params) {\n        const ctx = {\n            common: {\n                issues: [],\n                async: params?.async ?? false,\n                contextualErrorMap: params?.errorMap,\n            },\n            path: params?.path || [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        const result = this._parseSync({ data, path: ctx.path, parent: ctx });\n        return handleResult(ctx, result);\n    }\n    \"~validate\"(data) {\n        const ctx = {\n            common: {\n                issues: [],\n                async: !!this[\"~standard\"].async,\n            },\n            path: [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        if (!this[\"~standard\"].async) {\n            try {\n                const result = this._parseSync({ data, path: [], parent: ctx });\n                return isValid(result)\n                    ? {\n                        value: result.value,\n                    }\n                    : {\n                        issues: ctx.common.issues,\n                    };\n            }\n            catch (err) {\n                if (err?.message?.toLowerCase()?.includes(\"encountered\")) {\n                    this[\"~standard\"].async = true;\n                }\n                ctx.common = {\n                    issues: [],\n                    async: true,\n                };\n            }\n        }\n        return this._parseAsync({ data, path: [], parent: ctx }).then((result) => isValid(result)\n            ? {\n                value: result.value,\n            }\n            : {\n                issues: ctx.common.issues,\n            });\n    }\n    async parseAsync(data, params) {\n        const result = await this.safeParseAsync(data, params);\n        if (result.success)\n            return result.data;\n        throw result.error;\n    }\n    async safeParseAsync(data, params) {\n        const ctx = {\n            common: {\n                issues: [],\n                contextualErrorMap: params?.errorMap,\n                async: true,\n            },\n            path: params?.path || [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        const maybeAsyncResult = this._parse({ data, path: ctx.path, parent: ctx });\n        const result = await (isAsync(maybeAsyncResult) ? maybeAsyncResult : Promise.resolve(maybeAsyncResult));\n        return handleResult(ctx, result);\n    }\n    refine(check, message) {\n        const getIssueProperties = (val) => {\n            if (typeof message === \"string\" || typeof message === \"undefined\") {\n                return { message };\n            }\n            else if (typeof message === \"function\") {\n                return message(val);\n            }\n            else {\n                return message;\n            }\n        };\n        return this._refinement((val, ctx) => {\n            const result = check(val);\n            const setError = () => ctx.addIssue({\n                code: ZodIssueCode.custom,\n                ...getIssueProperties(val),\n            });\n            if (typeof Promise !== \"undefined\" && result instanceof Promise) {\n                return result.then((data) => {\n                    if (!data) {\n                        setError();\n                        return false;\n                    }\n                    else {\n                        return true;\n                    }\n                });\n            }\n            if (!result) {\n                setError();\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n    }\n    refinement(check, refinementData) {\n        return this._refinement((val, ctx) => {\n            if (!check(val)) {\n                ctx.addIssue(typeof refinementData === \"function\" ? refinementData(val, ctx) : refinementData);\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n    }\n    _refinement(refinement) {\n        return new ZodEffects({\n            schema: this,\n            typeName: ZodFirstPartyTypeKind.ZodEffects,\n            effect: { type: \"refinement\", refinement },\n        });\n    }\n    superRefine(refinement) {\n        return this._refinement(refinement);\n    }\n    constructor(def) {\n        /** Alias of safeParseAsync */\n        this.spa = this.safeParseAsync;\n        this._def = def;\n        this.parse = this.parse.bind(this);\n        this.safeParse = this.safeParse.bind(this);\n        this.parseAsync = this.parseAsync.bind(this);\n        this.safeParseAsync = this.safeParseAsync.bind(this);\n        this.spa = this.spa.bind(this);\n        this.refine = this.refine.bind(this);\n        this.refinement = this.refinement.bind(this);\n        this.superRefine = this.superRefine.bind(this);\n        this.optional = this.optional.bind(this);\n        this.nullable = this.nullable.bind(this);\n        this.nullish = this.nullish.bind(this);\n        this.array = this.array.bind(this);\n        this.promise = this.promise.bind(this);\n        this.or = this.or.bind(this);\n        this.and = this.and.bind(this);\n        this.transform = this.transform.bind(this);\n        this.brand = this.brand.bind(this);\n        this.default = this.default.bind(this);\n        this.catch = this.catch.bind(this);\n        this.describe = this.describe.bind(this);\n        this.pipe = this.pipe.bind(this);\n        this.readonly = this.readonly.bind(this);\n        this.isNullable = this.isNullable.bind(this);\n        this.isOptional = this.isOptional.bind(this);\n        this[\"~standard\"] = {\n            version: 1,\n            vendor: \"zod\",\n            validate: (data) => this[\"~validate\"](data),\n        };\n    }\n    optional() {\n        return ZodOptional.create(this, this._def);\n    }\n    nullable() {\n        return ZodNullable.create(this, this._def);\n    }\n    nullish() {\n        return this.nullable().optional();\n    }\n    array() {\n        return ZodArray.create(this);\n    }\n    promise() {\n        return ZodPromise.create(this, this._def);\n    }\n    or(option) {\n        return ZodUnion.create([this, option], this._def);\n    }\n    and(incoming) {\n        return ZodIntersection.create(this, incoming, this._def);\n    }\n    transform(transform) {\n        return new ZodEffects({\n            ...processCreateParams(this._def),\n            schema: this,\n            typeName: ZodFirstPartyTypeKind.ZodEffects,\n            effect: { type: \"transform\", transform },\n        });\n    }\n    default(def) {\n        const defaultValueFunc = typeof def === \"function\" ? def : () => def;\n        return new ZodDefault({\n            ...processCreateParams(this._def),\n            innerType: this,\n            defaultValue: defaultValueFunc,\n            typeName: ZodFirstPartyTypeKind.ZodDefault,\n        });\n    }\n    brand() {\n        return new ZodBranded({\n            typeName: ZodFirstPartyTypeKind.ZodBranded,\n            type: this,\n            ...processCreateParams(this._def),\n        });\n    }\n    catch(def) {\n        const catchValueFunc = typeof def === \"function\" ? def : () => def;\n        return new ZodCatch({\n            ...processCreateParams(this._def),\n            innerType: this,\n            catchValue: catchValueFunc,\n            typeName: ZodFirstPartyTypeKind.ZodCatch,\n        });\n    }\n    describe(description) {\n        const This = this.constructor;\n        return new This({\n            ...this._def,\n            description,\n        });\n    }\n    pipe(target) {\n        return ZodPipeline.create(this, target);\n    }\n    readonly() {\n        return ZodReadonly.create(this);\n    }\n    isOptional() {\n        return this.safeParse(undefined).success;\n    }\n    isNullable() {\n        return this.safeParse(null).success;\n    }\n}\nconst cuidRegex = /^c[^\\s-]{8,}$/i;\nconst cuid2Regex = /^[0-9a-z]+$/;\nconst ulidRegex = /^[0-9A-HJKMNP-TV-Z]{26}$/i;\n// const uuidRegex =\n//   /^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i;\nconst uuidRegex = /^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$/i;\nconst nanoidRegex = /^[a-z0-9_-]{21}$/i;\nconst jwtRegex = /^[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]*$/;\nconst durationRegex = /^[-+]?P(?!$)(?:(?:[-+]?\\d+Y)|(?:[-+]?\\d+[.,]\\d+Y$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:(?:[-+]?\\d+W)|(?:[-+]?\\d+[.,]\\d+W$))?(?:(?:[-+]?\\d+D)|(?:[-+]?\\d+[.,]\\d+D$))?(?:T(?=[\\d+-])(?:(?:[-+]?\\d+H)|(?:[-+]?\\d+[.,]\\d+H$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:[-+]?\\d+(?:[.,]\\d+)?S)?)??$/;\n// from https://stackoverflow.com/a/46181/1550155\n// old version: too slow, didn't support unicode\n// const emailRegex = /^((([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))$/i;\n//old email regex\n// const emailRegex = /^(([^<>()[\\].,;:\\s@\"]+(\\.[^<>()[\\].,;:\\s@\"]+)*)|(\".+\"))@((?!-)([^<>()[\\].,;:\\s@\"]+\\.)+[^<>()[\\].,;:\\s@\"]{1,})[^-<>()[\\].,;:\\s@\"]$/i;\n// eslint-disable-next-line\n// const emailRegex =\n//   /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\])|(\\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\\.[A-Za-z]{2,})+))$/;\n// const emailRegex =\n//   /^[a-zA-Z0-9\\.\\!\\#\\$\\%\\&\\'\\*\\+\\/\\=\\?\\^\\_\\`\\{\\|\\}\\~\\-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n// const emailRegex =\n//   /^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])$/i;\nconst emailRegex = /^(?!\\.)(?!.*\\.\\.)([A-Z0-9_'+\\-\\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\\-]*\\.)+[A-Z]{2,}$/i;\n// const emailRegex =\n//   /^[a-z0-9.!#$%&\u2019*+/=?^_`{|}~-]+@[a-z0-9-]+(?:\\.[a-z0-9\\-]+)*$/i;\n// from https://thekevinscott.com/emojis-in-javascript/#writing-a-regular-expression\nconst _emojiRegex = `^(\\\\p{Extended_Pictographic}|\\\\p{Emoji_Component})+$`;\nlet emojiRegex;\n// faster, simpler, safer\nconst ipv4Regex = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/;\nconst ipv4CidrRegex = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\/(3[0-2]|[12]?[0-9])$/;\n// const ipv6Regex =\n// /^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;\nconst ipv6Regex = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/;\nconst ipv6CidrRegex = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/;\n// https://stackoverflow.com/questions/7860392/determine-if-string-is-in-base64-using-javascript\nconst base64Regex = /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/;\n// https://base64.guru/standards/base64url\nconst base64urlRegex = /^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/;\n// simple\n// const dateRegexSource = `\\\\d{4}-\\\\d{2}-\\\\d{2}`;\n// no leap year validation\n// const dateRegexSource = `\\\\d{4}-((0[13578]|10|12)-31|(0[13-9]|1[0-2])-30|(0[1-9]|1[0-2])-(0[1-9]|1\\\\d|2\\\\d))`;\n// with leap year validation\nconst dateRegexSource = `((\\\\d\\\\d[2468][048]|\\\\d\\\\d[13579][26]|\\\\d\\\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\\\d|30)|(02)-(0[1-9]|1\\\\d|2[0-8])))`;\nconst dateRegex = new RegExp(`^${dateRegexSource}$`);\nfunction timeRegexSource(args) {\n    let secondsRegexSource = `[0-5]\\\\d`;\n    if (args.precision) {\n        secondsRegexSource = `${secondsRegexSource}\\\\.\\\\d{${args.precision}}`;\n    }\n    else if (args.precision == null) {\n        secondsRegexSource = `${secondsRegexSource}(\\\\.\\\\d+)?`;\n    }\n    const secondsQuantifier = args.precision ? \"+\" : \"?\"; // require seconds if precision is nonzero\n    return `([01]\\\\d|2[0-3]):[0-5]\\\\d(:${secondsRegexSource})${secondsQuantifier}`;\n}\nfunction timeRegex(args) {\n    return new RegExp(`^${timeRegexSource(args)}$`);\n}\n// Adapted from https://stackoverflow.com/a/3143231\nexport function datetimeRegex(args) {\n    let regex = `${dateRegexSource}T${timeRegexSource(args)}`;\n    const opts = [];\n    opts.push(args.local ? `Z?` : `Z`);\n    if (args.offset)\n        opts.push(`([+-]\\\\d{2}:?\\\\d{2})`);\n    regex = `${regex}(${opts.join(\"|\")})`;\n    return new RegExp(`^${regex}$`);\n}\nfunction isValidIP(ip, version) {\n    if ((version === \"v4\" || !version) && ipv4Regex.test(ip)) {\n        return true;\n    }\n    if ((version === \"v6\" || !version) && ipv6Regex.test(ip)) {\n        return true;\n    }\n    return false;\n}\nfunction isValidJWT(jwt, alg) {\n    if (!jwtRegex.test(jwt))\n        return false;\n    try {\n        const [header] = jwt.split(\".\");\n        if (!header)\n            return false;\n        // Convert base64url to base64\n        const base64 = header\n            .replace(/-/g, \"+\")\n            .replace(/_/g, \"/\")\n            .padEnd(header.length + ((4 - (header.length % 4)) % 4), \"=\");\n        const decoded = JSON.parse(atob(base64));\n        if (typeof decoded !== \"object\" || decoded === null)\n            return false;\n        if (\"typ\" in decoded && decoded?.typ !== \"JWT\")\n            return false;\n        if (!decoded.alg)\n            return false;\n        if (alg && decoded.alg !== alg)\n            return false;\n        return true;\n    }\n    catch {\n        return false;\n    }\n}\nfunction isValidCidr(ip, version) {\n    if ((version === \"v4\" || !version) && ipv4CidrRegex.test(ip)) {\n        return true;\n    }\n    if ((version === \"v6\" || !version) && ipv6CidrRegex.test(ip)) {\n        return true;\n    }\n    return false;\n}\nexport class ZodString extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = String(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.string) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.string,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const status = new ParseStatus();\n        let ctx = undefined;\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                if (input.data.length < check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        minimum: check.value,\n                        type: \"string\",\n                        inclusive: true,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                if (input.data.length > check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        maximum: check.value,\n                        type: \"string\",\n                        inclusive: true,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"length\") {\n                const tooBig = input.data.length > check.value;\n                const tooSmall = input.data.length < check.value;\n                if (tooBig || tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    if (tooBig) {\n                        addIssueToContext(ctx, {\n                            code: ZodIssueCode.too_big,\n                            maximum: check.value,\n                            type: \"string\",\n                            inclusive: true,\n                            exact: true,\n                            message: check.message,\n                        });\n                    }\n                    else if (tooSmall) {\n                        addIssueToContext(ctx, {\n                            code: ZodIssueCode.too_small,\n                            minimum: check.value,\n                            type: \"string\",\n                            inclusive: true,\n                            exact: true,\n                            message: check.message,\n                        });\n                    }\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"email\") {\n                if (!emailRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"email\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"emoji\") {\n                if (!emojiRegex) {\n                    emojiRegex = new RegExp(_emojiRegex, \"u\");\n                }\n                if (!emojiRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"emoji\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"uuid\") {\n                if (!uuidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"uuid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"nanoid\") {\n                if (!nanoidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"nanoid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cuid\") {\n                if (!cuidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cuid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cuid2\") {\n                if (!cuid2Regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cuid2\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"ulid\") {\n                if (!ulidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"ulid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"url\") {\n                try {\n                    new URL(input.data);\n                }\n                catch {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"url\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"regex\") {\n                check.regex.lastIndex = 0;\n                const testResult = check.regex.test(input.data);\n                if (!testResult) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"regex\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"trim\") {\n                input.data = input.data.trim();\n            }\n            else if (check.kind === \"includes\") {\n                if (!input.data.includes(check.value, check.position)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { includes: check.value, position: check.position },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"toLowerCase\") {\n                input.data = input.data.toLowerCase();\n            }\n            else if (check.kind === \"toUpperCase\") {\n                input.data = input.data.toUpperCase();\n            }\n            else if (check.kind === \"startsWith\") {\n                if (!input.data.startsWith(check.value)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { startsWith: check.value },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"endsWith\") {\n                if (!input.data.endsWith(check.value)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { endsWith: check.value },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"datetime\") {\n                const regex = datetimeRegex(check);\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: \"datetime\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"date\") {\n                const regex = dateRegex;\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: \"date\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"time\") {\n                const regex = timeRegex(check);\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: \"time\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"duration\") {\n                if (!durationRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"duration\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"ip\") {\n                if (!isValidIP(input.data, check.version)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"ip\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"jwt\") {\n                if (!isValidJWT(input.data, check.alg)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"jwt\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cidr\") {\n                if (!isValidCidr(input.data, check.version)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cidr\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"base64\") {\n                if (!base64Regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"base64\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"base64url\") {\n                if (!base64urlRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"base64url\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    _regex(regex, validation, message) {\n        return this.refinement((data) => regex.test(data), {\n            validation,\n            code: ZodIssueCode.invalid_string,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    _addCheck(check) {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    email(message) {\n        return this._addCheck({ kind: \"email\", ...errorUtil.errToObj(message) });\n    }\n    url(message) {\n        return this._addCheck({ kind: \"url\", ...errorUtil.errToObj(message) });\n    }\n    emoji(message) {\n        return this._addCheck({ kind: \"emoji\", ...errorUtil.errToObj(message) });\n    }\n    uuid(message) {\n        return this._addCheck({ kind: \"uuid\", ...errorUtil.errToObj(message) });\n    }\n    nanoid(message) {\n        return this._addCheck({ kind: \"nanoid\", ...errorUtil.errToObj(message) });\n    }\n    cuid(message) {\n        return this._addCheck({ kind: \"cuid\", ...errorUtil.errToObj(message) });\n    }\n    cuid2(message) {\n        return this._addCheck({ kind: \"cuid2\", ...errorUtil.errToObj(message) });\n    }\n    ulid(message) {\n        return this._addCheck({ kind: \"ulid\", ...errorUtil.errToObj(message) });\n    }\n    base64(message) {\n        return this._addCheck({ kind: \"base64\", ...errorUtil.errToObj(message) });\n    }\n    base64url(message) {\n        // base64url encoding is a modification of base64 that can safely be used in URLs and filenames\n        return this._addCheck({\n            kind: \"base64url\",\n            ...errorUtil.errToObj(message),\n        });\n    }\n    jwt(options) {\n        return this._addCheck({ kind: \"jwt\", ...errorUtil.errToObj(options) });\n    }\n    ip(options) {\n        return this._addCheck({ kind: \"ip\", ...errorUtil.errToObj(options) });\n    }\n    cidr(options) {\n        return this._addCheck({ kind: \"cidr\", ...errorUtil.errToObj(options) });\n    }\n    datetime(options) {\n        if (typeof options === \"string\") {\n            return this._addCheck({\n                kind: \"datetime\",\n                precision: null,\n                offset: false,\n                local: false,\n                message: options,\n            });\n        }\n        return this._addCheck({\n            kind: \"datetime\",\n            precision: typeof options?.precision === \"undefined\" ? null : options?.precision,\n            offset: options?.offset ?? false,\n            local: options?.local ?? false,\n            ...errorUtil.errToObj(options?.message),\n        });\n    }\n    date(message) {\n        return this._addCheck({ kind: \"date\", message });\n    }\n    time(options) {\n        if (typeof options === \"string\") {\n            return this._addCheck({\n                kind: \"time\",\n                precision: null,\n                message: options,\n            });\n        }\n        return this._addCheck({\n            kind: \"time\",\n            precision: typeof options?.precision === \"undefined\" ? null : options?.precision,\n            ...errorUtil.errToObj(options?.message),\n        });\n    }\n    duration(message) {\n        return this._addCheck({ kind: \"duration\", ...errorUtil.errToObj(message) });\n    }\n    regex(regex, message) {\n        return this._addCheck({\n            kind: \"regex\",\n            regex: regex,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    includes(value, options) {\n        return this._addCheck({\n            kind: \"includes\",\n            value: value,\n            position: options?.position,\n            ...errorUtil.errToObj(options?.message),\n        });\n    }\n    startsWith(value, message) {\n        return this._addCheck({\n            kind: \"startsWith\",\n            value: value,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    endsWith(value, message) {\n        return this._addCheck({\n            kind: \"endsWith\",\n            value: value,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    min(minLength, message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: minLength,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    max(maxLength, message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: maxLength,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    length(len, message) {\n        return this._addCheck({\n            kind: \"length\",\n            value: len,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    /**\n     * Equivalent to `.min(1)`\n     */\n    nonempty(message) {\n        return this.min(1, errorUtil.errToObj(message));\n    }\n    trim() {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"trim\" }],\n        });\n    }\n    toLowerCase() {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"toLowerCase\" }],\n        });\n    }\n    toUpperCase() {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"toUpperCase\" }],\n        });\n    }\n    get isDatetime() {\n        return !!this._def.checks.find((ch) => ch.kind === \"datetime\");\n    }\n    get isDate() {\n        return !!this._def.checks.find((ch) => ch.kind === \"date\");\n    }\n    get isTime() {\n        return !!this._def.checks.find((ch) => ch.kind === \"time\");\n    }\n    get isDuration() {\n        return !!this._def.checks.find((ch) => ch.kind === \"duration\");\n    }\n    get isEmail() {\n        return !!this._def.checks.find((ch) => ch.kind === \"email\");\n    }\n    get isURL() {\n        return !!this._def.checks.find((ch) => ch.kind === \"url\");\n    }\n    get isEmoji() {\n        return !!this._def.checks.find((ch) => ch.kind === \"emoji\");\n    }\n    get isUUID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"uuid\");\n    }\n    get isNANOID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"nanoid\");\n    }\n    get isCUID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cuid\");\n    }\n    get isCUID2() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cuid2\");\n    }\n    get isULID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"ulid\");\n    }\n    get isIP() {\n        return !!this._def.checks.find((ch) => ch.kind === \"ip\");\n    }\n    get isCIDR() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cidr\");\n    }\n    get isBase64() {\n        return !!this._def.checks.find((ch) => ch.kind === \"base64\");\n    }\n    get isBase64url() {\n        // base64url encoding is a modification of base64 that can safely be used in URLs and filenames\n        return !!this._def.checks.find((ch) => ch.kind === \"base64url\");\n    }\n    get minLength() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxLength() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n}\nZodString.create = (params) => {\n    return new ZodString({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodString,\n        coerce: params?.coerce ?? false,\n        ...processCreateParams(params),\n    });\n};\n// https://stackoverflow.com/questions/3966484/why-does-modulus-operator-return-fractional-number-in-javascript/31711034#31711034\nfunction floatSafeRemainder(val, step) {\n    const valDecCount = (val.toString().split(\".\")[1] || \"\").length;\n    const stepDecCount = (step.toString().split(\".\")[1] || \"\").length;\n    const decCount = valDecCount > stepDecCount ? valDecCount : stepDecCount;\n    const valInt = Number.parseInt(val.toFixed(decCount).replace(\".\", \"\"));\n    const stepInt = Number.parseInt(step.toFixed(decCount).replace(\".\", \"\"));\n    return (valInt % stepInt) / 10 ** decCount;\n}\nexport class ZodNumber extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.min = this.gte;\n        this.max = this.lte;\n        this.step = this.multipleOf;\n    }\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = Number(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.number) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.number,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        let ctx = undefined;\n        const status = new ParseStatus();\n        for (const check of this._def.checks) {\n            if (check.kind === \"int\") {\n                if (!util.isInteger(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_type,\n                        expected: \"integer\",\n                        received: \"float\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"min\") {\n                const tooSmall = check.inclusive ? input.data < check.value : input.data <= check.value;\n                if (tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        minimum: check.value,\n                        type: \"number\",\n                        inclusive: check.inclusive,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                const tooBig = check.inclusive ? input.data > check.value : input.data >= check.value;\n                if (tooBig) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        maximum: check.value,\n                        type: \"number\",\n                        inclusive: check.inclusive,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"multipleOf\") {\n                if (floatSafeRemainder(input.data, check.value) !== 0) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_multiple_of,\n                        multipleOf: check.value,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"finite\") {\n                if (!Number.isFinite(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_finite,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    gte(value, message) {\n        return this.setLimit(\"min\", value, true, errorUtil.toString(message));\n    }\n    gt(value, message) {\n        return this.setLimit(\"min\", value, false, errorUtil.toString(message));\n    }\n    lte(value, message) {\n        return this.setLimit(\"max\", value, true, errorUtil.toString(message));\n    }\n    lt(value, message) {\n        return this.setLimit(\"max\", value, false, errorUtil.toString(message));\n    }\n    setLimit(kind, value, inclusive, message) {\n        return new ZodNumber({\n            ...this._def,\n            checks: [\n                ...this._def.checks,\n                {\n                    kind,\n                    value,\n                    inclusive,\n                    message: errorUtil.toString(message),\n                },\n            ],\n        });\n    }\n    _addCheck(check) {\n        return new ZodNumber({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    int(message) {\n        return this._addCheck({\n            kind: \"int\",\n            message: errorUtil.toString(message),\n        });\n    }\n    positive(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: 0,\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    negative(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: 0,\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonpositive(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: 0,\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonnegative(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: 0,\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    multipleOf(value, message) {\n        return this._addCheck({\n            kind: \"multipleOf\",\n            value: value,\n            message: errorUtil.toString(message),\n        });\n    }\n    finite(message) {\n        return this._addCheck({\n            kind: \"finite\",\n            message: errorUtil.toString(message),\n        });\n    }\n    safe(message) {\n        return this._addCheck({\n            kind: \"min\",\n            inclusive: true,\n            value: Number.MIN_SAFE_INTEGER,\n            message: errorUtil.toString(message),\n        })._addCheck({\n            kind: \"max\",\n            inclusive: true,\n            value: Number.MAX_SAFE_INTEGER,\n            message: errorUtil.toString(message),\n        });\n    }\n    get minValue() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxValue() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n    get isInt() {\n        return !!this._def.checks.find((ch) => ch.kind === \"int\" || (ch.kind === \"multipleOf\" && util.isInteger(ch.value)));\n    }\n    get isFinite() {\n        let max = null;\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"finite\" || ch.kind === \"int\" || ch.kind === \"multipleOf\") {\n                return true;\n            }\n            else if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n            else if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return Number.isFinite(min) && Number.isFinite(max);\n    }\n}\nZodNumber.create = (params) => {\n    return new ZodNumber({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodNumber,\n        coerce: params?.coerce || false,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodBigInt extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.min = this.gte;\n        this.max = this.lte;\n    }\n    _parse(input) {\n        if (this._def.coerce) {\n            try {\n                input.data = BigInt(input.data);\n            }\n            catch {\n                return this._getInvalidInput(input);\n            }\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.bigint) {\n            return this._getInvalidInput(input);\n        }\n        let ctx = undefined;\n        const status = new ParseStatus();\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                const tooSmall = check.inclusive ? input.data < check.value : input.data <= check.value;\n                if (tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        type: \"bigint\",\n                        minimum: check.value,\n                        inclusive: check.inclusive,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                const tooBig = check.inclusive ? input.data > check.value : input.data >= check.value;\n                if (tooBig) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        type: \"bigint\",\n                        maximum: check.value,\n                        inclusive: check.inclusive,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"multipleOf\") {\n                if (input.data % check.value !== BigInt(0)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_multiple_of,\n                        multipleOf: check.value,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    _getInvalidInput(input) {\n        const ctx = this._getOrReturnCtx(input);\n        addIssueToContext(ctx, {\n            code: ZodIssueCode.invalid_type,\n            expected: ZodParsedType.bigint,\n            received: ctx.parsedType,\n        });\n        return INVALID;\n    }\n    gte(value, message) {\n        return this.setLimit(\"min\", value, true, errorUtil.toString(message));\n    }\n    gt(value, message) {\n        return this.setLimit(\"min\", value, false, errorUtil.toString(message));\n    }\n    lte(value, message) {\n        return this.setLimit(\"max\", value, true, errorUtil.toString(message));\n    }\n    lt(value, message) {\n        return this.setLimit(\"max\", value, false, errorUtil.toString(message));\n    }\n    setLimit(kind, value, inclusive, message) {\n        return new ZodBigInt({\n            ...this._def,\n            checks: [\n                ...this._def.checks,\n                {\n                    kind,\n                    value,\n                    inclusive,\n                    message: errorUtil.toString(message),\n                },\n            ],\n        });\n    }\n    _addCheck(check) {\n        return new ZodBigInt({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    positive(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: BigInt(0),\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    negative(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: BigInt(0),\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonpositive(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: BigInt(0),\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonnegative(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: BigInt(0),\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    multipleOf(value, message) {\n        return this._addCheck({\n            kind: \"multipleOf\",\n            value,\n            message: errorUtil.toString(message),\n        });\n    }\n    get minValue() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxValue() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n}\nZodBigInt.create = (params) => {\n    return new ZodBigInt({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodBigInt,\n        coerce: params?.coerce ?? false,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodBoolean extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = Boolean(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.boolean) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.boolean,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodBoolean.create = (params) => {\n    return new ZodBoolean({\n        typeName: ZodFirstPartyTypeKind.ZodBoolean,\n        coerce: params?.coerce || false,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodDate extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = new Date(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.date) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.date,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (Number.isNaN(input.data.getTime())) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_date,\n            });\n            return INVALID;\n        }\n        const status = new ParseStatus();\n        let ctx = undefined;\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                if (input.data.getTime() < check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        message: check.message,\n                        inclusive: true,\n                        exact: false,\n                        minimum: check.value,\n                        type: \"date\",\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                if (input.data.getTime() > check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        message: check.message,\n                        inclusive: true,\n                        exact: false,\n                        maximum: check.value,\n                        type: \"date\",\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return {\n            status: status.value,\n            value: new Date(input.data.getTime()),\n        };\n    }\n    _addCheck(check) {\n        return new ZodDate({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    min(minDate, message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: minDate.getTime(),\n            message: errorUtil.toString(message),\n        });\n    }\n    max(maxDate, message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: maxDate.getTime(),\n            message: errorUtil.toString(message),\n        });\n    }\n    get minDate() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min != null ? new Date(min) : null;\n    }\n    get maxDate() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max != null ? new Date(max) : null;\n    }\n}\nZodDate.create = (params) => {\n    return new ZodDate({\n        checks: [],\n        coerce: params?.coerce || false,\n        typeName: ZodFirstPartyTypeKind.ZodDate,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodSymbol extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.symbol) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.symbol,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodSymbol.create = (params) => {\n    return new ZodSymbol({\n        typeName: ZodFirstPartyTypeKind.ZodSymbol,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodUndefined extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.undefined) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.undefined,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodUndefined.create = (params) => {\n    return new ZodUndefined({\n        typeName: ZodFirstPartyTypeKind.ZodUndefined,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodNull extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.null) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.null,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodNull.create = (params) => {\n    return new ZodNull({\n        typeName: ZodFirstPartyTypeKind.ZodNull,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodAny extends ZodType {\n    constructor() {\n        super(...arguments);\n        // to prevent instances of other classes from extending ZodAny. this causes issues with catchall in ZodObject.\n        this._any = true;\n    }\n    _parse(input) {\n        return OK(input.data);\n    }\n}\nZodAny.create = (params) => {\n    return new ZodAny({\n        typeName: ZodFirstPartyTypeKind.ZodAny,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodUnknown extends ZodType {\n    constructor() {\n        super(...arguments);\n        // required\n        this._unknown = true;\n    }\n    _parse(input) {\n        return OK(input.data);\n    }\n}\nZodUnknown.create = (params) => {\n    return new ZodUnknown({\n        typeName: ZodFirstPartyTypeKind.ZodUnknown,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodNever extends ZodType {\n    _parse(input) {\n        const ctx = this._getOrReturnCtx(input);\n        addIssueToContext(ctx, {\n            code: ZodIssueCode.invalid_type,\n            expected: ZodParsedType.never,\n            received: ctx.parsedType,\n        });\n        return INVALID;\n    }\n}\nZodNever.create = (params) => {\n    return new ZodNever({\n        typeName: ZodFirstPartyTypeKind.ZodNever,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodVoid extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.undefined) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.void,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodVoid.create = (params) => {\n    return new ZodVoid({\n        typeName: ZodFirstPartyTypeKind.ZodVoid,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodArray extends ZodType {\n    _parse(input) {\n        const { ctx, status } = this._processInputParams(input);\n        const def = this._def;\n        if (ctx.parsedType !== ZodParsedType.array) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.array,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (def.exactLength !== null) {\n            const tooBig = ctx.data.length > def.exactLength.value;\n            const tooSmall = ctx.data.length < def.exactLength.value;\n            if (tooBig || tooSmall) {\n                addIssueToContext(ctx, {\n                    code: tooBig ? ZodIssueCode.too_big : ZodIssueCode.too_small,\n                    minimum: (tooSmall ? def.exactLength.value : undefined),\n                    maximum: (tooBig ? def.exactLength.value : undefined),\n                    type: \"array\",\n                    inclusive: true,\n                    exact: true,\n                    message: def.exactLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.minLength !== null) {\n            if (ctx.data.length < def.minLength.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_small,\n                    minimum: def.minLength.value,\n                    type: \"array\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.minLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.maxLength !== null) {\n            if (ctx.data.length > def.maxLength.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_big,\n                    maximum: def.maxLength.value,\n                    type: \"array\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.maxLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (ctx.common.async) {\n            return Promise.all([...ctx.data].map((item, i) => {\n                return def.type._parseAsync(new ParseInputLazyPath(ctx, item, ctx.path, i));\n            })).then((result) => {\n                return ParseStatus.mergeArray(status, result);\n            });\n        }\n        const result = [...ctx.data].map((item, i) => {\n            return def.type._parseSync(new ParseInputLazyPath(ctx, item, ctx.path, i));\n        });\n        return ParseStatus.mergeArray(status, result);\n    }\n    get element() {\n        return this._def.type;\n    }\n    min(minLength, message) {\n        return new ZodArray({\n            ...this._def,\n            minLength: { value: minLength, message: errorUtil.toString(message) },\n        });\n    }\n    max(maxLength, message) {\n        return new ZodArray({\n            ...this._def,\n            maxLength: { value: maxLength, message: errorUtil.toString(message) },\n        });\n    }\n    length(len, message) {\n        return new ZodArray({\n            ...this._def,\n            exactLength: { value: len, message: errorUtil.toString(message) },\n        });\n    }\n    nonempty(message) {\n        return this.min(1, message);\n    }\n}\nZodArray.create = (schema, params) => {\n    return new ZodArray({\n        type: schema,\n        minLength: null,\n        maxLength: null,\n        exactLength: null,\n        typeName: ZodFirstPartyTypeKind.ZodArray,\n        ...processCreateParams(params),\n    });\n};\nfunction deepPartialify(schema) {\n    if (schema instanceof ZodObject) {\n        const newShape = {};\n        for (const key in schema.shape) {\n            const fieldSchema = schema.shape[key];\n            newShape[key] = ZodOptional.create(deepPartialify(fieldSchema));\n        }\n        return new ZodObject({\n            ...schema._def,\n            shape: () => newShape,\n        });\n    }\n    else if (schema instanceof ZodArray) {\n        return new ZodArray({\n            ...schema._def,\n            type: deepPartialify(schema.element),\n        });\n    }\n    else if (schema instanceof ZodOptional) {\n        return ZodOptional.create(deepPartialify(schema.unwrap()));\n    }\n    else if (schema instanceof ZodNullable) {\n        return ZodNullable.create(deepPartialify(schema.unwrap()));\n    }\n    else if (schema instanceof ZodTuple) {\n        return ZodTuple.create(schema.items.map((item) => deepPartialify(item)));\n    }\n    else {\n        return schema;\n    }\n}\nexport class ZodObject extends ZodType {\n    constructor() {\n        super(...arguments);\n        this._cached = null;\n        /**\n         * @deprecated In most cases, this is no longer needed - unknown properties are now silently stripped.\n         * If you want to pass through unknown properties, use `.passthrough()` instead.\n         */\n        this.nonstrict = this.passthrough;\n        // extend<\n        //   Augmentation extends ZodRawShape,\n        //   NewOutput extends util.flatten<{\n        //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation\n        //       ? Augmentation[k][\"_output\"]\n        //       : k extends keyof Output\n        //       ? Output[k]\n        //       : never;\n        //   }>,\n        //   NewInput extends util.flatten<{\n        //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation\n        //       ? Augmentation[k][\"_input\"]\n        //       : k extends keyof Input\n        //       ? Input[k]\n        //       : never;\n        //   }>\n        // >(\n        //   augmentation: Augmentation\n        // ): ZodObject<\n        //   extendShape<T, Augmentation>,\n        //   UnknownKeys,\n        //   Catchall,\n        //   NewOutput,\n        //   NewInput\n        // > {\n        //   return new ZodObject({\n        //     ...this._def,\n        //     shape: () => ({\n        //       ...this._def.shape(),\n        //       ...augmentation,\n        //     }),\n        //   }) as any;\n        // }\n        /**\n         * @deprecated Use `.extend` instead\n         *  */\n        this.augment = this.extend;\n    }\n    _getCached() {\n        if (this._cached !== null)\n            return this._cached;\n        const shape = this._def.shape();\n        const keys = util.objectKeys(shape);\n        this._cached = { shape, keys };\n        return this._cached;\n    }\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.object) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const { status, ctx } = this._processInputParams(input);\n        const { shape, keys: shapeKeys } = this._getCached();\n        const extraKeys = [];\n        if (!(this._def.catchall instanceof ZodNever && this._def.unknownKeys === \"strip\")) {\n            for (const key in ctx.data) {\n                if (!shapeKeys.includes(key)) {\n                    extraKeys.push(key);\n                }\n            }\n        }\n        const pairs = [];\n        for (const key of shapeKeys) {\n            const keyValidator = shape[key];\n            const value = ctx.data[key];\n            pairs.push({\n                key: { status: \"valid\", value: key },\n                value: keyValidator._parse(new ParseInputLazyPath(ctx, value, ctx.path, key)),\n                alwaysSet: key in ctx.data,\n            });\n        }\n        if (this._def.catchall instanceof ZodNever) {\n            const unknownKeys = this._def.unknownKeys;\n            if (unknownKeys === \"passthrough\") {\n                for (const key of extraKeys) {\n                    pairs.push({\n                        key: { status: \"valid\", value: key },\n                        value: { status: \"valid\", value: ctx.data[key] },\n                    });\n                }\n            }\n            else if (unknownKeys === \"strict\") {\n                if (extraKeys.length > 0) {\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.unrecognized_keys,\n                        keys: extraKeys,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (unknownKeys === \"strip\") {\n            }\n            else {\n                throw new Error(`Internal ZodObject error: invalid unknownKeys value.`);\n            }\n        }\n        else {\n            // run catchall validation\n            const catchall = this._def.catchall;\n            for (const key of extraKeys) {\n                const value = ctx.data[key];\n                pairs.push({\n                    key: { status: \"valid\", value: key },\n                    value: catchall._parse(new ParseInputLazyPath(ctx, value, ctx.path, key) //, ctx.child(key), value, getParsedType(value)\n                    ),\n                    alwaysSet: key in ctx.data,\n                });\n            }\n        }\n        if (ctx.common.async) {\n            return Promise.resolve()\n                .then(async () => {\n                const syncPairs = [];\n                for (const pair of pairs) {\n                    const key = await pair.key;\n                    const value = await pair.value;\n                    syncPairs.push({\n                        key,\n                        value,\n                        alwaysSet: pair.alwaysSet,\n                    });\n                }\n                return syncPairs;\n            })\n                .then((syncPairs) => {\n                return ParseStatus.mergeObjectSync(status, syncPairs);\n            });\n        }\n        else {\n            return ParseStatus.mergeObjectSync(status, pairs);\n        }\n    }\n    get shape() {\n        return this._def.shape();\n    }\n    strict(message) {\n        errorUtil.errToObj;\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"strict\",\n            ...(message !== undefined\n                ? {\n                    errorMap: (issue, ctx) => {\n                        const defaultError = this._def.errorMap?.(issue, ctx).message ?? ctx.defaultError;\n                        if (issue.code === \"unrecognized_keys\")\n                            return {\n                                message: errorUtil.errToObj(message).message ?? defaultError,\n                            };\n                        return {\n                            message: defaultError,\n                        };\n                    },\n                }\n                : {}),\n        });\n    }\n    strip() {\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"strip\",\n        });\n    }\n    passthrough() {\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"passthrough\",\n        });\n    }\n    // const AugmentFactory =\n    //   <Def extends ZodObjectDef>(def: Def) =>\n    //   <Augmentation extends ZodRawShape>(\n    //     augmentation: Augmentation\n    //   ): ZodObject<\n    //     extendShape<ReturnType<Def[\"shape\"]>, Augmentation>,\n    //     Def[\"unknownKeys\"],\n    //     Def[\"catchall\"]\n    //   > => {\n    //     return new ZodObject({\n    //       ...def,\n    //       shape: () => ({\n    //         ...def.shape(),\n    //         ...augmentation,\n    //       }),\n    //     }) as any;\n    //   };\n    extend(augmentation) {\n        return new ZodObject({\n            ...this._def,\n            shape: () => ({\n                ...this._def.shape(),\n                ...augmentation,\n            }),\n        });\n    }\n    /**\n     * Prior to zod@1.0.12 there was a bug in the\n     * inferred type of merged objects. Please\n     * upgrade if you are experiencing issues.\n     */\n    merge(merging) {\n        const merged = new ZodObject({\n            unknownKeys: merging._def.unknownKeys,\n            catchall: merging._def.catchall,\n            shape: () => ({\n                ...this._def.shape(),\n                ...merging._def.shape(),\n            }),\n            typeName: ZodFirstPartyTypeKind.ZodObject,\n        });\n        return merged;\n    }\n    // merge<\n    //   Incoming extends AnyZodObject,\n    //   Augmentation extends Incoming[\"shape\"],\n    //   NewOutput extends {\n    //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation\n    //       ? Augmentation[k][\"_output\"]\n    //       : k extends keyof Output\n    //       ? Output[k]\n    //       : never;\n    //   },\n    //   NewInput extends {\n    //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation\n    //       ? Augmentation[k][\"_input\"]\n    //       : k extends keyof Input\n    //       ? Input[k]\n    //       : never;\n    //   }\n    // >(\n    //   merging: Incoming\n    // ): ZodObject<\n    //   extendShape<T, ReturnType<Incoming[\"_def\"][\"shape\"]>>,\n    //   Incoming[\"_def\"][\"unknownKeys\"],\n    //   Incoming[\"_def\"][\"catchall\"],\n    //   NewOutput,\n    //   NewInput\n    // > {\n    //   const merged: any = new ZodObject({\n    //     unknownKeys: merging._def.unknownKeys,\n    //     catchall: merging._def.catchall,\n    //     shape: () =>\n    //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),\n    //     typeName: ZodFirstPartyTypeKind.ZodObject,\n    //   }) as any;\n    //   return merged;\n    // }\n    setKey(key, schema) {\n        return this.augment({ [key]: schema });\n    }\n    // merge<Incoming extends AnyZodObject>(\n    //   merging: Incoming\n    // ): //ZodObject<T & Incoming[\"_shape\"], UnknownKeys, Catchall> = (merging) => {\n    // ZodObject<\n    //   extendShape<T, ReturnType<Incoming[\"_def\"][\"shape\"]>>,\n    //   Incoming[\"_def\"][\"unknownKeys\"],\n    //   Incoming[\"_def\"][\"catchall\"]\n    // > {\n    //   // const mergedShape = objectUtil.mergeShapes(\n    //   //   this._def.shape(),\n    //   //   merging._def.shape()\n    //   // );\n    //   const merged: any = new ZodObject({\n    //     unknownKeys: merging._def.unknownKeys,\n    //     catchall: merging._def.catchall,\n    //     shape: () =>\n    //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),\n    //     typeName: ZodFirstPartyTypeKind.ZodObject,\n    //   }) as any;\n    //   return merged;\n    // }\n    catchall(index) {\n        return new ZodObject({\n            ...this._def,\n            catchall: index,\n        });\n    }\n    pick(mask) {\n        const shape = {};\n        for (const key of util.objectKeys(mask)) {\n            if (mask[key] && this.shape[key]) {\n                shape[key] = this.shape[key];\n            }\n        }\n        return new ZodObject({\n            ...this._def,\n            shape: () => shape,\n        });\n    }\n    omit(mask) {\n        const shape = {};\n        for (const key of util.objectKeys(this.shape)) {\n            if (!mask[key]) {\n                shape[key] = this.shape[key];\n            }\n        }\n        return new ZodObject({\n            ...this._def,\n            shape: () => shape,\n        });\n    }\n    /**\n     * @deprecated\n     */\n    deepPartial() {\n        return deepPartialify(this);\n    }\n    partial(mask) {\n        const newShape = {};\n        for (const key of util.objectKeys(this.shape)) {\n            const fieldSchema = this.shape[key];\n            if (mask && !mask[key]) {\n                newShape[key] = fieldSchema;\n            }\n            else {\n                newShape[key] = fieldSchema.optional();\n            }\n        }\n        return new ZodObject({\n            ...this._def,\n            shape: () => newShape,\n        });\n    }\n    required(mask) {\n        const newShape = {};\n        for (const key of util.objectKeys(this.shape)) {\n            if (mask && !mask[key]) {\n                newShape[key] = this.shape[key];\n            }\n            else {\n                const fieldSchema = this.shape[key];\n                let newField = fieldSchema;\n                while (newField instanceof ZodOptional) {\n                    newField = newField._def.innerType;\n                }\n                newShape[key] = newField;\n            }\n        }\n        return new ZodObject({\n            ...this._def,\n            shape: () => newShape,\n        });\n    }\n    keyof() {\n        return createZodEnum(util.objectKeys(this.shape));\n    }\n}\nZodObject.create = (shape, params) => {\n    return new ZodObject({\n        shape: () => shape,\n        unknownKeys: \"strip\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nZodObject.strictCreate = (shape, params) => {\n    return new ZodObject({\n        shape: () => shape,\n        unknownKeys: \"strict\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nZodObject.lazycreate = (shape, params) => {\n    return new ZodObject({\n        shape,\n        unknownKeys: \"strip\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodUnion extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const options = this._def.options;\n        function handleResults(results) {\n            // return first issue-free validation if it exists\n            for (const result of results) {\n                if (result.result.status === \"valid\") {\n                    return result.result;\n                }\n            }\n            for (const result of results) {\n                if (result.result.status === \"dirty\") {\n                    // add issues from dirty option\n                    ctx.common.issues.push(...result.ctx.common.issues);\n                    return result.result;\n                }\n            }\n            // return invalid\n            const unionErrors = results.map((result) => new ZodError(result.ctx.common.issues));\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union,\n                unionErrors,\n            });\n            return INVALID;\n        }\n        if (ctx.common.async) {\n            return Promise.all(options.map(async (option) => {\n                const childCtx = {\n                    ...ctx,\n                    common: {\n                        ...ctx.common,\n                        issues: [],\n                    },\n                    parent: null,\n                };\n                return {\n                    result: await option._parseAsync({\n                        data: ctx.data,\n                        path: ctx.path,\n                        parent: childCtx,\n                    }),\n                    ctx: childCtx,\n                };\n            })).then(handleResults);\n        }\n        else {\n            let dirty = undefined;\n            const issues = [];\n            for (const option of options) {\n                const childCtx = {\n                    ...ctx,\n                    common: {\n                        ...ctx.common,\n                        issues: [],\n                    },\n                    parent: null,\n                };\n                const result = option._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: childCtx,\n                });\n                if (result.status === \"valid\") {\n                    return result;\n                }\n                else if (result.status === \"dirty\" && !dirty) {\n                    dirty = { result, ctx: childCtx };\n                }\n                if (childCtx.common.issues.length) {\n                    issues.push(childCtx.common.issues);\n                }\n            }\n            if (dirty) {\n                ctx.common.issues.push(...dirty.ctx.common.issues);\n                return dirty.result;\n            }\n            const unionErrors = issues.map((issues) => new ZodError(issues));\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union,\n                unionErrors,\n            });\n            return INVALID;\n        }\n    }\n    get options() {\n        return this._def.options;\n    }\n}\nZodUnion.create = (types, params) => {\n    return new ZodUnion({\n        options: types,\n        typeName: ZodFirstPartyTypeKind.ZodUnion,\n        ...processCreateParams(params),\n    });\n};\n/////////////////////////////////////////////////////\n/////////////////////////////////////////////////////\n//////////                                 //////////\n//////////      ZodDiscriminatedUnion      //////////\n//////////                                 //////////\n/////////////////////////////////////////////////////\n/////////////////////////////////////////////////////\nconst getDiscriminator = (type) => {\n    if (type instanceof ZodLazy) {\n        return getDiscriminator(type.schema);\n    }\n    else if (type instanceof ZodEffects) {\n        return getDiscriminator(type.innerType());\n    }\n    else if (type instanceof ZodLiteral) {\n        return [type.value];\n    }\n    else if (type instanceof ZodEnum) {\n        return type.options;\n    }\n    else if (type instanceof ZodNativeEnum) {\n        // eslint-disable-next-line ban/ban\n        return util.objectValues(type.enum);\n    }\n    else if (type instanceof ZodDefault) {\n        return getDiscriminator(type._def.innerType);\n    }\n    else if (type instanceof ZodUndefined) {\n        return [undefined];\n    }\n    else if (type instanceof ZodNull) {\n        return [null];\n    }\n    else if (type instanceof ZodOptional) {\n        return [undefined, ...getDiscriminator(type.unwrap())];\n    }\n    else if (type instanceof ZodNullable) {\n        return [null, ...getDiscriminator(type.unwrap())];\n    }\n    else if (type instanceof ZodBranded) {\n        return getDiscriminator(type.unwrap());\n    }\n    else if (type instanceof ZodReadonly) {\n        return getDiscriminator(type.unwrap());\n    }\n    else if (type instanceof ZodCatch) {\n        return getDiscriminator(type._def.innerType);\n    }\n    else {\n        return [];\n    }\n};\nexport class ZodDiscriminatedUnion extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.object) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const discriminator = this.discriminator;\n        const discriminatorValue = ctx.data[discriminator];\n        const option = this.optionsMap.get(discriminatorValue);\n        if (!option) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union_discriminator,\n                options: Array.from(this.optionsMap.keys()),\n                path: [discriminator],\n            });\n            return INVALID;\n        }\n        if (ctx.common.async) {\n            return option._parseAsync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n        }\n        else {\n            return option._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n        }\n    }\n    get discriminator() {\n        return this._def.discriminator;\n    }\n    get options() {\n        return this._def.options;\n    }\n    get optionsMap() {\n        return this._def.optionsMap;\n    }\n    /**\n     * The constructor of the discriminated union schema. Its behaviour is very similar to that of the normal z.union() constructor.\n     * However, it only allows a union of objects, all of which need to share a discriminator property. This property must\n     * have a different value for each object in the union.\n     * @param discriminator the name of the discriminator property\n     * @param types an array of object schemas\n     * @param params\n     */\n    static create(discriminator, options, params) {\n        // Get all the valid discriminator values\n        const optionsMap = new Map();\n        // try {\n        for (const type of options) {\n            const discriminatorValues = getDiscriminator(type.shape[discriminator]);\n            if (!discriminatorValues.length) {\n                throw new Error(`A discriminator value for key \\`${discriminator}\\` could not be extracted from all schema options`);\n            }\n            for (const value of discriminatorValues) {\n                if (optionsMap.has(value)) {\n                    throw new Error(`Discriminator property ${String(discriminator)} has duplicate value ${String(value)}`);\n                }\n                optionsMap.set(value, type);\n            }\n        }\n        return new ZodDiscriminatedUnion({\n            typeName: ZodFirstPartyTypeKind.ZodDiscriminatedUnion,\n            discriminator,\n            options,\n            optionsMap,\n            ...processCreateParams(params),\n        });\n    }\n}\nfunction mergeValues(a, b) {\n    const aType = getParsedType(a);\n    const bType = getParsedType(b);\n    if (a === b) {\n        return { valid: true, data: a };\n    }\n    else if (aType === ZodParsedType.object && bType === ZodParsedType.object) {\n        const bKeys = util.objectKeys(b);\n        const sharedKeys = util.objectKeys(a).filter((key) => bKeys.indexOf(key) !== -1);\n        const newObj = { ...a, ...b };\n        for (const key of sharedKeys) {\n            const sharedValue = mergeValues(a[key], b[key]);\n            if (!sharedValue.valid) {\n                return { valid: false };\n            }\n            newObj[key] = sharedValue.data;\n        }\n        return { valid: true, data: newObj };\n    }\n    else if (aType === ZodParsedType.array && bType === ZodParsedType.array) {\n        if (a.length !== b.length) {\n            return { valid: false };\n        }\n        const newArray = [];\n        for (let index = 0; index < a.length; index++) {\n            const itemA = a[index];\n            const itemB = b[index];\n            const sharedValue = mergeValues(itemA, itemB);\n            if (!sharedValue.valid) {\n                return { valid: false };\n            }\n            newArray.push(sharedValue.data);\n        }\n        return { valid: true, data: newArray };\n    }\n    else if (aType === ZodParsedType.date && bType === ZodParsedType.date && +a === +b) {\n        return { valid: true, data: a };\n    }\n    else {\n        return { valid: false };\n    }\n}\nexport class ZodIntersection extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        const handleParsed = (parsedLeft, parsedRight) => {\n            if (isAborted(parsedLeft) || isAborted(parsedRight)) {\n                return INVALID;\n            }\n            const merged = mergeValues(parsedLeft.value, parsedRight.value);\n            if (!merged.valid) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.invalid_intersection_types,\n                });\n                return INVALID;\n            }\n            if (isDirty(parsedLeft) || isDirty(parsedRight)) {\n                status.dirty();\n            }\n            return { status: status.value, value: merged.data };\n        };\n        if (ctx.common.async) {\n            return Promise.all([\n                this._def.left._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                }),\n                this._def.right._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                }),\n            ]).then(([left, right]) => handleParsed(left, right));\n        }\n        else {\n            return handleParsed(this._def.left._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            }), this._def.right._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            }));\n        }\n    }\n}\nZodIntersection.create = (left, right, params) => {\n    return new ZodIntersection({\n        left: left,\n        right: right,\n        typeName: ZodFirstPartyTypeKind.ZodIntersection,\n        ...processCreateParams(params),\n    });\n};\n// type ZodTupleItems = [ZodTypeAny, ...ZodTypeAny[]];\nexport class ZodTuple extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.array) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.array,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (ctx.data.length < this._def.items.length) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.too_small,\n                minimum: this._def.items.length,\n                inclusive: true,\n                exact: false,\n                type: \"array\",\n            });\n            return INVALID;\n        }\n        const rest = this._def.rest;\n        if (!rest && ctx.data.length > this._def.items.length) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.too_big,\n                maximum: this._def.items.length,\n                inclusive: true,\n                exact: false,\n                type: \"array\",\n            });\n            status.dirty();\n        }\n        const items = [...ctx.data]\n            .map((item, itemIndex) => {\n            const schema = this._def.items[itemIndex] || this._def.rest;\n            if (!schema)\n                return null;\n            return schema._parse(new ParseInputLazyPath(ctx, item, ctx.path, itemIndex));\n        })\n            .filter((x) => !!x); // filter nulls\n        if (ctx.common.async) {\n            return Promise.all(items).then((results) => {\n                return ParseStatus.mergeArray(status, results);\n            });\n        }\n        else {\n            return ParseStatus.mergeArray(status, items);\n        }\n    }\n    get items() {\n        return this._def.items;\n    }\n    rest(rest) {\n        return new ZodTuple({\n            ...this._def,\n            rest,\n        });\n    }\n}\nZodTuple.create = (schemas, params) => {\n    if (!Array.isArray(schemas)) {\n        throw new Error(\"You must pass an array of schemas to z.tuple([ ... ])\");\n    }\n    return new ZodTuple({\n        items: schemas,\n        typeName: ZodFirstPartyTypeKind.ZodTuple,\n        rest: null,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodRecord extends ZodType {\n    get keySchema() {\n        return this._def.keyType;\n    }\n    get valueSchema() {\n        return this._def.valueType;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.object) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const pairs = [];\n        const keyType = this._def.keyType;\n        const valueType = this._def.valueType;\n        for (const key in ctx.data) {\n            pairs.push({\n                key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, key)),\n                value: valueType._parse(new ParseInputLazyPath(ctx, ctx.data[key], ctx.path, key)),\n                alwaysSet: key in ctx.data,\n            });\n        }\n        if (ctx.common.async) {\n            return ParseStatus.mergeObjectAsync(status, pairs);\n        }\n        else {\n            return ParseStatus.mergeObjectSync(status, pairs);\n        }\n    }\n    get element() {\n        return this._def.valueType;\n    }\n    static create(first, second, third) {\n        if (second instanceof ZodType) {\n            return new ZodRecord({\n                keyType: first,\n                valueType: second,\n                typeName: ZodFirstPartyTypeKind.ZodRecord,\n                ...processCreateParams(third),\n            });\n        }\n        return new ZodRecord({\n            keyType: ZodString.create(),\n            valueType: first,\n            typeName: ZodFirstPartyTypeKind.ZodRecord,\n            ...processCreateParams(second),\n        });\n    }\n}\nexport class ZodMap extends ZodType {\n    get keySchema() {\n        return this._def.keyType;\n    }\n    get valueSchema() {\n        return this._def.valueType;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.map) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.map,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const keyType = this._def.keyType;\n        const valueType = this._def.valueType;\n        const pairs = [...ctx.data.entries()].map(([key, value], index) => {\n            return {\n                key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, [index, \"key\"])),\n                value: valueType._parse(new ParseInputLazyPath(ctx, value, ctx.path, [index, \"value\"])),\n            };\n        });\n        if (ctx.common.async) {\n            const finalMap = new Map();\n            return Promise.resolve().then(async () => {\n                for (const pair of pairs) {\n                    const key = await pair.key;\n                    const value = await pair.value;\n                    if (key.status === \"aborted\" || value.status === \"aborted\") {\n                        return INVALID;\n                    }\n                    if (key.status === \"dirty\" || value.status === \"dirty\") {\n                        status.dirty();\n                    }\n                    finalMap.set(key.value, value.value);\n                }\n                return { status: status.value, value: finalMap };\n            });\n        }\n        else {\n            const finalMap = new Map();\n            for (const pair of pairs) {\n                const key = pair.key;\n                const value = pair.value;\n                if (key.status === \"aborted\" || value.status === \"aborted\") {\n                    return INVALID;\n                }\n                if (key.status === \"dirty\" || value.status === \"dirty\") {\n                    status.dirty();\n                }\n                finalMap.set(key.value, value.value);\n            }\n            return { status: status.value, value: finalMap };\n        }\n    }\n}\nZodMap.create = (keyType, valueType, params) => {\n    return new ZodMap({\n        valueType,\n        keyType,\n        typeName: ZodFirstPartyTypeKind.ZodMap,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodSet extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.set) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.set,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const def = this._def;\n        if (def.minSize !== null) {\n            if (ctx.data.size < def.minSize.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_small,\n                    minimum: def.minSize.value,\n                    type: \"set\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.minSize.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.maxSize !== null) {\n            if (ctx.data.size > def.maxSize.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_big,\n                    maximum: def.maxSize.value,\n                    type: \"set\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.maxSize.message,\n                });\n                status.dirty();\n            }\n        }\n        const valueType = this._def.valueType;\n        function finalizeSet(elements) {\n            const parsedSet = new Set();\n            for (const element of elements) {\n                if (element.status === \"aborted\")\n                    return INVALID;\n                if (element.status === \"dirty\")\n                    status.dirty();\n                parsedSet.add(element.value);\n            }\n            return { status: status.value, value: parsedSet };\n        }\n        const elements = [...ctx.data.values()].map((item, i) => valueType._parse(new ParseInputLazyPath(ctx, item, ctx.path, i)));\n        if (ctx.common.async) {\n            return Promise.all(elements).then((elements) => finalizeSet(elements));\n        }\n        else {\n            return finalizeSet(elements);\n        }\n    }\n    min(minSize, message) {\n        return new ZodSet({\n            ...this._def,\n            minSize: { value: minSize, message: errorUtil.toString(message) },\n        });\n    }\n    max(maxSize, message) {\n        return new ZodSet({\n            ...this._def,\n            maxSize: { value: maxSize, message: errorUtil.toString(message) },\n        });\n    }\n    size(size, message) {\n        return this.min(size, message).max(size, message);\n    }\n    nonempty(message) {\n        return this.min(1, message);\n    }\n}\nZodSet.create = (valueType, params) => {\n    return new ZodSet({\n        valueType,\n        minSize: null,\n        maxSize: null,\n        typeName: ZodFirstPartyTypeKind.ZodSet,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodFunction extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.validate = this.implement;\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.function) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.function,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        function makeArgsIssue(args, error) {\n            return makeIssue({\n                data: args,\n                path: ctx.path,\n                errorMaps: [ctx.common.contextualErrorMap, ctx.schemaErrorMap, getErrorMap(), defaultErrorMap].filter((x) => !!x),\n                issueData: {\n                    code: ZodIssueCode.invalid_arguments,\n                    argumentsError: error,\n                },\n            });\n        }\n        function makeReturnsIssue(returns, error) {\n            return makeIssue({\n                data: returns,\n                path: ctx.path,\n                errorMaps: [ctx.common.contextualErrorMap, ctx.schemaErrorMap, getErrorMap(), defaultErrorMap].filter((x) => !!x),\n                issueData: {\n                    code: ZodIssueCode.invalid_return_type,\n                    returnTypeError: error,\n                },\n            });\n        }\n        const params = { errorMap: ctx.common.contextualErrorMap };\n        const fn = ctx.data;\n        if (this._def.returns instanceof ZodPromise) {\n            // Would love a way to avoid disabling this rule, but we need\n            // an alias (using an arrow function was what caused 2651).\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            const me = this;\n            return OK(async function (...args) {\n                const error = new ZodError([]);\n                const parsedArgs = await me._def.args.parseAsync(args, params).catch((e) => {\n                    error.addIssue(makeArgsIssue(args, e));\n                    throw error;\n                });\n                const result = await Reflect.apply(fn, this, parsedArgs);\n                const parsedReturns = await me._def.returns._def.type\n                    .parseAsync(result, params)\n                    .catch((e) => {\n                    error.addIssue(makeReturnsIssue(result, e));\n                    throw error;\n                });\n                return parsedReturns;\n            });\n        }\n        else {\n            // Would love a way to avoid disabling this rule, but we need\n            // an alias (using an arrow function was what caused 2651).\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            const me = this;\n            return OK(function (...args) {\n                const parsedArgs = me._def.args.safeParse(args, params);\n                if (!parsedArgs.success) {\n                    throw new ZodError([makeArgsIssue(args, parsedArgs.error)]);\n                }\n                const result = Reflect.apply(fn, this, parsedArgs.data);\n                const parsedReturns = me._def.returns.safeParse(result, params);\n                if (!parsedReturns.success) {\n                    throw new ZodError([makeReturnsIssue(result, parsedReturns.error)]);\n                }\n                return parsedReturns.data;\n            });\n        }\n    }\n    parameters() {\n        return this._def.args;\n    }\n    returnType() {\n        return this._def.returns;\n    }\n    args(...items) {\n        return new ZodFunction({\n            ...this._def,\n            args: ZodTuple.create(items).rest(ZodUnknown.create()),\n        });\n    }\n    returns(returnType) {\n        return new ZodFunction({\n            ...this._def,\n            returns: returnType,\n        });\n    }\n    implement(func) {\n        const validatedFunc = this.parse(func);\n        return validatedFunc;\n    }\n    strictImplement(func) {\n        const validatedFunc = this.parse(func);\n        return validatedFunc;\n    }\n    static create(args, returns, params) {\n        return new ZodFunction({\n            args: (args ? args : ZodTuple.create([]).rest(ZodUnknown.create())),\n            returns: returns || ZodUnknown.create(),\n            typeName: ZodFirstPartyTypeKind.ZodFunction,\n            ...processCreateParams(params),\n        });\n    }\n}\nexport class ZodLazy extends ZodType {\n    get schema() {\n        return this._def.getter();\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const lazySchema = this._def.getter();\n        return lazySchema._parse({ data: ctx.data, path: ctx.path, parent: ctx });\n    }\n}\nZodLazy.create = (getter, params) => {\n    return new ZodLazy({\n        getter: getter,\n        typeName: ZodFirstPartyTypeKind.ZodLazy,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodLiteral extends ZodType {\n    _parse(input) {\n        if (input.data !== this._def.value) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_literal,\n                expected: this._def.value,\n            });\n            return INVALID;\n        }\n        return { status: \"valid\", value: input.data };\n    }\n    get value() {\n        return this._def.value;\n    }\n}\nZodLiteral.create = (value, params) => {\n    return new ZodLiteral({\n        value: value,\n        typeName: ZodFirstPartyTypeKind.ZodLiteral,\n        ...processCreateParams(params),\n    });\n};\nfunction createZodEnum(values, params) {\n    return new ZodEnum({\n        values,\n        typeName: ZodFirstPartyTypeKind.ZodEnum,\n        ...processCreateParams(params),\n    });\n}\nexport class ZodEnum extends ZodType {\n    _parse(input) {\n        if (typeof input.data !== \"string\") {\n            const ctx = this._getOrReturnCtx(input);\n            const expectedValues = this._def.values;\n            addIssueToContext(ctx, {\n                expected: util.joinValues(expectedValues),\n                received: ctx.parsedType,\n                code: ZodIssueCode.invalid_type,\n            });\n            return INVALID;\n        }\n        if (!this._cache) {\n            this._cache = new Set(this._def.values);\n        }\n        if (!this._cache.has(input.data)) {\n            const ctx = this._getOrReturnCtx(input);\n            const expectedValues = this._def.values;\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_enum_value,\n                options: expectedValues,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n    get options() {\n        return this._def.values;\n    }\n    get enum() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    get Values() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    get Enum() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    extract(values, newDef = this._def) {\n        return ZodEnum.create(values, {\n            ...this._def,\n            ...newDef,\n        });\n    }\n    exclude(values, newDef = this._def) {\n        return ZodEnum.create(this.options.filter((opt) => !values.includes(opt)), {\n            ...this._def,\n            ...newDef,\n        });\n    }\n}\nZodEnum.create = createZodEnum;\nexport class ZodNativeEnum extends ZodType {\n    _parse(input) {\n        const nativeEnumValues = util.getValidEnumValues(this._def.values);\n        const ctx = this._getOrReturnCtx(input);\n        if (ctx.parsedType !== ZodParsedType.string && ctx.parsedType !== ZodParsedType.number) {\n            const expectedValues = util.objectValues(nativeEnumValues);\n            addIssueToContext(ctx, {\n                expected: util.joinValues(expectedValues),\n                received: ctx.parsedType,\n                code: ZodIssueCode.invalid_type,\n            });\n            return INVALID;\n        }\n        if (!this._cache) {\n            this._cache = new Set(util.getValidEnumValues(this._def.values));\n        }\n        if (!this._cache.has(input.data)) {\n            const expectedValues = util.objectValues(nativeEnumValues);\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_enum_value,\n                options: expectedValues,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n    get enum() {\n        return this._def.values;\n    }\n}\nZodNativeEnum.create = (values, params) => {\n    return new ZodNativeEnum({\n        values: values,\n        typeName: ZodFirstPartyTypeKind.ZodNativeEnum,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodPromise extends ZodType {\n    unwrap() {\n        return this._def.type;\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.promise && ctx.common.async === false) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.promise,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const promisified = ctx.parsedType === ZodParsedType.promise ? ctx.data : Promise.resolve(ctx.data);\n        return OK(promisified.then((data) => {\n            return this._def.type.parseAsync(data, {\n                path: ctx.path,\n                errorMap: ctx.common.contextualErrorMap,\n            });\n        }));\n    }\n}\nZodPromise.create = (schema, params) => {\n    return new ZodPromise({\n        type: schema,\n        typeName: ZodFirstPartyTypeKind.ZodPromise,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodEffects extends ZodType {\n    innerType() {\n        return this._def.schema;\n    }\n    sourceType() {\n        return this._def.schema._def.typeName === ZodFirstPartyTypeKind.ZodEffects\n            ? this._def.schema.sourceType()\n            : this._def.schema;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        const effect = this._def.effect || null;\n        const checkCtx = {\n            addIssue: (arg) => {\n                addIssueToContext(ctx, arg);\n                if (arg.fatal) {\n                    status.abort();\n                }\n                else {\n                    status.dirty();\n                }\n            },\n            get path() {\n                return ctx.path;\n            },\n        };\n        checkCtx.addIssue = checkCtx.addIssue.bind(checkCtx);\n        if (effect.type === \"preprocess\") {\n            const processed = effect.transform(ctx.data, checkCtx);\n            if (ctx.common.async) {\n                return Promise.resolve(processed).then(async (processed) => {\n                    if (status.value === \"aborted\")\n                        return INVALID;\n                    const result = await this._def.schema._parseAsync({\n                        data: processed,\n                        path: ctx.path,\n                        parent: ctx,\n                    });\n                    if (result.status === \"aborted\")\n                        return INVALID;\n                    if (result.status === \"dirty\")\n                        return DIRTY(result.value);\n                    if (status.value === \"dirty\")\n                        return DIRTY(result.value);\n                    return result;\n                });\n            }\n            else {\n                if (status.value === \"aborted\")\n                    return INVALID;\n                const result = this._def.schema._parseSync({\n                    data: processed,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (result.status === \"aborted\")\n                    return INVALID;\n                if (result.status === \"dirty\")\n                    return DIRTY(result.value);\n                if (status.value === \"dirty\")\n                    return DIRTY(result.value);\n                return result;\n            }\n        }\n        if (effect.type === \"refinement\") {\n            const executeRefinement = (acc) => {\n                const result = effect.refinement(acc, checkCtx);\n                if (ctx.common.async) {\n                    return Promise.resolve(result);\n                }\n                if (result instanceof Promise) {\n                    throw new Error(\"Async refinement encountered during synchronous parse operation. Use .parseAsync instead.\");\n                }\n                return acc;\n            };\n            if (ctx.common.async === false) {\n                const inner = this._def.schema._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (inner.status === \"aborted\")\n                    return INVALID;\n                if (inner.status === \"dirty\")\n                    status.dirty();\n                // return value is ignored\n                executeRefinement(inner.value);\n                return { status: status.value, value: inner.value };\n            }\n            else {\n                return this._def.schema._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx }).then((inner) => {\n                    if (inner.status === \"aborted\")\n                        return INVALID;\n                    if (inner.status === \"dirty\")\n                        status.dirty();\n                    return executeRefinement(inner.value).then(() => {\n                        return { status: status.value, value: inner.value };\n                    });\n                });\n            }\n        }\n        if (effect.type === \"transform\") {\n            if (ctx.common.async === false) {\n                const base = this._def.schema._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (!isValid(base))\n                    return INVALID;\n                const result = effect.transform(base.value, checkCtx);\n                if (result instanceof Promise) {\n                    throw new Error(`Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.`);\n                }\n                return { status: status.value, value: result };\n            }\n            else {\n                return this._def.schema._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx }).then((base) => {\n                    if (!isValid(base))\n                        return INVALID;\n                    return Promise.resolve(effect.transform(base.value, checkCtx)).then((result) => ({\n                        status: status.value,\n                        value: result,\n                    }));\n                });\n            }\n        }\n        util.assertNever(effect);\n    }\n}\nZodEffects.create = (schema, effect, params) => {\n    return new ZodEffects({\n        schema,\n        typeName: ZodFirstPartyTypeKind.ZodEffects,\n        effect,\n        ...processCreateParams(params),\n    });\n};\nZodEffects.createWithPreprocess = (preprocess, schema, params) => {\n    return new ZodEffects({\n        schema,\n        effect: { type: \"preprocess\", transform: preprocess },\n        typeName: ZodFirstPartyTypeKind.ZodEffects,\n        ...processCreateParams(params),\n    });\n};\nexport { ZodEffects as ZodTransformer };\nexport class ZodOptional extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType === ZodParsedType.undefined) {\n            return OK(undefined);\n        }\n        return this._def.innerType._parse(input);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodOptional.create = (type, params) => {\n    return new ZodOptional({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodOptional,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodNullable extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType === ZodParsedType.null) {\n            return OK(null);\n        }\n        return this._def.innerType._parse(input);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodNullable.create = (type, params) => {\n    return new ZodNullable({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodNullable,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodDefault extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        let data = ctx.data;\n        if (ctx.parsedType === ZodParsedType.undefined) {\n            data = this._def.defaultValue();\n        }\n        return this._def.innerType._parse({\n            data,\n            path: ctx.path,\n            parent: ctx,\n        });\n    }\n    removeDefault() {\n        return this._def.innerType;\n    }\n}\nZodDefault.create = (type, params) => {\n    return new ZodDefault({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodDefault,\n        defaultValue: typeof params.default === \"function\" ? params.default : () => params.default,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodCatch extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        // newCtx is used to not collect issues from inner types in ctx\n        const newCtx = {\n            ...ctx,\n            common: {\n                ...ctx.common,\n                issues: [],\n            },\n        };\n        const result = this._def.innerType._parse({\n            data: newCtx.data,\n            path: newCtx.path,\n            parent: {\n                ...newCtx,\n            },\n        });\n        if (isAsync(result)) {\n            return result.then((result) => {\n                return {\n                    status: \"valid\",\n                    value: result.status === \"valid\"\n                        ? result.value\n                        : this._def.catchValue({\n                            get error() {\n                                return new ZodError(newCtx.common.issues);\n                            },\n                            input: newCtx.data,\n                        }),\n                };\n            });\n        }\n        else {\n            return {\n                status: \"valid\",\n                value: result.status === \"valid\"\n                    ? result.value\n                    : this._def.catchValue({\n                        get error() {\n                            return new ZodError(newCtx.common.issues);\n                        },\n                        input: newCtx.data,\n                    }),\n            };\n        }\n    }\n    removeCatch() {\n        return this._def.innerType;\n    }\n}\nZodCatch.create = (type, params) => {\n    return new ZodCatch({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodCatch,\n        catchValue: typeof params.catch === \"function\" ? params.catch : () => params.catch,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodNaN extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.nan) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.nan,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return { status: \"valid\", value: input.data };\n    }\n}\nZodNaN.create = (params) => {\n    return new ZodNaN({\n        typeName: ZodFirstPartyTypeKind.ZodNaN,\n        ...processCreateParams(params),\n    });\n};\nexport const BRAND = Symbol(\"zod_brand\");\nexport class ZodBranded extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const data = ctx.data;\n        return this._def.type._parse({\n            data,\n            path: ctx.path,\n            parent: ctx,\n        });\n    }\n    unwrap() {\n        return this._def.type;\n    }\n}\nexport class ZodPipeline extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.common.async) {\n            const handleAsync = async () => {\n                const inResult = await this._def.in._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (inResult.status === \"aborted\")\n                    return INVALID;\n                if (inResult.status === \"dirty\") {\n                    status.dirty();\n                    return DIRTY(inResult.value);\n                }\n                else {\n                    return this._def.out._parseAsync({\n                        data: inResult.value,\n                        path: ctx.path,\n                        parent: ctx,\n                    });\n                }\n            };\n            return handleAsync();\n        }\n        else {\n            const inResult = this._def.in._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n            if (inResult.status === \"aborted\")\n                return INVALID;\n            if (inResult.status === \"dirty\") {\n                status.dirty();\n                return {\n                    status: \"dirty\",\n                    value: inResult.value,\n                };\n            }\n            else {\n                return this._def.out._parseSync({\n                    data: inResult.value,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n            }\n        }\n    }\n    static create(a, b) {\n        return new ZodPipeline({\n            in: a,\n            out: b,\n            typeName: ZodFirstPartyTypeKind.ZodPipeline,\n        });\n    }\n}\nexport class ZodReadonly extends ZodType {\n    _parse(input) {\n        const result = this._def.innerType._parse(input);\n        const freeze = (data) => {\n            if (isValid(data)) {\n                data.value = Object.freeze(data.value);\n            }\n            return data;\n        };\n        return isAsync(result) ? result.then((data) => freeze(data)) : freeze(result);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodReadonly.create = (type, params) => {\n    return new ZodReadonly({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodReadonly,\n        ...processCreateParams(params),\n    });\n};\n////////////////////////////////////////\n////////////////////////////////////////\n//////////                    //////////\n//////////      z.custom      //////////\n//////////                    //////////\n////////////////////////////////////////\n////////////////////////////////////////\nfunction cleanParams(params, data) {\n    const p = typeof params === \"function\" ? params(data) : typeof params === \"string\" ? { message: params } : params;\n    const p2 = typeof p === \"string\" ? { message: p } : p;\n    return p2;\n}\nexport function custom(check, _params = {}, \n/**\n * @deprecated\n *\n * Pass `fatal` into the params object instead:\n *\n * ```ts\n * z.string().custom((val) => val.length > 5, { fatal: false })\n * ```\n *\n */\nfatal) {\n    if (check)\n        return ZodAny.create().superRefine((data, ctx) => {\n            const r = check(data);\n            if (r instanceof Promise) {\n                return r.then((r) => {\n                    if (!r) {\n                        const params = cleanParams(_params, data);\n                        const _fatal = params.fatal ?? fatal ?? true;\n                        ctx.addIssue({ code: \"custom\", ...params, fatal: _fatal });\n                    }\n                });\n            }\n            if (!r) {\n                const params = cleanParams(_params, data);\n                const _fatal = params.fatal ?? fatal ?? true;\n                ctx.addIssue({ code: \"custom\", ...params, fatal: _fatal });\n            }\n            return;\n        });\n    return ZodAny.create();\n}\nexport { ZodType as Schema, ZodType as ZodSchema };\nexport const late = {\n    object: ZodObject.lazycreate,\n};\nexport var ZodFirstPartyTypeKind;\n(function (ZodFirstPartyTypeKind) {\n    ZodFirstPartyTypeKind[\"ZodString\"] = \"ZodString\";\n    ZodFirstPartyTypeKind[\"ZodNumber\"] = \"ZodNumber\";\n    ZodFirstPartyTypeKind[\"ZodNaN\"] = \"ZodNaN\";\n    ZodFirstPartyTypeKind[\"ZodBigInt\"] = \"ZodBigInt\";\n    ZodFirstPartyTypeKind[\"ZodBoolean\"] = \"ZodBoolean\";\n    ZodFirstPartyTypeKind[\"ZodDate\"] = \"ZodDate\";\n    ZodFirstPartyTypeKind[\"ZodSymbol\"] = \"ZodSymbol\";\n    ZodFirstPartyTypeKind[\"ZodUndefined\"] = \"ZodUndefined\";\n    ZodFirstPartyTypeKind[\"ZodNull\"] = \"ZodNull\";\n    ZodFirstPartyTypeKind[\"ZodAny\"] = \"ZodAny\";\n    ZodFirstPartyTypeKind[\"ZodUnknown\"] = \"ZodUnknown\";\n    ZodFirstPartyTypeKind[\"ZodNever\"] = \"ZodNever\";\n    ZodFirstPartyTypeKind[\"ZodVoid\"] = \"ZodVoid\";\n    ZodFirstPartyTypeKind[\"ZodArray\"] = \"ZodArray\";\n    ZodFirstPartyTypeKind[\"ZodObject\"] = \"ZodObject\";\n    ZodFirstPartyTypeKind[\"ZodUnion\"] = \"ZodUnion\";\n    ZodFirstPartyTypeKind[\"ZodDiscriminatedUnion\"] = \"ZodDiscriminatedUnion\";\n    ZodFirstPartyTypeKind[\"ZodIntersection\"] = \"ZodIntersection\";\n    ZodFirstPartyTypeKind[\"ZodTuple\"] = \"ZodTuple\";\n    ZodFirstPartyTypeKind[\"ZodRecord\"] = \"ZodRecord\";\n    ZodFirstPartyTypeKind[\"ZodMap\"] = \"ZodMap\";\n    ZodFirstPartyTypeKind[\"ZodSet\"] = \"ZodSet\";\n    ZodFirstPartyTypeKind[\"ZodFunction\"] = \"ZodFunction\";\n    ZodFirstPartyTypeKind[\"ZodLazy\"] = \"ZodLazy\";\n    ZodFirstPartyTypeKind[\"ZodLiteral\"] = \"ZodLiteral\";\n    ZodFirstPartyTypeKind[\"ZodEnum\"] = \"ZodEnum\";\n    ZodFirstPartyTypeKind[\"ZodEffects\"] = \"ZodEffects\";\n    ZodFirstPartyTypeKind[\"ZodNativeEnum\"] = \"ZodNativeEnum\";\n    ZodFirstPartyTypeKind[\"ZodOptional\"] = \"ZodOptional\";\n    ZodFirstPartyTypeKind[\"ZodNullable\"] = \"ZodNullable\";\n    ZodFirstPartyTypeKind[\"ZodDefault\"] = \"ZodDefault\";\n    ZodFirstPartyTypeKind[\"ZodCatch\"] = \"ZodCatch\";\n    ZodFirstPartyTypeKind[\"ZodPromise\"] = \"ZodPromise\";\n    ZodFirstPartyTypeKind[\"ZodBranded\"] = \"ZodBranded\";\n    ZodFirstPartyTypeKind[\"ZodPipeline\"] = \"ZodPipeline\";\n    ZodFirstPartyTypeKind[\"ZodReadonly\"] = \"ZodReadonly\";\n})(ZodFirstPartyTypeKind || (ZodFirstPartyTypeKind = {}));\n// requires TS 4.4+\nclass Class {\n    constructor(..._) { }\n}\nconst instanceOfType = (\n// const instanceOfType = <T extends new (...args: any[]) => any>(\ncls, params = {\n    message: `Input not instance of ${cls.name}`,\n}) => custom((data) => data instanceof cls, params);\nconst stringType = ZodString.create;\nconst numberType = ZodNumber.create;\nconst nanType = ZodNaN.create;\nconst bigIntType = ZodBigInt.create;\nconst booleanType = ZodBoolean.create;\nconst dateType = ZodDate.create;\nconst symbolType = ZodSymbol.create;\nconst undefinedType = ZodUndefined.create;\nconst nullType = ZodNull.create;\nconst anyType = ZodAny.create;\nconst unknownType = ZodUnknown.create;\nconst neverType = ZodNever.create;\nconst voidType = ZodVoid.create;\nconst arrayType = ZodArray.create;\nconst objectType = ZodObject.create;\nconst strictObjectType = ZodObject.strictCreate;\nconst unionType = ZodUnion.create;\nconst discriminatedUnionType = ZodDiscriminatedUnion.create;\nconst intersectionType = ZodIntersection.create;\nconst tupleType = ZodTuple.create;\nconst recordType = ZodRecord.create;\nconst mapType = ZodMap.create;\nconst setType = ZodSet.create;\nconst functionType = ZodFunction.create;\nconst lazyType = ZodLazy.create;\nconst literalType = ZodLiteral.create;\nconst enumType = ZodEnum.create;\nconst nativeEnumType = ZodNativeEnum.create;\nconst promiseType = ZodPromise.create;\nconst effectsType = ZodEffects.create;\nconst optionalType = ZodOptional.create;\nconst nullableType = ZodNullable.create;\nconst preprocessType = ZodEffects.createWithPreprocess;\nconst pipelineType = ZodPipeline.create;\nconst ostring = () => stringType().optional();\nconst onumber = () => numberType().optional();\nconst oboolean = () => booleanType().optional();\nexport const coerce = {\n    string: ((arg) => ZodString.create({ ...arg, coerce: true })),\n    number: ((arg) => ZodNumber.create({ ...arg, coerce: true })),\n    boolean: ((arg) => ZodBoolean.create({\n        ...arg,\n        coerce: true,\n    })),\n    bigint: ((arg) => ZodBigInt.create({ ...arg, coerce: true })),\n    date: ((arg) => ZodDate.create({ ...arg, coerce: true })),\n};\nexport { anyType as any, arrayType as array, bigIntType as bigint, booleanType as boolean, dateType as date, discriminatedUnionType as discriminatedUnion, effectsType as effect, enumType as enum, functionType as function, instanceOfType as instanceof, intersectionType as intersection, lazyType as lazy, literalType as literal, mapType as map, nanType as nan, nativeEnumType as nativeEnum, neverType as never, nullType as null, nullableType as nullable, numberType as number, objectType as object, oboolean, onumber, optionalType as optional, ostring, pipelineType as pipeline, preprocessType as preprocess, promiseType as promise, recordType as record, setType as set, strictObjectType as strictObject, stringType as string, symbolType as symbol, effectsType as transformer, tupleType as tuple, undefinedType as undefined, unionType as union, unknownType as unknown, voidType as void, };\nexport const NEVER = INVALID;\n", "export var errorUtil;\n(function (errorUtil) {\n    errorUtil.errToObj = (message) => typeof message === \"string\" ? { message } : message || {};\n    // biome-ignore lint:\n    errorUtil.toString = (message) => typeof message === \"string\" ? message : message?.message;\n})(errorUtil || (errorUtil = {}));\n", "import type { D1Database } from '@cloudflare/workers-types';\n\nexport type PlanRow = {\n  id: string;\n  nome: 'FREE' | 'INTERMEDIARIO' | 'GOLD';\n  max_ativos_acompanhados: number;\n  max_alertas_por_ativo: number;\n  ads_habilitado: number;\n  preco_mensal: number;\n  ativo: number;\n  criado_em: string;\n  atualizado_em: string;\n};\n\nexport type SubscriptionRow = {\n  id: string;\n  usuario_id: string;\n  plano_id: string;\n  inicio_em: string;\n  fim_em: string | null;\n  renovacao_automatica: number;\n  status: 'ATIVA' | 'INADIMPLENTE' | 'CANCELADA' | 'EXPIRADA';\n  criado_em: string;\n  atualizado_em: string;\n};\n\nexport class PlanRepository {\n  constructor(private db: D1Database) {}\n\n  async listActivePlans() {\n    const rs = await this.db\n      .prepare(`SELECT * FROM planos WHERE ativo = 1 ORDER BY preco_mensal ASC`)\n      .all<PlanRow>();\n    return rs.results;\n  }\n\n  async getPlanByName(nome: PlanRow['nome']) {\n    return await this.db\n      .prepare(`SELECT * FROM planos WHERE nome = ? AND ativo = 1 LIMIT 1`)\n      .bind(nome)\n      .first<PlanRow>();\n  }\n\n  async getActiveSubscriptionForUser(userId: string) {\n    const sub = await this.db\n      .prepare(\n        `\n        SELECT *\n          FROM assinaturas_usuario\n         WHERE usuario_id = ?\n           AND status IN ('ATIVA','INADIMPLENTE')\n           AND (fim_em IS NULL OR datetime(fim_em) > datetime('now'))\n         ORDER BY datetime(criado_em) DESC\n         LIMIT 1\n        `\n      )\n      .bind(userId)\n      .first<SubscriptionRow>();\n\n    return sub ?? null;\n  }\n\n  async getCurrentPlanForUser(userId: string): Promise<PlanRow | null> {\n    const rs = await this.db\n      .prepare(\n        `\n        SELECT p.*\n          FROM assinaturas_usuario s\n          JOIN planos p ON p.id = s.plano_id\n         WHERE s.usuario_id = ?\n           AND s.status IN ('ATIVA','INADIMPLENTE')\n           AND (s.fim_em IS NULL OR datetime(s.fim_em) > datetime('now'))\n           AND p.ativo = 1\n         ORDER BY datetime(s.criado_em) DESC\n         LIMIT 1\n        `\n      )\n      .bind(userId)\n      .first<PlanRow>();\n\n    return rs ?? null;\n  }\n\n  async assignUserPlan(userId: string, planId: string) {\n    const id = crypto.randomUUID();\n\n    await this.db\n      .prepare(\n        `\n        INSERT INTO assinaturas_usuario (id, usuario_id, plano_id, status)\n        VALUES (?, ?, ?, 'ATIVA')\n        `\n      )\n      .bind(id, userId, planId)\n      .run();\n\n    return id;\n  }\n\n  async ensureDefaultPlanForUser(userId: string, defaultPlanName: PlanRow['nome'] = 'FREE') {\n    const current = await this.getCurrentPlanForUser(userId);\n    if (current) return current;\n\n    const plan = await this.getPlanByName(defaultPlanName);\n    if (!plan) return null;\n\n    await this.assignUserPlan(userId, plan.id);\n    return plan;\n  }\n  async getUserPlan(userId: string) {\n    return this.getCurrentPlanForUser(userId);\n  }\n\n}\n", "import type { D1Database } from '@cloudflare/workers-types';\n\nexport type DbPreferences = {\n  id: string;\n  usuario_id: string;\n  fuso_horario: string;\n  resumo_diario_ativo: number;\n  horario_resumo: string;\n  canal_padrao_noticias: 'PUSH' | 'EMAIL' | 'AMBOS';\n  alerta_aviso_push_obrigatorio: number;\n  criado_em: string;\n  atualizado_em: string;\n};\n\nexport class PreferencesRepository {\n  constructor(private db: D1Database) {}\n\n  async getByUserId(userId: string): Promise<DbPreferences | null> {\n    const p = await this.db\n      .prepare(`SELECT * FROM preferencias_usuario WHERE usuario_id = ? LIMIT 1`)\n      .bind(userId)\n      .first<DbPreferences>();\n    return p ?? null;\n  }\n\n  async ensureDefaults(userId: string): Promise<void> {\n    await this.db\n      .prepare(`INSERT OR IGNORE INTO preferencias_usuario (id, usuario_id) VALUES (?, ?)`)\n      .bind(crypto.randomUUID(), userId)\n      .run();\n  }\n\n  async upsert(userId: string, changes: Partial<Pick<DbPreferences, 'fuso_horario' | 'resumo_diario_ativo' | 'horario_resumo' | 'canal_padrao_noticias' | 'alerta_aviso_push_obrigatorio'>>): Promise<void> {\n    await this.ensureDefaults(userId);\n    await this.update(userId, changes);\n  }\n\n  async update(\n    userId: string,\n    changes: Partial<Pick<DbPreferences, 'fuso_horario' | 'resumo_diario_ativo' | 'horario_resumo' | 'canal_padrao_noticias' | 'alerta_aviso_push_obrigatorio'>>\n  ): Promise<void> {\n    const fields: string[] = [];\n    const binds: unknown[] = [];\n\n    if (typeof changes.fuso_horario === 'string') {\n      fields.push('fuso_horario = ?');\n      binds.push(changes.fuso_horario);\n    }\n    if (typeof changes.resumo_diario_ativo === 'number') {\n      fields.push('resumo_diario_ativo = ?');\n      binds.push(changes.resumo_diario_ativo);\n    }\n    if (typeof changes.horario_resumo === 'string') {\n      fields.push('horario_resumo = ?');\n      binds.push(changes.horario_resumo);\n    }\n    if (typeof changes.canal_padrao_noticias === 'string') {\n      fields.push('canal_padrao_noticias = ?');\n      binds.push(changes.canal_padrao_noticias);\n    }\n    if (typeof changes.alerta_aviso_push_obrigatorio === 'number') {\n      fields.push('alerta_aviso_push_obrigatorio = ?');\n      binds.push(changes.alerta_aviso_push_obrigatorio);\n    }\n\n    if (fields.length === 0) return;\n\n    await this.db\n      .prepare(\n        `UPDATE preferencias_usuario SET ${fields.join(', ')}, atualizado_em = datetime('now') WHERE usuario_id = ?`\n      )\n      .bind(...binds, userId)\n      .run();\n  }\n\n  async listDailyDigestUsers(): Promise<Array<{ user_id: string; email: string; fuso_horario: string; horario_resumo: string; canal_padrao_noticias: \"PUSH\" | \"EMAIL\" | \"AMBOS\" }>> {\n    const rows = await this.db\n      .prepare(`\n        SELECT u.id as user_id, u.email as email, p.fuso_horario as fuso_horario, p.horario_resumo as horario_resumo, p.canal_padrao_noticias as canal_padrao_noticias\n        FROM usuarios u\n        JOIN preferencias_usuario p ON p.usuario_id = u.id\n        WHERE u.excluido_em IS NULL AND p.resumo_diario_ativo = 1\n      `)\n      .all<{ user_id: string; email: string; fuso_horario: string; horario_resumo: string; canal_padrao_noticias: \"PUSH\" | \"EMAIL\" | \"AMBOS\" }>();\n    return rows.results ?? [];\n  }\n\n}\n", "import type { D1Database } from '@cloudflare/workers-types';\n\nexport type TermsAcceptanceRow = {\n  id: string;\n  usuario_id: string;\n  versao_termos: string;\n  aceito: number;\n  aceito_em: string | null;\n  ip: string | null;\n  user_agent: string | null;\n  observacoes: string | null;\n  criado_em: string;\n};\n\nexport class TermsRepository {\n  constructor(private db: D1Database) {}\n\n  async getLatestAcceptanceByUser(userId: string) {\n    return await this.db\n      .prepare(\n        `\n        SELECT * FROM aceites_termos\n         WHERE usuario_id = ?\n         ORDER BY datetime(criado_em) DESC\n         LIMIT 1\n        `\n      )\n      .bind(userId)\n      .first<TermsAcceptanceRow>();\n  }\n\n  async recordAcceptance(\n    userId: string,\n    version: string,\n    meta?: { ip?: string; userAgent?: string; observacoes?: string }\n  ) {\n    const id = crypto.randomUUID();\n    await this.db\n      .prepare(\n        `\n        INSERT INTO aceites_termos (id, usuario_id, versao_termos, aceito, aceito_em, ip, user_agent, observacoes)\n        VALUES (?, ?, ?, 1, datetime('now'), ?, ?, ?)\n        `\n      )\n      .bind(id, userId, version, meta?.ip || null, meta?.userAgent || null, meta?.observacoes || null)\n      .run();\n    return id;\n  }\n}\n", "import type { D1Database } from '@cloudflare/workers-types';\n\nexport type PasswordResetTokenRow = {\n  id: string;\n  usuario_id: string;\n  token: string;\n  expira_em: string;\n  usado_em: string | null;\n  criado_em: string;\n};\n\nexport class PasswordResetRepository {\n  constructor(private db: D1Database) {}\n\n  async create(userId: string, opts?: { expiresMinutes?: number }) {\n    const id = crypto.randomUUID();\n    const token = crypto.randomUUID();\n    const expiresMinutes = opts?.expiresMinutes ?? 60;\n    const expira_em = new Date(Date.now() + expiresMinutes * 60_000).toISOString();\n    await this.db\n      .prepare(`INSERT INTO tokens_reset_senha (id, usuario_id, token, expira_em) VALUES (?1, ?2, ?3, ?4)`)\n      .bind(id, userId, token, expira_em)\n      .run();\n    return { id, token, expira_em };\n  }\n\n  async getValidByToken(token: string): Promise<PasswordResetTokenRow | null> {\n    const row = await this.db\n      .prepare(`\n        SELECT id, usuario_id, token, expira_em, usado_em, criado_em\n          FROM tokens_reset_senha\n         WHERE token = ?1\n           AND usado_em IS NULL\n           AND expira_em > datetime('now')\n         LIMIT 1\n      `)\n      .bind(token)\n      .first<PasswordResetTokenRow>();\n    return row ?? null;\n  }\n\n  async markUsed(id: string): Promise<void> {\n    await this.db\n      .prepare(`UPDATE tokens_reset_senha SET usado_em = datetime('now') WHERE id = ?1`)\n      .bind(id)\n      .run();\n  }\n\n  async revokeAllForUser(userId: string): Promise<void> {\n    await this.db\n      .prepare(`UPDATE tokens_reset_senha SET usado_em = datetime('now') WHERE usuario_id = ?1 AND usado_em IS NULL`)\n      .bind(userId)\n      .run();\n  }\n}\n", "import type { Env } from '../types/env';\nimport { signAccessToken } from '../lib/jwt';\nimport { ValidationError } from '../lib/errors';\nimport { hashPassword, verifyPassword } from '../lib/password';\nimport { UserRepository, type UserRow } from '../repositories/user.repository';\nimport { PreferencesRepository } from '../repositories/preferences.repository';\nimport { TermsRepository } from '../repositories/terms.repository';\nimport { PlanRepository } from '../repositories/plan.repository';\nimport { PasswordResetRepository } from '../repositories/password_reset.repository';\nimport { EmailService } from './email.service';\n\nexport class AuthService {\n  constructor(\n    private readonly env: Env,\n    private readonly users: UserRepository,\n    private readonly prefs: PreferencesRepository,\n    private readonly terms: TermsRepository,\n    private readonly plans: PlanRepository,\n    private readonly resetRepo: PasswordResetRepository,\n    private readonly email: EmailService\n  ) {}\n\n  private async issueToken(user: Pick<UserRow, 'id' | 'perfil' | 'email' | 'nome'>) {\n    const secret = this.env.JWT_SECRET;\n    if (!secret) throw new Error('JWT_SECRET not configured');\n    return signAccessToken(\n      { sub: user.id, perfil: user.perfil as any, email: user.email, nome: user.nome },\n      secret,\n      this.env.JWT_ISSUER || 'financial-secretary'\n    );\n  }\n\n  async register(params: {\n    email: string;\n    senha: string;\n    nome: string;\n    termos_versao?: string | null;\n    termos_aceito?: boolean;\n    ip?: string | null;\n    user_agent?: string | null;\n  }): Promise<{ user: Omit<UserRow, 'hash_senha'>; token: string }> {\n    const email = params.email.trim().toLowerCase();\n    const existing = await this.users.getByEmail(email);\n    if (existing && !existing.excluido_em) throw new ValidationError('Email j\u00E1 cadastrado');\n\n    const hash = await hashPassword(params.senha);\n    const userId = crypto.randomUUID();\n\n    await this.users.create({ id: userId, email, hash_senha: hash, nome: params.nome });\n    await this.prefs.ensureForUser(userId);\n    await this.plans.ensureDefaultPlanForUser(userId);\n\n    if (params.termos_versao && params.termos_aceito) {\n      await this.terms.setAccepted({\n        usuario_id: userId,\n        versao_termos: params.termos_versao,\n        ip: params.ip ?? null,\n        user_agent: params.user_agent ?? null,\n      });\n    }\n\n    const user = await this.users.getById(userId);\n    if (!user) throw new Error('Falha ao criar usu\u00E1rio');\n\n    const token = await this.issueToken(user);\n    const { hash_senha, ...safeUser } = user;\n    return { user: safeUser, token };\n  }\n\n  async login(params: { email: string; senha: string }): Promise<{ user: Omit<UserRow, 'hash_senha'>; token: string }> {\n    const email = params.email.trim().toLowerCase();\n    const user = await this.users.getByEmail(email);\n    if (!user || user.excluido_em) throw new ValidationError('Credenciais inv\u00E1lidas');\n\n    const ok = await verifyPassword(params.senha, user.hash_senha);\n    if (!ok) throw new ValidationError('Credenciais inv\u00E1lidas');\n\n    const token = await this.issueToken(user);\n    const { hash_senha, ...safeUser } = user;\n    return { user: safeUser, token };\n  }\n\n  async forgotPassword(params: { email: string; resetUrlBase: string }): Promise<{ ok: true; token_dev?: string }> {\n    const email = params.email.trim().toLowerCase();\n    const user = await this.users.getByEmail(email);\n\n    // Sempre retorna OK para n\u00E3o vazar se existe usu\u00E1rio\n    if (!user || user.excluido_em) return { ok: true };\n\n    await this.resetRepo.revokeAllForUser(user.id);\n    const created = await this.resetRepo.create(user.id, { expiresMinutes: 60 });\n\n    const resetUrl = `${params.resetUrlBase.replace(/\\/$/, '')}?token=${encodeURIComponent(created.token)}`;\n\n    // Se email n\u00E3o estiver configurado, em DEV devolvemos o token para teste.\n    const hasEmail = !!this.env.RESEND_API_KEY && !!this.env.EMAIL_FROM;\n    if (hasEmail) {\n      await this.email.sendPasswordReset({\n        to: user.email,\n        userName: user.nome,\n        resetUrl,\n      });\n      return { ok: true };\n    }\n\n    if ((this.env.ENV || 'dev') !== 'production') return { ok: true, token_dev: created.token };\n    return { ok: true };\n  }\n\n  async resetPassword(params: { token: string; newPassword: string }): Promise<{ ok: true }> {\n    const row = await this.resetRepo.getValidByToken(params.token);\n    if (!row) throw new ValidationError('Token inv\u00E1lido ou expirado');\n\n    const hash = await hashPassword(params.newPassword);\n    await this.users.updatePassword(row.usuario_id, hash);\n    await this.resetRepo.markUsed(row.id);\n    return { ok: true };\n  }\n}\n", "function b64encode(buf: ArrayBuffer) {\n  const bytes = new Uint8Array(buf);\n  let bin = '';\n  for (let i = 0; i < bytes.length; i++) bin += String.fromCharCode(bytes[i]);\n  return btoa(bin);\n}\n\nfunction b64decode(str: string) {\n  const bin = atob(str);\n  const bytes = new Uint8Array(bin.length);\n  for (let i = 0; i < bin.length; i++) bytes[i] = bin.charCodeAt(i);\n  return bytes.buffer;\n}\n\nexport async function hashPassword(password: string, iterations = 150_000) {\n  const salt = crypto.getRandomValues(new Uint8Array(16));\n  const keyMat = await crypto.subtle.importKey('raw', new TextEncoder().encode(password), 'PBKDF2', false, ['deriveBits']);\n  const bits = await crypto.subtle.deriveBits(\n    { name: 'PBKDF2', hash: 'SHA-256', salt, iterations },\n    keyMat,\n    256\n  );\n  const saltB64 = b64encode(salt.buffer);\n  const hashB64 = b64encode(bits);\n  return `pbkdf2$${iterations}$${saltB64}$${hashB64}`;\n}\n\nexport async function verifyPassword(password: string, stored: string) {\n  const parts = stored.split('$');\n  if (parts.length !== 4 || parts[0] !== 'pbkdf2') return false;\n  const iterations = Number(parts[1]);\n  const salt = new Uint8Array(b64decode(parts[2]));\n  const expected = parts[3];\n\n  const keyMat = await crypto.subtle.importKey('raw', new TextEncoder().encode(password), 'PBKDF2', false, ['deriveBits']);\n  const bits = await crypto.subtle.deriveBits(\n    { name: 'PBKDF2', hash: 'SHA-256', salt, iterations },\n    keyMat,\n    256\n  );\n  const actual = b64encode(bits);\n\n  return timingSafeEqual(expected, actual);\n}\n\nfunction timingSafeEqual(a: string, b: string) {\n  if (a.length !== b.length) return false;\n  let res = 0;\n  for (let i = 0; i < a.length; i++) res |= a.charCodeAt(i) ^ b.charCodeAt(i);\n  return res === 0;\n}\n", "import type { Env } from '../types/env';\n\nexport class EmailService {\n  constructor(private readonly env: Env) {}\n\n  async sendPasswordResetEmail(params: {\n    to: string;\n    resetLink: string;\n    nome?: string | null;\n  }): Promise<void> {\n    const subject = 'Redefini\u00E7\u00E3o de senha - InvestAlerta';\n    const body = `Ol\u00E1${params.nome ? ' ' + params.nome : ''}!\\n\\nUse o link abaixo para redefinir sua senha:\\n${params.resetLink}\\n\\nSe voc\u00EA n\u00E3o solicitou, ignore este email.`;\n\n    await this.sendRawEmail({ to: params.to, subject, body });\n  }\n\n  async sendDailyDigestEmail(params: {\n    to: string;\n    subject: string;\n    body: string;\n  }): Promise<void> {\n    await this.sendRawEmail({ to: params.to, subject: params.subject, body: params.body });\n  }\n\n  private async sendRawEmail(params: { to: string; subject: string; body: string }): Promise<void> {\n    if (!this.env.RESEND_API_KEY) {\n      console.log('[EmailService] RESEND_API_KEY ausente. Email n\u00E3o enviado.', {\n        to: params.to,\n        subject: params.subject,\n      });\n      return;\n    }\n\n    if (!this.env.EMAIL_FROM) {\n      console.log('[EmailService] EMAIL_FROM ausente. Email n\u00E3o enviado.', {\n        to: params.to,\n        subject: params.subject,\n      });\n      return;\n    }\n\n    const resp = await fetch('https://api.resend.com/emails', {\n      method: 'POST',\n      headers: {\n        Authorization: `Bearer ${this.env.RESEND_API_KEY}`,\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        from: this.env.EMAIL_FROM,\n        to: params.to,\n        subject: params.subject,\n        text: params.body,\n      }),\n    });\n\n    if (!resp.ok) {\n      const text = await resp.text().catch(() => '');\n      console.log('[EmailService] Falha ao enviar email.', { status: resp.status, text });\n    }\n  }\n\n  async sendNotificationEmail(params: {\n    to: string;\n    subject: string;\n    html?: string | null;\n    text?: string | null;\n  }): Promise<{ id?: string | null; skipped?: boolean }> {\n    if (!this.env.RESEND_API_KEY || !this.env.EMAIL_FROM) {\n      return { skipped: true };\n    }\n\n    const payload = {\n      from: this.env.EMAIL_FROM,\n      to: params.to,\n      subject: params.subject,\n      html: params.html ?? (params.text ? `<pre style=\"font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace; white-space: pre-wrap;\">${params.text}</pre>` : undefined),\n      text: params.text ?? undefined\n    };\n\n    const r = await fetch('https://api.resend.com/emails', {\n      method: 'POST',\n      headers: {\n        Authorization: `Bearer ${this.env.RESEND_API_KEY}`,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(payload)\n    });\n\n    if (!r.ok) {\n      const t = await r.text();\n      throw new Error(`resend_error: ${r.status} ${t}`);\n    }\n\n    const data = await r.json<{ id?: string }>();\n    return { id: data.id ?? null };\n  }\n}\n", "import type { RequestContext } from '../types/env';\nimport { AppError } from '../lib/errors';\n\nexport function requireUser(ctx: RequestContext) {\n  if (!ctx.user) throw new AppError(401, 'N\u00E3o autenticado.',\"N\u00E3o autenticado\");\n  return ctx.user;\n}\n\nexport function getClientIp(req: Request): string | null {\n  return (\n    req.headers.get('cf-connecting-ip') ||\n    req.headers.get('x-forwarded-for') ||\n    null\n  );\n}\n\nexport function getUserAgent(req: Request): string | null {\n  return req.headers.get('user-agent') || null;\n}\n", "import type { Router } from '../lib/router';\nimport { jsonResponse, parseJson } from '../lib/http';\nimport { z } from 'zod';\nimport { UserRepository } from '../repositories/user.repository';\nimport { PlanRepository } from '../repositories/plan.repository';\nimport { PreferencesRepository } from '../repositories/preferences.repository';\nimport { TermsRepository } from '../repositories/terms.repository';\nimport { requireUser } from './_helpers';\n\nconst updateMeSchema = z.object({\n  nome: z.string().min(1).optional(),\n  email: z.string().email().optional()\n});\n\nexport function registerAccountController(router: Router) {\n  router.get('/api/v1/me', async (ctx) => {\n    const user = requireUser(ctx);\n    const userRepo = new UserRepository(ctx.env.DB);\n    const planRepo = new PlanRepository(ctx.env.DB);\n    const prefsRepo = new PreferencesRepository(ctx.env.DB);\n    const termsRepo = new TermsRepository(ctx.env.DB);\n\n    const row = await userRepo.getById(user.id);\n    if (!row || row.excluido_em) return jsonResponse({ error: { code: 'not_found', message: 'Usu\u00E1rio n\u00E3o encontrado.' } }, { status: 404 });\n\n    const plan = await planRepo.getUserPlan(user.id);\n    const prefs = await prefsRepo.getByUserId(user.id);\n    const terms = await termsRepo.getLatestAcceptanceByUser(user.id);\n\n    return jsonResponse(\n      {\n        user: { id: row.id, email: row.email, nome: row.nome, perfil: row.perfil, criado_em: row.criado_em },\n        plano: plan,\n        preferencias: prefs,\n        termos: terms\n      },\n      { status: 200 }\n    );\n  });\n\n  router.put('/api/v1/me', async (ctx) => {\n    const user = requireUser(ctx);\n    const body = await parseJson(ctx.req, updateMeSchema);\n    const userRepo = new UserRepository(ctx.env.DB);\n\n    const current = await userRepo.getById(user.id);\n    if (!current || current.excluido_em) return jsonResponse({ error: { code: 'not_found', message: 'Usu\u00E1rio n\u00E3o encontrado.' } }, { status: 404 });\n\n    if (body.email && body.email !== current.email) {\n      await userRepo.updateEmail(user.id, body.email);\n    }\n    if (body.nome && body.nome !== current.nome) {\n      await userRepo.updateName(user.id, body.nome);\n    }\n\n    const updated = await userRepo.getById(user.id);\n\n    return jsonResponse({ user: { id: updated!.id, email: updated!.email, nome: updated!.nome, perfil: updated!.perfil } }, { status: 200 });\n  });\n\n  router.delete('/api/v1/me', async (ctx) => {\n    const user = requireUser(ctx);\n    const userRepo = new UserRepository(ctx.env.DB);\n\n    await userRepo.softDelete(user.id);\n\n    return jsonResponse({ ok: true }, { status: 200 });\n  });\n}\n", "import type { Router } from '../lib/router';\nimport { jsonResponse } from '../lib/http';\nimport { AssetRepository } from '../repositories/asset.repository';\nimport { NewsRepository } from '../repositories/news.repository';\nimport { AssetService } from '../services/asset.service';\nimport { MarketDataService } from '../services/market_data.service';\n\nexport function registerAssetsController(router: Router) {\n  router.get('/api/v1/assets/search', async (ctx) => {\n    const url = new URL(ctx.req.url);\n    const q = (url.searchParams.get('query') || url.searchParams.get('q') || '').trim();\n\n    if (!q) return jsonResponse({ assets: [] });\n\n    const repo = new AssetRepository(ctx.env);\n    const assets = await repo.searchByTickerOrName(q);\n\n    return jsonResponse({ assets });\n  });\n\n  router.get('/api/v1/assets/:ticker', async (ctx) => {\n    const ticker = (ctx.params.ticker || '').trim().toUpperCase();\n\n    const assetRepo = new AssetRepository(ctx.env);\n    const market = new MarketDataService(ctx.env);\n    const assetService = new AssetService(ctx.env, assetRepo, market);\n\n    const asset = await assetService.ensureAssetExists(ticker);\n    const latest = await assetRepo.getLatestQuoteByAssetId(asset.id);\n\n    return jsonResponse({ asset, latest_quote: latest });\n  });\n\n  router.get('/api/v1/assets/:ticker/news', async (ctx) => {\n    const ticker = (ctx.params.ticker || '').trim().toUpperCase();\n    const assetRepo = new AssetRepository(ctx.env);\n    const asset = await assetRepo.getByTicker(ticker);\n    if (!asset) return jsonResponse({ news: [] }, { status: 200 });\n\n    const url = new URL(ctx.req.url);\n    const limit = Math.min(50, Math.max(1, Number(url.searchParams.get('limit') || '20')));\n\n    const newsRepo = new NewsRepository(ctx.env.DB);\n    const news = await newsRepo.listNewsForAsset(asset.id, limit);\n\n    return jsonResponse({ asset: { id: asset.id, ticker: asset.ticker }, news });\n  });\n}\n", "import type { Env } from '../types/env';\n\nexport type DbAsset = {\n  id: string;\n  ticker: string;\n  nome_curto: string | null;\n  tipo: 'ACAO' | 'FII' | 'CRIPTO';\n  bolsa: string | null;\n  ativo: number;\n  criado_em: string;\n  atualizado_em: string;\n};\n\nexport type DbQuote = {\n  id: string;\n  ativo_id: string;\n  preco: number;\n  cotado_em: string;\n  buscado_em: string;\n  fonte: string | null;\n};\n\nexport class AssetRepository {\n  constructor(private env: Env) { }\n\n  // Aliases para manter servi\u00E7os/controllers simples\n  async searchByTickerOrName(query: string, limit = 25) {\n    return this.search(query, limit);\n  }\n\n  async getLatestQuoteByAssetId(assetId: string) {\n    return this.getLatestQuote(assetId);\n  }\n\n  async updateNameShort(assetId: string, nameShort: string | null) {\n    await this.env.DB\n      .prepare(\n        `UPDATE ativos\n            SET nome_curto = ?, atualizado_em = datetime('now')\n          WHERE id = ?`\n      )\n      .bind(nameShort, assetId)\n      .run();\n  }\n\n  async createAsset(asset: {\n    id?: string; // (recomendo deixar opcional)\n    ticker: string;\n    nome_curto?: string | null;\n    tipo: 'ACAO' | 'FII' | 'CRIPTO';\n    bolsa?: string | null;\n  }): Promise<DbAsset> {\n    return this.upsertAsset({\n      id: asset.id,\n      ticker: asset.ticker,\n      nome_curto: asset.nome_curto ?? null,\n      tipo: asset.tipo,\n      bolsa: asset.bolsa ?? null,\n    });\n  }\n\n\n  async search(query: string, limit = 20): Promise<DbAsset[]> {\n    const q = `%${query.toUpperCase()}%`;\n    const res = await this.env.DB\n      .prepare(\n        `SELECT * FROM ativos\n         WHERE ativo = 1 AND (UPPER(ticker) LIKE ? OR UPPER(COALESCE(nome_curto,'')) LIKE ?)\n         ORDER BY ticker\n         LIMIT ?`\n      )\n      .bind(q, q, limit)\n      .all<DbAsset>();\n    return res.results;\n  }\n\n  async getByTicker(ticker: string): Promise<DbAsset | null> {\n    const a = await this.env.DB\n      .prepare(`SELECT * FROM ativos WHERE UPPER(ticker) = UPPER(?) AND ativo = 1 LIMIT 1`)\n      .bind(ticker)\n      .first<DbAsset>();\n    return a ?? null;\n  }\n\n  async getById(id: string): Promise<DbAsset | null> {\n    const a = await this.env.DB\n      .prepare(`SELECT * FROM ativos WHERE id = ? AND ativo = 1 LIMIT 1`)\n      .bind(id)\n      .first<DbAsset>();\n    return a ?? null;\n  }\n\n  async upsertAsset(asset: { id?: string; ticker: string; nome_curto?: string | null; tipo: DbAsset['tipo']; bolsa?: string | null }) {\n    const id = asset.id ?? crypto.randomUUID();\n    await this.env.DB\n      .prepare(\n        `INSERT INTO ativos (id, ticker, nome_curto, tipo, bolsa, ativo)\n         VALUES (?, ?, ?, ?, ?, 1)\n         ON CONFLICT(ticker) DO UPDATE SET\n           nome_curto = COALESCE(excluded.nome_curto, ativos.nome_curto),\n           tipo = excluded.tipo,\n           bolsa = COALESCE(excluded.bolsa, ativos.bolsa),\n           ativo = 1,\n           atualizado_em = datetime('now')`\n      )\n      .bind(id, asset.ticker.toUpperCase(), asset.nome_curto ?? null, asset.tipo, asset.bolsa ?? null)\n      .run();\n\n    const row = await this.getByTicker(asset.ticker);\n    if (!row) throw new Error('Failed to upsert asset');\n    return row;\n  }\n\n  async insertQuote(quote: { id?: string; ativo_id: string; preco: number; cotado_em: string; fonte?: string | null }) {\n    await this.env.DB\n      .prepare(`INSERT INTO cotacoes (id, ativo_id, preco, cotado_em, fonte) VALUES (?, ?, ?, ?, ?)`)\n      .bind(quote.id ?? crypto.randomUUID(), quote.ativo_id, quote.preco, quote.cotado_em, quote.fonte ?? null)\n      .run();\n  }\n\n  async getLatestQuote(assetId: string): Promise<DbQuote | null> {\n    const q = await this.env.DB\n      .prepare(\n        `SELECT * FROM cotacoes\n         WHERE ativo_id = ?\n         ORDER BY datetime(buscado_em) DESC\n         LIMIT 1`\n      )\n      .bind(assetId)\n      .first<DbQuote>();\n    return q ?? null;\n  }\n\n  async getLatestQuotes(assetIds: string[]): Promise<Record<string, DbQuote>> {\n    if (assetIds.length === 0) return {};\n    const placeholders = assetIds.map(() => '?').join(',');\n    const sql =\n      `SELECT c.*\n       FROM cotacoes c\n       JOIN (\n         SELECT ativo_id, MAX(datetime(buscado_em)) AS max_buscado\n         FROM cotacoes\n         WHERE ativo_id IN (${placeholders})\n         GROUP BY ativo_id\n       ) t ON t.ativo_id = c.ativo_id AND datetime(c.buscado_em) = t.max_buscado`;\n\n    const res = await this.env.DB.prepare(sql).bind(...assetIds).all<DbQuote>();\n    const map: Record<string, DbQuote> = {};\n    for (const row of res.results) map[row.ativo_id] = row;\n    return map;\n  }\n}\n", "import type { D1Database } from '@cloudflare/workers-types';\n\nexport type NewsRow = {\n  id: string;\n  url: string;\n  fonte: string | null;\n  titulo: string;\n  trecho: string | null;\n  publicado_em: string | null;\n  buscado_em: string;\n  hash_dedupe: string;\n  resumo_bruto: string | null;\n};\n\nexport type AssetNewsRow = {\n  ativo_id: string;\n  noticia_id: string;\n};\n\nexport class NewsRepository {\n  constructor(private db: D1Database) {}\n\n  async upsertNews(news: {\n    url: string;\n    fonte?: string | null;\n    titulo: string;\n    trecho?: string | null;\n    publicado_em?: string | null;\n    hash_dedupe: string;\n  }) {\n    const id = crypto.randomUUID();\n    await this.db\n      .prepare(\n        `\n        INSERT INTO noticias (id, url, fonte, titulo, trecho, publicado_em, hash_dedupe)\n        VALUES (?, ?, ?, ?, ?, ?, ?)\n        ON CONFLICT(url) DO UPDATE SET\n          fonte = COALESCE(excluded.fonte, noticias.fonte),\n          titulo = excluded.titulo,\n          trecho = COALESCE(excluded.trecho, noticias.trecho),\n          publicado_em = COALESCE(excluded.publicado_em, noticias.publicado_em),\n          hash_dedupe = COALESCE(excluded.hash_dedupe, noticias.hash_dedupe)\n        `\n      )\n      .bind(id, news.url, news.fonte ?? null, news.titulo, news.trecho ?? null, news.publicado_em ?? null, news.hash_dedupe)\n      .run();\n\n    const row = await this.db.prepare(`SELECT * FROM noticias WHERE url = ? LIMIT 1`).bind(news.url).first<NewsRow>();\n    if (!row) throw new Error('Failed to upsert news');\n    return row;\n  }\n\n  async linkNewsToAsset(noticiaId: string, assetId: string) {\n    await this.db\n      .prepare(`INSERT OR IGNORE INTO noticias_ativos (id, noticia_id, ativo_id) VALUES (?, ?, ?)`)\n      .bind(crypto.randomUUID(), noticiaId, assetId)\n      .run();\n  }\n\n  async listNewsForAsset(assetId: string, limit: number = 20) {\n    const rs = await this.db\n      .prepare(\n        `\n        SELECT n.*\n          FROM noticias_ativos na\n          JOIN noticias n ON n.id = na.noticia_id\n         WHERE na.ativo_id = ?\n         ORDER BY datetime(COALESCE(n.publicado_em, n.buscado_em)) DESC\n         LIMIT ?\n        `\n      )\n      .bind(assetId, limit)\n      .all<NewsRow>();\n\n    return rs.results;\n  }\n\n  async listNewsForUserWatchlist(userId: string, sinceHours: number, limit: number = 50) {\n    const rs = await this.db\n      .prepare(\n        `\n        SELECT DISTINCT n.*\n          FROM itens_watchlist w\n          JOIN noticias_ativos na ON na.ativo_id = w.ativo_id\n          JOIN noticias n ON n.id = na.noticia_id\n         WHERE w.usuario_id = ? AND w.ativo = 1\n           AND datetime(COALESCE(n.publicado_em, n.buscado_em)) >= datetime('now', '-' || ? || ' hours')\n         ORDER BY datetime(COALESCE(n.publicado_em, n.buscado_em)) DESC\n         LIMIT ?\n        `\n      )\n      .bind(userId, String(sinceHours), limit)\n      .all<NewsRow>();\n\n    return rs.results;\n  }\n}\n", "import type { Env } from '../types/env';\nimport { NotFoundError, ValidationError } from '../lib/errors';\nimport { MarketDataService } from './market_data.service';\nimport { AssetRepository } from '../repositories/asset.repository';\n\nexport type AssetWithLatest = {\n  id: string;\n  ticker: string;\n  nome_curto: string | null;\n  tipo: 'ACAO' | 'FII' | 'CRIPTO';\n  bolsa: string | null;\n  last_price: number | null;\n  last_updated_at: string | null;\n  source: string | null;\n};\n\nexport class AssetService {\n  constructor(\n    private env: Env,\n    private assetRepo: AssetRepository,\n    private marketData: MarketDataService\n  ) {}\n\n  async search(query: string): Promise<{ id: string; ticker: string; nome_curto: string | null; tipo: string }[]> {\n    if (!query || query.trim().length < 1) throw new ValidationError('query \u00E9 obrigat\u00F3rio');\n    return this.assetRepo.searchByTickerOrName(query.trim());\n  }\n\n  async getByTicker(ticker: string): Promise<AssetWithLatest> {\n    const asset = await this.assetRepo.getByTicker(ticker.trim().toUpperCase());\n    if (!asset) throw new NotFoundError('Ativo n\u00E3o encontrado');\n\n    const quote = await this.assetRepo.getLatestQuoteByAssetId(asset.id);\n\n    return {\n      id: asset.id,\n      ticker: asset.ticker,\n      nome_curto: asset.nome_curto,\n      tipo: asset.tipo as any,\n      bolsa: asset.bolsa,\n      last_price: quote?.preco ?? null,\n      last_updated_at: quote?.buscado_em ?? null,\n      source: quote?.fonte ?? null,\n    };\n  }\n\n  async ensureAssetExists(ticker: string): Promise<{ id: string; ticker: string; tipo: string; nome_curto: string | null }>{\n    const t = ticker.trim().toUpperCase();\n    const existing = await this.assetRepo.getByTicker(t);\n    if (existing) return existing;\n\n    const isCrypto = ['BTC', 'ETH', 'SOL'].includes(t);\n    const created = await this.assetRepo.createAsset({\n      id: crypto.randomUUID(),\n      ticker: t,\n      nome_curto: isCrypto ? t : null,\n      tipo: isCrypto ? 'CRIPTO' : 'ACAO',\n      bolsa: isCrypto ? 'GLOBAL' : 'B3',\n    });\n    return created;\n  }\n\n  async refreshAndStoreQuoteByAsset(ticker: string): Promise<{ price: number; quotedAt: string; source: string; nameShort?: string | null } | null> {\n    const t = ticker.trim().toUpperCase();\n    const asset = await this.ensureAssetExists(t);\n    const quote = await this.marketData.fetchQuote(t, asset.tipo as any);\n    if (!quote) return null;\n\n    if (quote.nameShort && quote.nameShort !== asset.nome_curto) {\n      await this.assetRepo.updateNameShort(asset.id, quote.nameShort);\n    }\n\n    await this.assetRepo.insertQuote({\n      id: crypto.randomUUID(),\n      ativo_id: asset.id,\n      preco: quote.price,\n      cotado_em: quote.quotedAt || new Date().toISOString(),\n      fonte: quote.source,\n    });\n\n    return quote;\n  }\n\n  async getCryptoSnapshot(): Promise<Array<{ ticker: string; price: number | null; updatedAt: string | null; source: string | null }>> {\n    const out: Array<{ ticker: string; price: number | null; updatedAt: string | null; source: string | null }> = [];\n    for (const t of ['BTC', 'ETH', 'SOL']) {\n      const asset = await this.ensureAssetExists(t);\n      const quote = await this.assetRepo.getLatestQuoteByAssetId(asset.id);\n      out.push({\n        ticker: t,\n        price: quote?.preco ?? null,\n        updatedAt: quote?.buscado_em ?? null,\n        source: quote?.fonte ?? null,\n      });\n    }\n    return out;\n  }\n}\n", "import type { Env } from '../types/env';\n\nexport type QuoteResponse = {\n  ticker: string;\n  price: number;\n  quotedAt: string;\n  source: string;\n  nameShort?: string | null;\n};\n\ntype AssetType = 'ACAO' | 'FII' | 'CRIPTO';\n\nexport class MarketDataService {\n  constructor(private readonly env: Env) {}\n\n  async fetchQuote(tickerRaw: string, tipo: AssetType = 'ACAO'): Promise<QuoteResponse | null> {\n    const ticker = tickerRaw.trim().toUpperCase();\n\n    if (tipo === 'CRIPTO') {\n      return this.fetchCryptoQuote(ticker);\n    }\n\n    return this.fetchBrapiQuote(ticker);\n  }\n\n  private async fetchBrapiQuote(ticker: string): Promise<QuoteResponse | null> {\n    const endpoint = new URL('https://brapi.dev/api/quote/' + encodeURIComponent(ticker));\n    if (this.env.BRAPI_TOKEN) endpoint.searchParams.set('token', this.env.BRAPI_TOKEN);\n\n    const res = await fetch(endpoint.toString(), {\n      headers: { 'Accept': 'application/json' },\n    });\n\n    if (!res.ok) return null;\n\n    const json: any = await res.json();\n    const result = json?.results?.[0];\n    const price = Number(result?.regularMarketPrice ?? result?.price);\n    if (!Number.isFinite(price)) return null;\n\n    const quotedAt = result?.regularMarketTime\n      ? new Date(result.regularMarketTime * 1000).toISOString()\n      : new Date().toISOString();\n\n    return {\n      ticker,\n      price,\n      quotedAt,\n      source: 'BRAPI',\n      nameShort: result?.shortName ?? result?.longName ?? null,\n    };\n  }\n\n  private async fetchCryptoQuote(ticker: string): Promise<QuoteResponse | null> {\n    const symbol = this.mapCryptoTickerToSymbol(ticker);\n    const url = 'https://api.binance.com/api/v3/ticker/price?symbol=' + encodeURIComponent(symbol);\n\n    const res = await fetch(url, { headers: { 'Accept': 'application/json' } });\n    if (!res.ok) return null;\n\n    const json: any = await res.json();\n    const price = Number(json?.price);\n    if (!Number.isFinite(price)) return null;\n\n    return {\n      ticker,\n      price,\n      quotedAt: new Date().toISOString(),\n      source: 'BINANCE',\n      nameShort: ticker,\n    };\n  }\n\n  private mapCryptoTickerToSymbol(ticker: string): string {\n    const t = ticker.toUpperCase();\n    if (t.endsWith('USDT')) return t;\n\n    switch (t) {\n      case 'BTC':\n        return 'BTCUSDT';\n      case 'ETH':\n        return 'ETHUSDT';\n      case 'SOL':\n        return 'SOLUSDT';\n      default:\n        return t + 'USDT';\n    }\n  }\n}\n", "import type { Router } from '../lib/router';\nimport { jsonResponse, parseJson } from '../lib/http';\nimport { z } from 'zod';\nimport { requireUser } from './_helpers';\nimport { WatchlistRepository } from '../repositories/watchlist.repository';\nimport { PlanRepository } from '../repositories/plan.repository';\nimport { AssetRepository } from '../repositories/asset.repository';\nimport { AssetService } from '../services/asset.service';\nimport { MarketDataService } from '../services/market_data.service';\nimport { WatchlistService } from '../services/watchlist.service';\n\nconst AddSchema = z.object({ ticker: z.string().min(1).max(15) });\n\nexport function registerWatchlistController(router: Router) {\n  router.get('/api/v1/watchlist', async (ctx) => {\n    const user = requireUser(ctx);\n    const watchlistRepo = new WatchlistRepository(ctx.env.DB);\n    const assetRepo = new AssetRepository(ctx.env);\n\n    const items = await watchlistRepo.listByUser(user.id);\n\n    const enriched = await Promise.all(\n      items.map(async (it) => {\n        const q = await assetRepo.getLatestQuoteByAssetId(it.ativo_id);\n        return {\n          ...it,\n          ultimo_preco: q?.preco ?? null,\n          ultima_atualizacao: q?.buscado_em ?? null\n        };\n      })\n    );\n\n    return jsonResponse({ items: enriched });\n  });\n\n  router.post('/api/v1/watchlist', async (ctx) => {\n    const user = requireUser(ctx);\n    const body = await parseJson(ctx.req, AddSchema);\n\n    const planRepo = new PlanRepository(ctx.env.DB);\n    const watchlistRepo = new WatchlistRepository(ctx.env.DB);\n\n    const plan = await planRepo.getCurrentPlanForUser(user.id);\n    const maxAllowed = plan?.max_ativos_acompanhados ?? 2;\n\n    const assetRepo = new AssetRepository(ctx.env);\n    const marketData = new MarketDataService(ctx.env);\n    const assetService = new AssetService(ctx.env, assetRepo, marketData);\n\n    const watchlistService = new WatchlistService(watchlistRepo);\n\n    const asset = await assetService.ensureAssetExists(body.ticker);\n    await watchlistService.add(user.id, asset.id, maxAllowed);\n\n    return jsonResponse({ ok: true }, { status: 201 });\n  });\n\n  router.delete('/api/v1/watchlist/:ticker', async (ctx) => {\n    const user = requireUser(ctx);\n    const ticker = (ctx.params?.ticker ?? '').toUpperCase();\n    if (!ticker) return jsonResponse({ ok: false }, { status: 400 });\n\n    const assetRepo = new AssetRepository(ctx.env);\n    const asset = await assetRepo.getByTicker(ticker);\n    if (!asset) return jsonResponse({ ok: true });\n\n    const watchlistRepo = new WatchlistRepository(ctx.env.DB);\n    const service = new WatchlistService(watchlistRepo);\n    await service.remove(user.id, asset.id);\n    return jsonResponse({ ok: true });\n  });\n}\n", "import type { D1Database } from '@cloudflare/workers-types';\n\nexport type WatchlistItemRow = {\n  id: string;\n  usuario_id: string;\n  ativo_id: string;\n  ativo: number;\n  criado_em: string;\n  ticker: string;\n  nome_curto: string | null;\n  tipo: 'ACAO' | 'FII' | 'CRIPTO';\n  bolsa: string | null;\n};\n\nexport class WatchlistRepository {\n  constructor(private db: D1Database) {}\n\n  async countActiveByUser(userId: string): Promise<number> {\n    const row = await this.db\n      .prepare(`SELECT COUNT(1) as cnt FROM itens_watchlist WHERE usuario_id = ? AND ativo = 1`)\n      .bind(userId)\n      .first<{ cnt: number }>();\n\n    return Number(row?.cnt ?? 0);\n  }\n\n  async isInWatchlist(userId: string, assetId: string): Promise<boolean> {\n    const row = await this.db\n      .prepare(`SELECT 1 as ok FROM itens_watchlist WHERE usuario_id = ? AND ativo_id = ? AND ativo = 1 LIMIT 1`)\n      .bind(userId, assetId)\n      .first<{ ok: number }>();\n    return !!row;\n  }\n\n  async listByUser(userId: string): Promise<WatchlistItemRow[]> {\n    const rs = await this.db\n      .prepare(\n        `\n        SELECT w.id,\n               w.usuario_id,\n               w.ativo_id,\n               w.ativo,\n               w.criado_em,\n               a.ticker,\n               a.nome_curto,\n               a.tipo,\n               a.bolsa\n          FROM itens_watchlist w\n          JOIN ativos a ON a.id = w.ativo_id\n         WHERE w.usuario_id = ?\n           AND w.ativo = 1\n           AND a.ativo = 1\n         ORDER BY datetime(w.criado_em) DESC\n        `\n      )\n      .bind(userId)\n      .all<WatchlistItemRow>();\n\n    return rs.results;\n  }\n\n  async listDistinctActiveAssetIds(): Promise<string[]> {\n    const rs = await this.db\n      .prepare(`SELECT DISTINCT ativo_id as id FROM itens_watchlist WHERE ativo = 1`)\n      .all<{ id: string }>();\n\n    return rs.results.map((r) => r.id);\n  }\n\n  async add(userId: string, assetId: string): Promise<string> {\n    const existing = await this.db\n      .prepare(`SELECT id, ativo FROM itens_watchlist WHERE usuario_id = ? AND ativo_id = ? LIMIT 1`)\n      .bind(userId, assetId)\n      .first<{ id: string; ativo: number }>();\n\n    if (existing) {\n      if (existing.ativo === 1) return existing.id;\n      await this.db\n        .prepare(`UPDATE itens_watchlist SET ativo = 1, criado_em = datetime('now') WHERE id = ?`)\n        .bind(existing.id)\n        .run();\n      return existing.id;\n    }\n\n    const id = crypto.randomUUID();\n    await this.db\n      .prepare(\n        `\n        INSERT INTO itens_watchlist (id, usuario_id, ativo_id, ativo)\n        VALUES (?, ?, ?, 1)\n        `\n      )\n      .bind(id, userId, assetId)\n      .run();\n\n    return id;\n  }\n\n  async remove(userId: string, assetId: string): Promise<void> {\n    await this.db\n      .prepare(`UPDATE itens_watchlist SET ativo = 0 WHERE usuario_id = ? AND ativo_id = ?`)\n      .bind(userId, assetId)\n      .run();\n  }\n}\n", "import { ValidationError } from '../lib/errors';\nimport { WatchlistRepository } from '../repositories/watchlist.repository';\n\nexport class WatchlistService {\n  constructor(private readonly repo: WatchlistRepository) {}\n\n  async add(userId: string, assetId: string, maxAllowed: number): Promise<string> {\n    const current = await this.repo.countActiveByUser(userId);\n    if (current >= maxAllowed) {\n      throw new ValidationError(`Limite do plano atingido. M\u00E1ximo de ${maxAllowed} ativos acompanhados.`);\n    }\n    return this.repo.add(userId, assetId);\n  }\n\n  async remove(userId: string, assetId: string): Promise<void> {\n    return this.repo.remove(userId, assetId);\n  }\n}\n", "import type { Router } from '../lib/router';\nimport { jsonResponse, parseJson } from '../lib/http';\nimport { z } from 'zod';\nimport { requireUser } from './_helpers';\nimport { AlertRepository } from '../repositories/alert.repository';\nimport { PlanRepository } from '../repositories/plan.repository';\nimport { AssetRepository } from '../repositories/asset.repository';\nimport { MarketDataService } from '../services/market_data.service';\nimport { AssetService } from '../services/asset.service';\nimport { AlertService } from '../services/alert.service';\n\nconst CreateSchema = z.object({\n  ticker: z.string().min(1).max(15),\n  condicao: z.enum(['ACIMA_OU_IGUAL', 'ABAIXO_OU_IGUAL']),\n  preco_alvo: z.number().positive(),\n  cooldown_minutos: z.number().int().min(1).max(7 * 24 * 60).optional()\n});\n\nconst PatchSchema = z.object({\n  condicao: z.enum(['ACIMA_OU_IGUAL', 'ABAIXO_OU_IGUAL']).optional(),\n  preco_alvo: z.number().positive().optional(),\n  ativo: z.boolean().optional(),\n  cooldown_minutos: z.number().int().min(1).max(7 * 24 * 60).optional()\n});\n\nexport function registerAlertsController(router: Router) {\n  router.get('/api/v1/alerts', async (ctx) => {\n    const user = requireUser(ctx);\n    const service = new AlertService(new AlertRepository(ctx.env.DB));\n    const items = await service.list(user.id);\n    return jsonResponse({ items });\n  });\n\n  router.get('/api/v1/alerts/events', async (ctx) => {\n    const user = requireUser(ctx);\n    const url = new URL(ctx.req.url);\n    const limit = Number(url.searchParams.get('limit') ?? '50');\n    const service = new AlertService(new AlertRepository(ctx.env.DB));\n    const items = await service.listEvents(user.id, Number.isFinite(limit) ? Math.min(Math.max(limit, 1), 200) : 50);\n    return jsonResponse({ items });\n  });\n\n  router.post('/api/v1/alerts', async (ctx) => {\n    const user = requireUser(ctx);\n    const body = await parseJson(ctx.req, CreateSchema);\n\n    const planRepo = new PlanRepository(ctx.env.DB);\n    const plan = await planRepo.getCurrentPlanForUser(user.id);\n    const maxPerAsset = plan?.max_alertas_por_ativo ?? 3;\n\n    const assetRepo = new AssetRepository(ctx.env);\n    const marketData = new MarketDataService(ctx.env);\n    const assetService = new AssetService(ctx.env, assetRepo, marketData);\n\n    const asset = await assetService.ensureAssetExists(body.ticker);\n\n    const alertService = new AlertService(new AlertRepository(ctx.env.DB));\n    const id = await alertService.create({\n      userId: user.id,\n      assetId: asset.id,\n      condicao: body.condicao,\n      precoAlvo: body.preco_alvo,\n      cooldownMinutos: body.cooldown_minutos,\n      maxAlertsPerAsset: maxPerAsset\n    });\n\n    return jsonResponse({ id }, { status: 201 });\n  });\n\n  router.patch('/api/v1/alerts/:id', async (ctx) => {\n    const user = requireUser(ctx);\n    const id = ctx.params?.id ?? '';\n    if (!id) return jsonResponse({ ok: false }, { status: 400 });\n\n    const body = await parseJson(ctx.req, PatchSchema);\n    const service = new AlertService(new AlertRepository(ctx.env.DB));\n\n    await service.update(user.id, id, {\n      condicao: body.condicao,\n      preco_alvo: body.preco_alvo,\n      ativo: body.ativo === undefined ? undefined : body.ativo ? 1 : 0,\n      cooldown_minutos: body.cooldown_minutos\n    });\n\n    return jsonResponse({ ok: true });\n  });\n\n  router.delete('/api/v1/alerts/:id', async (ctx) => {\n    const user = requireUser(ctx);\n    const id = ctx.params?.id ?? '';\n    if (!id) return jsonResponse({ ok: false }, { status: 400 });\n\n    const service = new AlertService(new AlertRepository(ctx.env.DB));\n    await service.remove(user.id, id);\n    return jsonResponse({ ok: true });\n  });\n}\n", "import type { D1Database } from \"@cloudflare/workers-types\";\n\nexport type AlertRow = {\n  id: string;\n  usuario_id: string;\n  ativo_id: string;\n  condicao: 'ACIMA_OU_IGUAL' | 'ABAIXO_OU_IGUAL';\n  preco_alvo: number;\n  ativo: number;\n  cooldown_minutos: number;\n  ultimo_disparo_em: string | null;\n  criado_em: string;\n  atualizado_em: string;\n  ticker?: string;\n  nome_curto?: string | null;\n  tipo?: 'ACAO' | 'FII' | 'CRIPTO';\n};\n\nexport type AlertFireEventRow = {\n  id: string;\n  alerta_id: string;\n  usuario_id: string;\n  ativo_id: string;\n  preco_observado: number;\n  disparado_em: string;\n  motivo: 'CONDICAO_ATINGIDA' | 'TESTE_MANUAL';\n  ticker?: string;\n};\n\nexport class AlertRepository {\n  constructor(private db: D1Database) {}\n\n  async countActiveByUserAndAsset(userId: string, assetId: string): Promise<number> {\n    const row = await this.db\n      .prepare(`SELECT COUNT(1) as cnt FROM alertas_preco WHERE usuario_id = ? AND ativo_id = ? AND ativo = 1`)\n      .bind(userId, assetId)\n      .first<{ cnt: number }>();\n\n    return Number(row?.cnt ?? 0);\n  }\n\n  async listActiveForPolling(): Promise<AlertRow[]> {\n    const rs = await this.db\n      .prepare(`SELECT id, usuario_id, ativo_id, condicao, preco_alvo, ativo, cooldown_minutos, ultimo_disparo_em, criado_em, atualizado_em FROM alertas_preco WHERE ativo = 1`)\n      .all<AlertRow>();\n    return rs.results;\n  }\n\n  async listByUser(userId: string) {\n    const rs = await this.db\n      .prepare(\n        `\n        SELECT ap.id, ap.usuario_id, ap.ativo_id, ap.condicao, ap.preco_alvo, ap.ativo,\n               ap.cooldown_minutos, ap.ultimo_disparo_em, ap.criado_em, ap.atualizado_em,\n               a.ticker as ticker, a.nome_curto as nome_curto, a.tipo as tipo\n          FROM alertas_preco ap\n          JOIN ativos a ON a.id = ap.ativo_id\n         WHERE ap.usuario_id = ?\n         ORDER BY datetime(ap.criado_em) DESC\n        `\n      )\n      .bind(userId)\n      .all<AlertRow>();\n\n    return rs.results;\n  }\n\n  async getById(userId: string, id: string) {\n    return await this.db\n      .prepare(\n        `\n        SELECT ap.id, ap.usuario_id, ap.ativo_id, ap.condicao, ap.preco_alvo, ap.ativo,\n               ap.cooldown_minutos, ap.ultimo_disparo_em, ap.criado_em, ap.atualizado_em,\n               a.ticker as ticker, a.nome_curto as nome_curto, a.tipo as tipo\n          FROM alertas_preco ap\n          JOIN ativos a ON a.id = ap.ativo_id\n         WHERE ap.usuario_id = ? AND ap.id = ?\n         LIMIT 1\n        `\n      )\n      .bind(userId, id)\n      .first<AlertRow>();\n  }\n\n  async create(input: {\n    usuario_id: string;\n    ativo_id: string;\n    condicao: AlertRow['condicao'];\n    preco_alvo: number;\n    cooldown_minutos?: number;\n  }) {\n    const id = crypto.randomUUID();\n    const cooldown = input.cooldown_minutos ?? 30;\n\n    await this.db\n      .prepare(\n        `\n        INSERT INTO alertas_preco (id, usuario_id, ativo_id, condicao, preco_alvo, ativo, cooldown_minutos)\n        VALUES (?, ?, ?, ?, ?, 1, ?)\n        `\n      )\n      .bind(id, input.usuario_id, input.ativo_id, input.condicao, input.preco_alvo, cooldown)\n      .run();\n\n    return id;\n  }\n\n  async update(userId: string, id: string, patch: Partial<Pick<AlertRow, 'condicao' | 'preco_alvo' | 'ativo' | 'cooldown_minutos'>>) {\n    const keys: string[] = [];\n    const values: any[] = [];\n\n    if (patch.condicao) {\n      keys.push('condicao = ?');\n      values.push(patch.condicao);\n    }\n\n    if (patch.preco_alvo !== undefined) {\n      keys.push('preco_alvo = ?');\n      values.push(patch.preco_alvo);\n    }\n\n    if (patch.ativo !== undefined) {\n      keys.push('ativo = ?');\n      values.push(patch.ativo);\n    }\n\n    if (patch.cooldown_minutos !== undefined) {\n      keys.push('cooldown_minutos = ?');\n      values.push(patch.cooldown_minutos);\n    }\n\n    if (!keys.length) return;\n\n    keys.push(`atualizado_em = datetime('now')`);\n\n    await this.db\n      .prepare(`UPDATE alertas_preco SET ${keys.join(', ')} WHERE usuario_id = ? AND id = ?`)\n      .bind(...values, userId, id)\n      .run();\n  }\n\n  async delete(userId: string, id: string) {\n    await this.db.prepare(`DELETE FROM alertas_preco WHERE usuario_id = ? AND id = ?`).bind(userId, id).run();\n  }\n\n  async listActiveByAssetIds(assetIds: string[]) {\n    if (!assetIds.length) return [] as AlertRow[];\n\n    const placeholders = assetIds.map(() => '?').join(',');\n    const rs = await this.db\n      .prepare(\n        `\n        SELECT id, usuario_id, ativo_id, condicao, preco_alvo, ativo, cooldown_minutos, ultimo_disparo_em, criado_em, atualizado_em\n          FROM alertas_preco\n         WHERE ativo = 1 AND ativo_id IN (${placeholders})\n        `\n      )\n      .bind(...assetIds)\n      .all<AlertRow>();\n\n    return rs.results;\n  }\n\n  async listDistinctActiveAssetIds() {\n    const rs = await this.db\n      .prepare(`SELECT DISTINCT ativo_id as ativo_id FROM alertas_preco WHERE ativo = 1`)\n      .all<{ ativo_id: string }>();\n\n    return rs.results.map((r) => r.ativo_id);\n  }\n\n  async markFired(alertId: string, firedAtIso: string) {\n    await this.db\n      .prepare(`UPDATE alertas_preco SET ultimo_disparo_em = ?, atualizado_em = datetime('now') WHERE id = ?`)\n      .bind(firedAtIso, alertId)\n      .run();\n  }\n\n  async createFireEvent(input: {\n    alerta_id: string;\n    usuario_id: string;\n    ativo_id: string;\n    preco_observado: number;\n    motivo?: AlertFireEventRow['motivo'];\n  }) {\n    const id = crypto.randomUUID();\n    const motivo = input.motivo ?? 'CONDICAO_ATINGIDA';\n\n    await this.db\n      .prepare(\n        `\n        INSERT INTO eventos_disparo_alerta (id, alerta_id, usuario_id, ativo_id, preco_observado, motivo)\n        VALUES (?, ?, ?, ?, ?, ?)\n        `\n      )\n      .bind(id, input.alerta_id, input.usuario_id, input.ativo_id, input.preco_observado, motivo)\n      .run();\n\n    return id;\n  }\n\n  async listHistoryByUser(userId: string, limit: number = 100) {\n    const rs = await this.db\n      .prepare(\n        `\n        SELECT e.id, e.alerta_id, e.usuario_id, e.ativo_id, e.preco_observado, e.disparado_em, e.motivo,\n               a.ticker as ticker\n          FROM eventos_disparo_alerta e\n          JOIN ativos a ON a.id = e.ativo_id\n         WHERE e.usuario_id = ?\n         ORDER BY datetime(e.disparado_em) DESC\n         LIMIT ?\n        `\n      )\n      .bind(userId, limit)\n      .all<AlertFireEventRow>();\n\n    return rs.results;\n  }\n}\n", "import { ValidationError } from '../lib/errors';\nimport { AlertRepository, type AlertRow } from '../repositories/alert.repository';\n\nexport class AlertService {\n  constructor(private readonly repo: AlertRepository) {}\n\n  async list(userId: string): Promise<AlertRow[]> {\n    return this.repo.listByUser(userId);\n  }\n\n  async get(userId: string, alertId: string): Promise<AlertRow | null> {\n    return this.repo.getById(userId, alertId);\n  }\n\n  async create(params: {\n    userId: string;\n    assetId: string;\n    condicao: AlertRow['condicao'];\n    precoAlvo: number;\n    cooldownMinutos?: number;\n    maxAlertsPerAsset: number;\n  }): Promise<string> {\n    const count = await this.repo.countActiveByUserAndAsset(params.userId, params.assetId);\n    if (count >= params.maxAlertsPerAsset) {\n      throw new ValidationError(\n        `Limite do plano atingido. M\u00E1ximo de ${params.maxAlertsPerAsset} alertas por ativo.`\n      );\n    }\n\n    const id = await this.repo.create({\n      usuario_id: params.userId,\n      ativo_id: params.assetId,\n      condicao: params.condicao,\n      preco_alvo: params.precoAlvo,\n      cooldown_minutos: params.cooldownMinutos\n    });\n\n    return id;\n  }\n\n  async update(userId: string, alertId: string, patch: Partial<Pick<AlertRow, 'condicao' | 'preco_alvo' | 'ativo' | 'cooldown_minutos'>>): Promise<void> {\n    await this.repo.update(userId, alertId, {\n      condicao: patch.condicao,\n      preco_alvo: patch.preco_alvo,\n      ativo: patch.ativo,\n      cooldown_minutos: patch.cooldown_minutos\n    });\n  }\n\n  async remove(userId: string, alertId: string): Promise<void> {\n    await this.repo.delete(userId, alertId);\n  }\n\n  async listEvents(userId: string, limit = 50) {\n    return this.repo.listHistoryByUser(userId, limit);\n  }\n}\n", "import type { Router } from '../lib/router';\nimport { jsonResponse, parseJson } from '../lib/http';\nimport { z } from 'zod';\nimport { PreferencesRepository } from '../repositories/preferences.repository';\nimport { requireUser } from './_helpers';\n\nconst UpdateSchema = z.object({\n  fuso_horario: z.string().optional(),\n  resumo_diario_ativo: z.boolean().optional(),\n  horario_resumo: z.string().regex(/^\\d{2}:\\d{2}$/).optional(),\n  canal_padrao_noticias: z.enum(['PUSH', 'EMAIL', 'AMBOS']).optional(),\n  alerta_aviso_push_obrigatorio: z.boolean().optional()\n});\n\nexport function registerPreferencesController(router: Router) {\n  router.get('/api/v1/preferences', async (ctx) => {\n    const user = requireUser(ctx);\n    const repo = new PreferencesRepository(ctx.env.DB);\n    await repo.ensureDefaults(user.id);\n    const preferences = await repo.getByUserId(user.id);\n    return jsonResponse({ preferences });\n  });\n\n  router.put('/api/v1/preferences', async (ctx) => {\n    const user = requireUser(ctx);\n    const body = await parseJson(ctx.req, UpdateSchema);\n    const repo = new PreferencesRepository(ctx.env.DB);\n    await repo.ensureDefaults(user.id);\n    await repo.update(user.id, {\n      fuso_horario: body.fuso_horario,\n      resumo_diario_ativo: body.resumo_diario_ativo === undefined ? undefined : body.resumo_diario_ativo ? 1 : 0,\n      horario_resumo: body.horario_resumo,\n      canal_padrao_noticias: body.canal_padrao_noticias,\n      alerta_aviso_push_obrigatorio: body.alerta_aviso_push_obrigatorio === undefined ? undefined : body.alerta_aviso_push_obrigatorio ? 1 : 0\n    });\n\n    const preferences = await repo.getByUserId(user.id);\n    return jsonResponse({ preferences });\n  });\n}\n", "import type { Router } from '../lib/router';\nimport { jsonResponse } from '../lib/http';\nimport { MarketDataService } from '../services/market_data.service';\nimport { AssetRepository } from '../repositories/asset.repository';\nimport { AssetService } from '../services/asset.service';\n\nconst CRYPTO_TICKERS = ['BTC', 'ETH', 'SOL'];\n\nexport function registerCryptoController(router: Router) {\n  router.get('/api/v1/crypto/prices', async (ctx) => {\n    const assetRepo = new AssetRepository(ctx.env);\n    const market = new MarketDataService(ctx.env);\n    const assetService = new AssetService(ctx.env, assetRepo, market);\n\n    const items = [] as any[];\n    for (const ticker of CRYPTO_TICKERS) {\n      const asset = await assetService.ensureAssetExists(ticker);\n      const quote = await assetRepo.getLatestQuoteByAssetId(asset.id);\n      items.push({ asset, latest_quote: quote });\n    }\n\n    return jsonResponse({ items });\n  });\n}\n", "import type { Router } from '../lib/router';\nimport { jsonResponse } from '../lib/http';\nimport { buildOpenApiSpec } from '../docs/openapi';\nimport { swaggerHtml } from '../docs/swagger';\n\nexport function registerDocsController(router: Router) {\n  router.get('/api/v1/openapi.json', (ctx) => {\n    const url = new URL(ctx.req.url);\n    const baseUrl = `${url.protocol}//${url.host}`;\n    const spec = buildOpenApiSpec(baseUrl);\n    return jsonResponse(spec, { status: 200 });\n  });\n\n  router.get('/api/v1/docs', (ctx) => {\n    const url = new URL(ctx.req.url);\n    const baseUrl = `${url.protocol}//${url.host}`;\n    const html = swaggerHtml(`${baseUrl}/api/v1/openapi.json`);\n    return new Response(html, {\n      status: 200,\n      headers: {\n        'content-type': 'text/html; charset=utf-8'\n      }\n    });\n  });\n}\n", "export function buildOpenApiSpec(baseUrl: string) {\n  return {\n    openapi: '3.0.3',\n    info: {\n      title: 'FinancialSecretary API',\n      version: '0.1.0',\n      description: 'API do FinancialSecretary (Cloudflare Workers + D1)'\n    },\n    servers: [{ url: baseUrl.replace(/\\/$/, '') }],\n    components: {\n      securitySchemes: {\n        bearerAuth: { type: 'http', scheme: 'bearer', bearerFormat: 'JWT' }\n      }\n    },\n    security: [{ bearerAuth: [] }],\n    paths: {\n      '/api/v1/health': {\n        get: {\n          summary: 'Healthcheck',\n          security: [],\n          responses: { '200': { description: 'OK' } }\n        }\n      },\n      '/api/v1/auth/register': {\n        post: {\n          summary: 'Criar conta',\n          security: [],\n          requestBody: {\n            required: true,\n            content: {\n              'application/json': {\n                schema: {\n                  type: 'object',\n                  required: ['email', 'senha', 'nome', 'aceitou_termos'],\n                  properties: {\n                    email: { type: 'string' },\n                    senha: { type: 'string' },\n                    nome: { type: 'string' },\n                    aceitou_termos: { type: 'boolean' }\n                  }\n                }\n              }\n            }\n          },\n          responses: { '200': { description: 'OK' } }\n        }\n      },\n      '/api/v1/auth/login': {\n        post: {\n          summary: 'Login',\n          security: [],\n          requestBody: {\n            required: true,\n            content: {\n              'application/json': {\n                schema: {\n                  type: 'object',\n                  required: ['email', 'senha'],\n                  properties: {\n                    email: { type: 'string' },\n                    senha: { type: 'string' }\n                  }\n                }\n              }\n            }\n          },\n          responses: { '200': { description: 'OK' } }\n        }\n      },\n      '/api/v1/me': {\n        get: { summary: 'Dados da conta', responses: { '200': { description: 'OK' } } },\n        put: { summary: 'Atualizar conta', responses: { '200': { description: 'OK' } } },\n        delete: { summary: 'Excluir conta (soft delete)', responses: { '200': { description: 'OK' } } }\n      },\n      '/api/v1/preferences': {\n        get: { summary: 'Prefer\u00EAncias do usu\u00E1rio', responses: { '200': { description: 'OK' } } },\n        put: { summary: 'Atualizar prefer\u00EAncias do usu\u00E1rio', responses: { '200': { description: 'OK' } } }\n      },\n      '/api/v1/assets/search': {\n        get: {\n          summary: 'Buscar ativo por ticker/nome',\n          parameters: [{ name: 'q', in: 'query', schema: { type: 'string' }, required: true }],\n          responses: { '200': { description: 'OK' } }\n        }\n      },\n      '/api/v1/news': {\n        get: {\n          summary: 'Not\u00EDcias relacionadas aos ativos do usu\u00E1rio',\n          parameters: [\n            { name: 'sinceHours', in: 'query', schema: { type: 'integer', default: 24 } },\n            { name: 'limit', in: 'query', schema: { type: 'integer', default: 50 } }\n          ],\n          responses: { '200': { description: 'OK' } }\n        }\n      },\n      '/api/v1/digest/latest': {\n        get: { summary: 'Resumo di\u00E1rio mais recente', responses: { '200': { description: 'OK' } } }\n      },\n      '/api/v1/watchlist': {\n        get: { summary: 'Listar watchlist', responses: { '200': { description: 'OK' } } },\n        post: { summary: 'Adicionar ativo', responses: { '200': { description: 'OK' } } }\n      },\n      '/api/v1/watchlist/{ticker}': {\n        delete: {\n          summary: 'Remover ativo',\n          parameters: [{ name: 'ticker', in: 'path', required: true, schema: { type: 'string' } }],\n          responses: { '200': { description: 'OK' } }\n        }\n      },\n      '/api/v1/alerts': {\n        get: { summary: 'Listar alertas', responses: { '200': { description: 'OK' } } },\n        post: { summary: 'Criar alerta', responses: { '200': { description: 'OK' } } }\n      },\n      '/api/v1/alerts/{id}': {\n        put: {\n          summary: 'Atualizar alerta',\n          parameters: [{ name: 'id', in: 'path', required: true, schema: { type: 'string' } }],\n          responses: { '200': { description: 'OK' } }\n        },\n        delete: {\n          summary: 'Excluir alerta',\n          parameters: [{ name: 'id', in: 'path', required: true, schema: { type: 'string' } }],\n          responses: { '200': { description: 'OK' } }\n        }\n      },\n      '/api/v1/notifications/devices': {\n        get: { summary: 'Listar dispositivos do usu\u00E1rio', responses: { '200': { description: 'OK' } } }\n      },\n      '/api/v1/notifications/device': {\n        post: { summary: 'Registrar/atualizar dispositivo', responses: { '201': { description: 'Created' } } }\n      },\n      '/api/v1/notifications/push/subscribe': {\n        post: { summary: 'Salvar subscription de Web Push', responses: { '201': { description: 'Created' } } }\n      },\n      '/api/v1/notifications/push/revoke': {\n        post: { summary: 'Revogar subscription de Web Push', responses: { '200': { description: 'OK' } } }\n      },\n      '/api/v1/notifications/push/permission': {\n        post: { summary: 'Registrar estado de permiss\u00E3o de notifica\u00E7\u00E3o', responses: { '201': { description: 'Created' } } }\n      },\n      '/api/v1/notifications/messages': {\n        get: { summary: 'Listar mensagens de notifica\u00E7\u00E3o do usu\u00E1rio', responses: { '200': { description: 'OK' } } }\n      },\n      '/api/v1/dashboard': {\n        get: { summary: 'Dashboard', responses: { '200': { description: 'OK' } } }\n      },\n      '/api/v1/crypto/prices': {\n        get: { summary: 'Pre\u00E7o cripto (BTC/ETH/SOL)', responses: { '200': { description: 'OK' } } }\n      },\n      '/api/v1/admin/summary': {\n        get: { summary: 'Admin: m\u00E9tricas b\u00E1sicas', responses: { '200': { description: 'OK' } } }\n      },\n      '/api/v1/admin/jobs/recent': {\n        get: { summary: 'Admin: jobs recentes', responses: { '200': { description: 'OK' } } }\n      },\n      '/api/v1/admin/errors/recent': {\n        get: { summary: 'Admin: erros recentes', responses: { '200': { description: 'OK' } } }\n      }\n    }\n  };\n}\n", "export function swaggerHtml(openApiUrl: string) {\n  const url = openApiUrl.replace(/\"/g, '&quot;');\n  return `<!doctype html>\n<html lang=\"pt-br\">\n<head>\n  <meta charset=\"utf-8\" />\n  <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />\n  <title>FinancialSecretary API Docs</title>\n  <link rel=\"stylesheet\" href=\"https://unpkg.com/swagger-ui-dist@5/swagger-ui.css\" />\n  <style>\n    body { margin: 0; }\n  </style>\n</head>\n<body>\n  <div id=\"swagger-ui\"></div>\n  <script src=\"https://unpkg.com/swagger-ui-dist@5/swagger-ui-bundle.js\"></script>\n  <script>\n    window.onload = () => {\n      window.ui = SwaggerUIBundle({\n        url: \"${url}\",\n        dom_id: '#swagger-ui',\n        deepLinking: true,\n        persistAuthorization: true,\n      });\n    };\n  </script>\n</body>\n</html>`;\n}\n", "import type { Router } from '../lib/router';\nimport { jsonResponse, parseJson } from '../lib/http';\nimport { z } from 'zod';\nimport { NotificationRepository } from '../repositories/notification.repository';\nimport { NotificationService } from '../services/notification.service';\nimport { requireUser } from './_helpers';\n\nconst UpsertDeviceSchema = z.object({\n  id: z.string().optional(),\n  apelido_dispositivo: z.string().max(60).optional(),\n  plataforma: z.enum(['web', 'android', 'ios']).optional(),\n  user_agent: z.string().optional()\n});\n\nconst SubscribeSchema = z.object({\n  dispositivo_id: z.string().min(1),\n  subscription: z.object({\n    endpoint: z.string().url(),\n    keys: z.object({\n      p256dh: z.string().min(1),\n      auth: z.string().min(1)\n    })\n  })\n});\n\nconst PermissionSchema = z.object({\n  dispositivo_id: z.string().optional(),\n  estado: z.enum(['CONCEDIDA', 'NEGADA', 'BLOQUEADA', 'PADRAO']),\n  origem: z.enum(['POPUP_NAVEGADOR', 'TELA_CONFIG_APP', 'CONFIG_SISTEMA', 'DESCONHECIDA']),\n  detalhes: z.string().optional()\n});\n\nconst RevokeSchema = z.object({\n  subscription_id: z.string().min(1)\n});\n\nexport function registerNotificationsController(router: Router) {\n  router.get('/api/v1/notifications/devices', async (ctx) => {\n    const user = requireUser(ctx);\n    const service = new NotificationService(new NotificationRepository(ctx.env.DB));\n    const devices = await service.listDevices(user.id);\n    return jsonResponse({ devices });\n  });\n\n  router.post('/api/v1/notifications/device', async (ctx) => {\n    const user = requireUser(ctx);\n    const body = await parseJson(ctx.req, UpsertDeviceSchema);\n    const service = new NotificationService(new NotificationRepository(ctx.env.DB));\n    const device = await service.upsertDevice({\n      usuario_id: user.id,\n      id: body.id,\n      apelido_dispositivo: body.apelido_dispositivo,\n      plataforma: body.plataforma,\n      user_agent: body.user_agent\n    });\n    return jsonResponse({ device },  { status: 201 });\n  });\n\n  router.post('/api/v1/notifications/push/subscribe', async (ctx) => {\n    const user = requireUser(ctx);\n    const body = await parseJson(ctx.req, SubscribeSchema);\n    const service = new NotificationService(new NotificationRepository(ctx.env.DB));\n    const subscription = await service.upsertPushSubscription({\n      usuario_id: user.id,\n      dispositivo_id: body.dispositivo_id,\n      subscription: body.subscription\n    });\n    return jsonResponse({ subscription }, { status: 201 });\n  });\n\n  router.post('/api/v1/notifications/push/revoke', async (ctx) => {\n    const user = requireUser(ctx);\n    const body = await parseJson(ctx.req, RevokeSchema);\n    const service = new NotificationService(new NotificationRepository(ctx.env.DB));\n    await service.revokeSubscriptionById({ usuario_id: user.id, subscription_id: body.subscription_id });\n    return jsonResponse({ ok: true });\n  });\n\n  router.post('/api/v1/notifications/push/permission', async (ctx) => {\n    const user = requireUser(ctx);\n    const body = await parseJson(ctx.req, PermissionSchema);\n    const service = new NotificationService(new NotificationRepository(ctx.env.DB));\n    const permission = await service.recordPermission({\n      usuario_id: user.id,\n      dispositivo_id: body.dispositivo_id,\n      estado: body.estado,\n      origem: body.origem,\n      detalhes: body.detalhes\n    });\n    return jsonResponse({ permission }, { status: 201 });\n  });\n\n  router.get('/api/v1/notifications/messages', async (ctx) => {\n    const user = requireUser(ctx);\n    const service = new NotificationService(new NotificationRepository(ctx.env.DB));\n    const messages = await service.listMessages(user.id, 50);\n    return jsonResponse({ messages });\n  });\n}\n", "import type { D1Database } from '@cloudflare/workers-types';\n\nexport type NotificationChannel = 'PUSH' | 'EMAIL';\nexport type NotificationType = 'ALERTA_PRECO' | 'RESUMO_DIARIO' | 'AVISO_SISTEMA';\nexport type NotificationStatus = 'PENDENTE' | 'ENVIADA' | 'FALHOU' | 'IGNORADA';\n\nexport type NotificationPermissionState = 'CONCEDIDA' | 'NEGADA' | 'BLOQUEADA' | 'PADRAO';\nexport type NotificationPermissionOrigin =\n  | 'POPUP_NAVEGADOR'\n  | 'TELA_CONFIG_APP'\n  | 'CONFIG_SISTEMA'\n  | 'DESCONHECIDA';\n\nexport interface DeviceRow {\n  id: string;\n  usuario_id: string;\n  apelido_dispositivo: string | null;\n  plataforma: string | null;\n  user_agent: string | null;\n  visto_por_ultimo_em: string | null;\n  ativo: number;\n  criado_em: string;\n  atualizado_em: string;\n}\n\nexport interface PushSubscriptionRow {\n  id: string;\n  usuario_id: string;\n  dispositivo_id: string;\n  endpoint: string;\n  p256dh: string;\n  auth: string;\n  valida: number;\n  criado_em: string;\n  revogado_em: string | null;\n}\n\nexport interface NotificationMessageRow {\n  id: string;\n  usuario_id: string;\n  tipo: NotificationType;\n  canal: NotificationChannel;\n  titulo: string;\n  corpo: string | null;\n  deep_link: string | null;\n  status: NotificationStatus;\n  id_provedor: string | null;\n  erro: string | null;\n  criado_em: string;\n  enviado_em: string | null;\n}\n\nexport interface PermissionHistoryRow {\n  id: string;\n  usuario_id: string;\n  dispositivo_id: string | null;\n  estado: NotificationPermissionState;\n  origem: NotificationPermissionOrigin;\n  ocorrido_em: string;\n  detalhes: string | null;\n}\n\nexport class NotificationRepository {\n  constructor(private readonly db: D1Database) {}\n\n  async upsertDevice(input: {\n    id?: string;\n    usuario_id: string;\n    apelido_dispositivo?: string | null;\n    plataforma?: string | null;\n    user_agent?: string | null;\n  }): Promise<DeviceRow> {\n    const now = new Date().toISOString();\n\n    if (input.id) {\n      const update = await this.db\n        .prepare(\n          `UPDATE dispositivos_usuario\n             SET apelido_dispositivo = ?,\n                 plataforma = ?,\n                 user_agent = ?,\n                 visto_por_ultimo_em = ?,\n                 ativo = 1,\n                 atualizado_em = datetime('now')\n           WHERE id = ? AND usuario_id = ?`\n        )\n        .bind(\n          input.apelido_dispositivo ?? null,\n          input.plataforma ?? null,\n          input.user_agent ?? null,\n          now,\n          input.id,\n          input.usuario_id\n        )\n        .run();\n\n      if (update.success && (update.meta.changes ?? 0) > 0) {\n        const row = await this.getDeviceById(input.id, input.usuario_id);\n        if (row) return row;\n      }\n    }\n\n    const id = crypto.randomUUID();\n    await this.db\n      .prepare(\n        `INSERT INTO dispositivos_usuario (id, usuario_id, apelido_dispositivo, plataforma, user_agent, visto_por_ultimo_em, ativo)\n         VALUES (?, ?, ?, ?, ?, ?, 1)`\n      )\n      .bind(\n        id,\n        input.usuario_id,\n        input.apelido_dispositivo ?? null,\n        input.plataforma ?? null,\n        input.user_agent ?? null,\n        now\n      )\n      .run();\n\n    const created = await this.getDeviceById(id, input.usuario_id);\n    if (!created) throw new Error('Falha ao criar dispositivo');\n    return created;\n  }\n\n  async getDeviceById(id: string, usuarioId: string): Promise<DeviceRow | null> {\n    const res = await this.db\n      .prepare(\n        `SELECT * FROM dispositivos_usuario\n         WHERE id = ? AND usuario_id = ?`\n      )\n      .bind(id, usuarioId)\n      .first<DeviceRow>();\n    return res ?? null;\n  }\n\n  async listDevicesByUser(usuarioId: string): Promise<DeviceRow[]> {\n    const res = await this.db\n      .prepare(\n        `SELECT * FROM dispositivos_usuario\n         WHERE usuario_id = ?\n         ORDER BY atualizado_em DESC`\n      )\n      .bind(usuarioId)\n      .all<DeviceRow>();\n    return res.results ?? [];\n  }\n\n  async upsertPushSubscription(input: {\n    usuario_id: string;\n    dispositivo_id: string;\n    endpoint: string;\n    p256dh: string;\n    auth: string;\n  }): Promise<PushSubscriptionRow> {\n    const id = crypto.randomUUID();\n\n    await this.db\n      .prepare(\n        `INSERT INTO inscricoes_push (id, usuario_id, dispositivo_id, endpoint, p256dh, auth, valida)\n         VALUES (?, ?, ?, ?, ?, ?, 1)\n         ON CONFLICT(dispositivo_id, endpoint) DO UPDATE SET\n           p256dh = excluded.p256dh,\n           auth = excluded.auth,\n           valida = 1,\n           revogado_em = NULL`\n      )\n      .bind(id, input.usuario_id, input.dispositivo_id, input.endpoint, input.p256dh, input.auth)\n      .run();\n\n    const row = await this.db\n      .prepare(\n        `SELECT * FROM inscricoes_push\n         WHERE usuario_id = ? AND dispositivo_id = ? AND endpoint = ?`\n      )\n      .bind(input.usuario_id, input.dispositivo_id, input.endpoint)\n      .first<PushSubscriptionRow>();\n\n    if (!row) throw new Error('Falha ao registrar inscricao push');\n    return row;\n  }\n\n  async revokePushSubscription(input: {\n    usuario_id: string;\n    dispositivo_id: string;\n    endpoint: string;\n  }): Promise<void> {\n    await this.db\n      .prepare(\n        `UPDATE inscricoes_push\n           SET valida = 0,\n               revogado_em = datetime('now')\n         WHERE usuario_id = ? AND dispositivo_id = ? AND endpoint = ?`\n      )\n      .bind(input.usuario_id, input.dispositivo_id, input.endpoint)\n      .run();\n  }\n\n  async listValidSubscriptionsByUser(usuarioId: string): Promise<PushSubscriptionRow[]> {\n    const res = await this.db\n      .prepare(\n        `SELECT * FROM inscricoes_push\n         WHERE usuario_id = ? AND valida = 1`\n      )\n      .bind(usuarioId)\n      .all<PushSubscriptionRow>();\n    return res.results ?? [];\n  }\n\n  async markSubscriptionInvalidByEndpoint(endpoint: string): Promise<void> {\n    await this.db\n      .prepare(\n        `UPDATE inscricoes_push\n           SET valida = 0,\n               revogado_em = datetime('now')\n         WHERE endpoint = ?`\n      )\n      .bind(endpoint)\n      .run();\n  }\n\n  async recordPermissionHistory(input: {\n    usuario_id: string;\n    dispositivo_id?: string | null;\n    estado: NotificationPermissionState;\n    origem: NotificationPermissionOrigin;\n    detalhes?: string | null;\n  }): Promise<void> {\n    const id = crypto.randomUUID();\n    await this.db\n      .prepare(\n        `INSERT INTO historico_permissao_notificacao (id, usuario_id, dispositivo_id, estado, origem, detalhes)\n         VALUES (?, ?, ?, ?, ?, ?)`\n      )\n      .bind(\n        id,\n        input.usuario_id,\n        input.dispositivo_id ?? null,\n        input.estado,\n        input.origem,\n        input.detalhes ?? null\n      )\n      .run();\n  }\n\n  async createMessage(input: {\n    usuario_id: string;\n    tipo: NotificationType;\n    canal: NotificationChannel;\n    titulo: string;\n    corpo?: string | null;\n    deep_link?: string | null;\n    status?: NotificationStatus;\n  }): Promise<NotificationMessageRow> {\n    const id = crypto.randomUUID();\n    const status = input.status ?? 'PENDENTE';\n\n    await this.db\n      .prepare(\n        `INSERT INTO mensagens_notificacao (id, usuario_id, tipo, canal, titulo, corpo, deep_link, status)\n         VALUES (?, ?, ?, ?, ?, ?, ?, ?)`\n      )\n      .bind(\n        id,\n        input.usuario_id,\n        input.tipo,\n        input.canal,\n        input.titulo,\n        input.corpo ?? null,\n        input.deep_link ?? null,\n        status\n      )\n      .run();\n\n    const row = await this.db\n      .prepare('SELECT * FROM mensagens_notificacao WHERE id = ?')\n      .bind(id)\n      .first<NotificationMessageRow>();\n\n    if (!row) throw new Error('Falha ao criar mensagem');\n    return row;\n  }\n\n  async markMessageSent(id: string, providerId?: string | null): Promise<void> {\n    await this.db\n      .prepare(\n        `UPDATE mensagens_notificacao\n           SET status = 'ENVIADA',\n               id_provedor = ?,\n               erro = NULL,\n               enviado_em = datetime('now')\n         WHERE id = ?`\n      )\n      .bind(providerId ?? null, id)\n      .run();\n  }\n\n  async markMessageFailed(id: string, error: string): Promise<void> {\n    await this.db\n      .prepare(\n        `UPDATE mensagens_notificacao\n           SET status = 'FALHOU',\n               erro = ?,\n               enviado_em = datetime('now')\n         WHERE id = ?`\n      )\n      .bind(error, id)\n      .run();\n  }\n\n  async markMessageIgnored(id: string, reason?: string | null): Promise<void> {\n    await this.db\n      .prepare(\n        `UPDATE mensagens_notificacao\n           SET status = 'IGNORADA',\n               erro = ?\n         WHERE id = ?`\n      )\n      .bind(reason ?? null, id)\n      .run();\n  }\n\n  async listMessagesByUser(usuarioId: string, limit = 50): Promise<NotificationMessageRow[]> {\n    const res = await this.db\n      .prepare(\n        `SELECT * FROM mensagens_notificacao\n         WHERE usuario_id = ?\n         ORDER BY criado_em DESC\n         LIMIT ?`\n      )\n      .bind(usuarioId, limit)\n      .all<NotificationMessageRow>();\n\n    return res.results ?? [];\n  }\n\n  async getPushSubscriptionById(id: string, usuarioId: string): Promise<PushSubscriptionRow | null> {\n    const row = await this.db\n      .prepare(`SELECT * FROM inscricoes_push WHERE id = ? AND usuario_id = ? LIMIT 1`)\n      .bind(id, usuarioId)\n      .first<PushSubscriptionRow>();\n    return row ?? null;\n  }\n\n  async revokePushSubscriptionById(usuarioId: string, subscriptionId: string): Promise<void> {\n    await this.db\n      .prepare(\n        `UPDATE inscricoes_push\n           SET valida = 0,\n               revogado_em = datetime('now')\n         WHERE id = ? AND usuario_id = ?`\n      )\n      .bind(subscriptionId, usuarioId)\n      .run();\n  }\n\n  async listPendingMessages(limit = 100): Promise<NotificationMessageRow[]> {\n    const res = await this.db\n      .prepare(\n        `SELECT * FROM mensagens_notificacao\n         WHERE status = 'PENDENTE'\n         ORDER BY datetime(criado_em) ASC\n         LIMIT ?`\n      )\n      .bind(limit)\n      .all<NotificationMessageRow>();\n\n    return res.results ?? [];\n  }\n}\n", "import { AppError } from '../lib/errors';\nimport type { DeviceRow, NotificationMessageRow, PushSubscriptionRow, PermissionHistoryRow } from '../repositories/notification.repository';\nimport { NotificationRepository } from '../repositories/notification.repository';\n\nexport type WebPushSubscription = {\n  endpoint: string;\n  keys: {\n    p256dh: string;\n    auth: string;\n  };\n};\n\nexport class NotificationService {\n  constructor(private notifRepo: NotificationRepository) {}\n\n  async upsertDevice(params: {\n    usuario_id: string;\n    id?: string;\n    apelido_dispositivo?: string | null;\n    plataforma?: string | null;\n    user_agent?: string | null;\n  }): Promise<DeviceRow> {\n    return await this.notifRepo.upsertDevice(params);\n  }\n\n  async listDevices(usuarioId: string): Promise<DeviceRow[]> {\n    return await this.notifRepo.listDevicesByUser(usuarioId);\n  }\n\n  async upsertPushSubscription(params: {\n    usuario_id: string;\n    dispositivo_id: string;\n    subscription: WebPushSubscription;\n  }): Promise<PushSubscriptionRow> {\n    if (!params.subscription?.endpoint) {\n      throw new AppError('subscription_invalida', 400, 'Subscription inv\u00E1lida.');\n    }\n\n    return await this.notifRepo.upsertPushSubscription({\n      usuario_id: params.usuario_id,\n      dispositivo_id: params.dispositivo_id,\n      endpoint: params.subscription.endpoint,\n      p256dh: params.subscription.keys.p256dh,\n      auth: params.subscription.keys.auth\n    });\n  }\n\n  async revokePushSubscription(params: { usuario_id: string; dispositivo_id: string; endpoint: string }): Promise<void> {\n    await this.notifRepo.revokePushSubscription(params);\n  }\n\n  async recordPermission(params: {\n    usuario_id: string;\n    dispositivo_id?: string | null;\n    estado: 'CONCEDIDA' | 'NEGADA' | 'BLOQUEADA' | 'PADRAO';\n    origem: 'POPUP_NAVEGADOR' | 'TELA_CONFIG_APP' | 'CONFIG_SISTEMA' | 'DESCONHECIDA';\n    detalhes?: string | null;\n  }): Promise<PermissionHistoryRow> {\n    return await this.notifRepo.recordPermissionHistory({\n      ...params,\n      dispositivo_id: params.dispositivo_id ?? null,\n      detalhes: params.detalhes ?? null\n    });\n  }\n\n  async listMessages(usuarioId: string, limit = 50): Promise<NotificationMessageRow[]> {\n    return await this.notifRepo.listMessagesByUser(usuarioId, limit);\n  }\n\n  async revokeSubscriptionById(params: { usuario_id: string; subscription_id: string }): Promise<void> {\n    const row = await this.notifRepo.getPushSubscriptionById(params.subscription_id, params.usuario_id);\n    if (!row) {\n      return;\n    }\n\n    await this.notifRepo.revokePushSubscriptionById(params.usuario_id, params.subscription_id);\n  }\n}\n", "import type { Router } from '../lib/router';\nimport { jsonResponse } from '../lib/http';\nimport { requireUser } from './_helpers';\nimport { WatchlistRepository } from '../repositories/watchlist.repository';\nimport { AssetRepository } from '../repositories/asset.repository';\nimport { AlertRepository } from '../repositories/alert.repository';\nimport { DigestRepository } from '../repositories/digest.repository';\nimport { NotificationRepository } from '../repositories/notification.repository';\n\nexport function registerDashboardController(router: Router) {\n  router.get('/api/v1/dashboard', async (ctx) => {\n    const user = requireUser(ctx);\n\n    const watchlistRepo = new WatchlistRepository(ctx.env.DB);\n    const assetRepo = new AssetRepository(ctx.env);\n    const alertRepo = new AlertRepository(ctx.env.DB);\n    const digestRepo = new DigestRepository(ctx.env.DB);\n    const notifRepo = new NotificationRepository(ctx.env.DB);\n\n    const watchlist = await watchlistRepo.listByUser(user.id);\n    const watchlistWithQuote = await Promise.all(\n      watchlist.map(async (i) => {\n        const q = await assetRepo.getLatestQuoteByAssetId(i.ativo_id);\n        return {\n          ...i,\n          cotacao: q ? { preco: q.preco, cotado_em: q.cotado_em, fonte: q.fonte } : null\n        };\n      })\n    );\n\n    const alerts = await alertRepo.listByUser(user.id);\n    const alertHistory = await alertRepo.listHistoryByUser(user.id, 20);\n\n    const lastDigest = await digestRepo.getLatestDigestForUser(user.id);\n    const lastDigestItems = lastDigest ? await digestRepo.listDigestItems(lastDigest.id) : [];\n\n    const messages = await notifRepo.listMessagesByUser(user.id, 20);\n\n    return jsonResponse({\n      watchlist: watchlistWithQuote,\n      alerts,\n      alert_history: alertHistory,\n      last_digest: lastDigest ? { ...lastDigest, items: lastDigestItems } : null,\n      notifications: messages\n    });\n  });\n}\n", "import type { D1Database } from '@cloudflare/workers-types';\n\nexport interface DailyDigestRow {\n  id: string;\n  usuario_id: string;\n  data_resumo: string;\n  provedor_modelo: string | null;\n  nome_modelo: string | null;\n  texto_resumo: string | null;\n  criado_em: string;\n  enviado_em: string | null;\n}\n\nexport interface DailyDigestItemRow {\n  id: string;\n  resumo_id: string;\n  noticia_id: string;\n  ativo_id: string | null;\n  bullets: string | null;\n  ordem: number;\n}\n\nexport class DigestRepository {\n  constructor(private db: D1Database) {}\n\n  async getLatestDigestForUser(usuarioId: string): Promise<DailyDigestRow | null> {\n    const row = await this.db\n      .prepare(\n        `SELECT *\n           FROM resumos_diarios\n          WHERE usuario_id = ?\n          ORDER BY data_resumo DESC\n          LIMIT 1`\n      )\n      .bind(usuarioId)\n      .first<DailyDigestRow>();\n\n    return row ?? null;\n  }\n\n  async getDigestByUserAndDate(usuarioId: string, dataResumo: string): Promise<DailyDigestRow | null> {\n    const row = await this.db\n      .prepare(\n        `SELECT *\n           FROM resumos_diarios\n          WHERE usuario_id = ? AND data_resumo = ?\n          LIMIT 1`\n      )\n      .bind(usuarioId, dataResumo)\n      .first<DailyDigestRow>();\n\n    return row ?? null;\n  }\n\n  async upsertDigest(params: {\n    id: string;\n    usuario_id: string;\n    data_resumo: string;\n    provedor_modelo?: string | null;\n    nome_modelo?: string | null;\n    texto_resumo?: string | null;\n  }): Promise<void> {\n    const { id, usuario_id, data_resumo, provedor_modelo, nome_modelo, texto_resumo } = params;\n\n    await this.db\n      .prepare(\n        `INSERT INTO resumos_diarios (id, usuario_id, data_resumo, provedor_modelo, nome_modelo, texto_resumo)\n         VALUES (?, ?, ?, ?, ?, ?)\n         ON CONFLICT(usuario_id, data_resumo) DO UPDATE SET\n           provedor_modelo = excluded.provedor_modelo,\n           nome_modelo = excluded.nome_modelo,\n           texto_resumo = excluded.texto_resumo`\n      )\n      .bind(id, usuario_id, data_resumo, provedor_modelo ?? null, nome_modelo ?? null, texto_resumo ?? null)\n      .run();\n  }\n\n  async markDigestSent(resumoId: string): Promise<void> {\n    await this.db\n      .prepare(\n        `UPDATE resumos_diarios\n            SET enviado_em = datetime('now')\n          WHERE id = ?`\n      )\n      .bind(resumoId)\n      .run();\n  }\n\n  async replaceDigestItems(resumoId: string, items: Array<Omit<DailyDigestItemRow, 'resumo_id'>>): Promise<void> {\n    await this.db\n      .prepare(`DELETE FROM itens_resumo_diario WHERE resumo_id = ?`)\n      .bind(resumoId)\n      .run();\n\n    for (const item of items) {\n      await this.db\n        .prepare(\n          `INSERT INTO itens_resumo_diario (id, resumo_id, noticia_id, ativo_id, bullets, ordem)\n           VALUES (?, ?, ?, ?, ?, ?)`\n        )\n        .bind(item.id, resumoId, item.noticia_id, item.ativo_id ?? null, item.bullets ?? null, item.ordem)\n        .run();\n    }\n  }\n\n  async listDigestItems(resumoId: string): Promise<DailyDigestItemRow[]> {\n    const res = await this.db\n      .prepare(\n        `SELECT *\n           FROM itens_resumo_diario\n          WHERE resumo_id = ?\n          ORDER BY ordem ASC`\n      )\n      .bind(resumoId)\n      .all<DailyDigestItemRow>();\n\n    return res.results ?? [];\n  }\n}\n", "import type { Router } from '../lib/router';\nimport { jsonResponse } from '../lib/http';\nimport { requireUser } from './_helpers';\nimport { NewsRepository } from '../repositories/news.repository';\n\nexport function registerNewsController(router: Router) {\n  router.get('/api/v1/news', async (ctx) => {\n    const user = requireUser(ctx);\n    const sinceHours = ctx.query.sinceHours ? Number(ctx.query.sinceHours) : 24;\n    const limit = ctx.query.limit ? Number(ctx.query.limit) : 50;\n\n    const repo = new NewsRepository(ctx.env.DB);\n    const news = await repo.listNewsForUserWatchlist(user.id, Number.isFinite(sinceHours) ? sinceHours : 24, Number.isFinite(limit) ? limit : 50);\n\n    return jsonResponse({ news });\n  });\n}\n", "import type { Router } from '../lib/router';\nimport { jsonResponse } from '../lib/http';\nimport { requireUser } from './_helpers';\nimport { DigestRepository } from '../repositories/digest.repository';\n\nexport function registerDigestController(router: Router) {\n  router.get('/api/v1/digest/latest', async (ctx) => {\n    const user = requireUser(ctx);\n    const repo = new DigestRepository(ctx.env.DB);\n    const digest = await repo.getLatestDigestForUser(user.id);\n    if (!digest) return jsonResponse({ digest: null });\n    const items = await repo.listDigestItems(digest.id);\n    return jsonResponse({ digest: { ...digest, items } });\n  });\n}\n", "import type { Router } from '../lib/router';\nimport { jsonResponse } from '../lib/http';\nimport { AppError } from '../lib/errors';\nimport { requireUser } from './_helpers';\nimport { JobRepository } from '../repositories/job.repository';\n\nfunction requireAdmin(ctx: any) {\n  const user = requireUser(ctx);\n  if (user.perfil !== 'ADMIN') {\n    throw new AppError(403, \"403\",'Acesso negado.');\n  }\n  return user;\n}\n\nexport function registerAdminController(router: Router) {\n  router.get('/api/v1/admin/summary', async (ctx) => {\n    requireAdmin(ctx);\n\n    const db = ctx.env.DB;\n    const usersRow = await db.prepare(`SELECT COUNT(1) as c FROM usuarios WHERE excluido_em IS NULL`).first<{ c: number }>();\n    const subsRow = await db.prepare(`SELECT COUNT(1) as c FROM inscricoes_push WHERE valida = 1`).first<{ c: number }>();\n    const watchRow = await db.prepare(`SELECT COUNT(1) as c FROM itens_watchlist WHERE ativo = 1`).first<{ c: number }>();\n    const assetsRow = await db.prepare(`SELECT COUNT(1) as c FROM ativos WHERE ativo = 1`).first<{ c: number }>();\n\n    return jsonResponse({\n      totals: {\n        users: usersRow?.c ?? 0,\n        push_subscriptions_valid: subsRow?.c ?? 0,\n        watchlist_items_active: watchRow?.c ?? 0,\n        assets_active: assetsRow?.c ?? 0\n      }\n    });\n  });\n\n  router.get('/api/v1/admin/jobs/recent', async (ctx) => {\n    requireAdmin(ctx);\n    const repo = new JobRepository(ctx.env.DB);\n    const jobs = await repo.listRecentExecutions(50);\n    return jsonResponse({ jobs });\n  });\n\n  router.get('/api/v1/admin/errors/recent', async (ctx) => {\n    requireAdmin(ctx);\n    const repo = new JobRepository(ctx.env.DB);\n    const errors = await repo.listRecentErrors(50);\n    return jsonResponse({ errors });\n  });\n}\n", "import type { D1Database } from '@cloudflare/workers-types';\n\nexport type JobType =\n  | 'POLLING_PRECO'\n  | 'COLETA_NOTICIAS'\n  | 'DEDUPE_NOTICIAS'\n  | 'GERAR_RESUMO'\n  | 'DISPARO_NOTIFICACOES';\n\nexport type JobStatus = 'EXECUTANDO' | 'SUCESSO' | 'FALHA' | 'PARCIAL';\n\nexport interface JobExecutionRow {\n  id: string;\n  tipo: JobType;\n  iniciado_em: string;\n  finalizado_em: string | null;\n  status: JobStatus;\n  detalhes: string | null;\n  qtd_processada: number | null;\n  qtd_erros: number | null;\n}\n\nexport interface JobErrorRow {\n  id: string;\n  ocorrido_em: string;\n  tipo_job: JobType | null;\n  usuario_id: string | null;\n  ativo_id: string | null;\n  mensagem: string;\n  stack: string | null;\n  contexto_json: string | null;\n}\n\nexport class JobRepository {\n  constructor(private readonly db: D1Database) {}\n\n  async startExecution(tipo: JobType, detalhes?: unknown): Promise<string> {\n    const id = crypto.randomUUID();\n    const detalhesText = detalhes == null ? null : JSON.stringify(detalhes);\n    await this.db\n      .prepare(\n        `INSERT INTO execucoes_job (id, tipo, status, detalhes, qtd_processada, qtd_erros)\n         VALUES (?, ?, 'EXECUTANDO', ?, 0, 0)`\n      )\n      .bind(id, tipo, detalhesText)\n      .run();\n    return id;\n  }\n\n  async finishExecution(\n    id: string,\n    status: JobStatus,\n    opts?: { detalhes?: unknown; qtdProcessada?: number; qtdErros?: number }\n  ): Promise<void> {\n    const detalhesText = opts?.detalhes == null ? null : JSON.stringify(opts.detalhes);\n    await this.db\n      .prepare(\n        `UPDATE execucoes_job\n           SET finalizado_em = datetime('now'),\n               status = ?,\n               detalhes = COALESCE(?, detalhes),\n               qtd_processada = COALESCE(?, qtd_processada),\n               qtd_erros = COALESCE(?, qtd_erros)\n         WHERE id = ?`\n      )\n      .bind(status, detalhesText, opts?.qtdProcessada ?? null, opts?.qtdErros ?? null, id)\n      .run();\n  }\n\n  async logError(payload: {\n    tipo_job?: JobType;\n    usuario_id?: string;\n    ativo_id?: string;\n    mensagem: string;\n    stack?: string;\n    contexto?: unknown;\n  }): Promise<string> {\n    const id = crypto.randomUUID();\n    await this.db\n      .prepare(\n        `INSERT INTO logs_erro (id, tipo_job, usuario_id, ativo_id, mensagem, stack, contexto_json)\n         VALUES (?, ?, ?, ?, ?, ?, ?)`\n      )\n      .bind(\n        id,\n        payload.tipo_job ?? null,\n        payload.usuario_id ?? null,\n        payload.ativo_id ?? null,\n        payload.mensagem,\n        payload.stack ?? null,\n        payload.contexto == null ? null : JSON.stringify(payload.contexto)\n      )\n      .run();\n    return id;\n  }\n\n  async listRecentExecutions(limit = 50): Promise<JobExecutionRow[]> {\n    const { results } = await this.db\n      .prepare(\n        `SELECT id, tipo, iniciado_em, finalizado_em, status, detalhes, qtd_processada, qtd_erros\n           FROM execucoes_job\n       ORDER BY iniciado_em DESC\n          LIMIT ?`\n      )\n      .bind(limit)\n      .all<JobExecutionRow>();\n\n    return results;\n  }\n\n  async listRecentErrors(limit = 50): Promise<JobErrorRow[]> {\n    const { results } = await this.db\n      .prepare(\n        `SELECT id, ocorrido_em, tipo_job, usuario_id, ativo_id, mensagem, stack, contexto_json\n           FROM logs_erro\n       ORDER BY ocorrido_em DESC\n          LIMIT ?`\n      )\n      .bind(limit)\n      .all<JobErrorRow>();\n\n    return results;\n  }\n}\n", "import type { ScheduledEvent } from '@cloudflare/workers-types';\nimport type { Env } from '../types/env';\nimport { FeatureFlagsRepository } from '../repositories/feature_flags.repository';\nimport { runPricePolling } from './price_polling.job';\nimport { runNewsCollection } from './news_collection.job';\nimport { runDigestGeneration } from './digest_generation.job';\nimport { runDispatchNotifications } from './dispatch_notifications.job';\n\nasync function flagEnabled(flags: FeatureFlagsRepository, key: string): Promise<boolean> {\n  try {\n    return await flags.isEnabled(key);\n  } catch {\n    return true;\n  }\n}\n\nexport async function handleScheduled(event: ScheduledEvent, env: Env): Promise<void> {\n  const cron = (event as any).cron ?? '';\n  const flags = new FeatureFlagsRepository(env.DB);\n\n  const runPolling = cron.includes('*/15') || cron.startsWith('*/15');\n  const runHourly = cron === '0 * * * *';\n  const runDaily = cron === '10 11 * * * *';\n\n  if (runPolling && (await flagEnabled(flags, 'JOB_POLLING_PRECO'))) {\n    await runPricePolling(env, { cron });\n  }\n\n  // Coleta de noticias a cada hora (dedupe mant\u00E9m custo baixo)\n  if (runHourly && (await flagEnabled(flags, 'JOB_COLETA_NOTICIAS'))) {\n    await runNewsCollection(env, { cron, windowHours: 2 });\n  }\n\n  // Checa janela do resumo di\u00E1rio a cada hora\n  if (runHourly && (await flagEnabled(flags, 'JOB_GERAR_RESUMO'))) {\n    await runDigestGeneration(env, { cron, force: false });\n  }\n\n  // Rodada di\u00E1ria: refor\u00E7o (gera pra quem estiver ativo)\n  if (runDaily && (await flagEnabled(flags, 'JOB_GERAR_RESUMO'))) {\n    await runDigestGeneration(env, { cron, force: true });\n  }\n\n  // Disparador de notifica\u00E7\u00F5es roda em TODAS as execu\u00E7\u00F5es agendadas\n  if (await flagEnabled(flags, 'JOB_DISPARO_PUSH') || (await flagEnabled(flags, 'JOB_DISPARO_EMAIL'))) {\n    await runDispatchNotifications(env, { cron, limit: 150 });\n  }\n}\n", "import type { D1Database } from '@cloudflare/workers-types';\n\nexport interface FeatureFlagRow {\n  id: string;\n  chave: string;\n  habilitada: number;\n  escopo: 'GLOBAL' | 'USUARIO';\n  descricao: string | null;\n  motivo: string | null;\n  alterado_por_usuario_id: string | null;\n  alterado_em: string;\n}\n\nexport class FeatureFlagsRepository {\n  constructor(private readonly db: D1Database) {}\n\n  async isEnabledGlobal(chave: string): Promise<boolean> {\n    const row = await this.db\n      .prepare(`SELECT habilitada FROM feature_flags WHERE chave = ? AND escopo = 'GLOBAL' LIMIT 1`)\n      .bind(chave)\n      .first<{ habilitada: number }>();\n    if (!row) return true;\n    return row.habilitada === 1;\n  }\n\n  async listGlobal(): Promise<FeatureFlagRow[]> {\n    const { results } = await this.db\n      .prepare(`SELECT * FROM feature_flags WHERE escopo = 'GLOBAL' ORDER BY chave`)\n      .all<FeatureFlagRow>();\n    return results;\n  }\n}\n", "import type { Env } from '../types/env';\nimport { WatchlistRepository } from '../repositories/watchlist.repository';\nimport { AlertRepository, type AlertRow } from '../repositories/alert.repository';\nimport { AssetRepository } from '../repositories/asset.repository';\nimport { NotificationRepository } from '../repositories/notification.repository';\nimport { JobRepository } from '../repositories/job.repository';\nimport { MarketDataService } from '../services/market_data.service';\n\nfunction isConditionMet(alert: AlertRow, price: number): boolean {\n  if (alert.condicao === 'ACIMA_OU_IGUAL') return price >= alert.preco_alvo;\n  if (alert.condicao === 'ABAIXO_OU_IGUAL') return price <= alert.preco_alvo;\n  return false;\n}\n\nfunction minutesBetween(aIso: string, bIso: string): number {\n  const a = new Date(aIso).getTime();\n  const b = new Date(bIso).getTime();\n  if (Number.isNaN(a) || Number.isNaN(b)) return Number.POSITIVE_INFINITY;\n  return Math.abs(a - b) / 60000;\n}\n\nexport async function runPricePolling(env: Env, meta?: { cron?: string }): Promise<{ processed: number; alertsTriggered: number; errors: number }> {\n  const jobRepo = new JobRepository(env.DB);\n  const execId = await jobRepo.startExecution('POLLING_PRECO', { cron: meta?.cron ?? null });\n\n  const watchlistRepo = new WatchlistRepository(env.DB);\n  const alertRepo = new AlertRepository(env.DB);\n  const assetRepo = new AssetRepository(env.DB);\n  const notifRepo = new NotificationRepository(env.DB);\n  const market = new MarketDataService(env);\n\n  let processed = 0;\n  let alertsTriggered = 0;\n  let errors = 0;\n\n  try {\n    const watchIds = await watchlistRepo.listDistinctActiveAssetIds();\n    const alertIds = await alertRepo.listDistinctActiveAssetIds();\n    const assetIds = Array.from(new Set([...watchIds, ...alertIds]));\n\n    if (assetIds.length === 0) {\n      await jobRepo.finishExecution(execId, 'SUCESSO', { qtdProcessada: 0, qtdErros: 0, detalhes: { note: 'no-assets' } });\n      return { processed: 0, alertsTriggered: 0, errors: 0 };\n    }\n\n    const alerts = await alertRepo.listActiveByAssetIds(assetIds);\n    const alertsByAsset = new Map<string, AlertRow[]>();\n    for (const a of alerts) {\n      if (!alertsByAsset.has(a.ativo_id)) alertsByAsset.set(a.ativo_id, []);\n      alertsByAsset.get(a.ativo_id)!.push(a);\n    }\n\n    for (const assetId of assetIds) {\n      const asset = await assetRepo.getById(assetId);\n      if (!asset) continue;\n\n      try {\n        const quote = await market.fetchQuote(asset.ticker, asset.tipo);\n        if (!quote) continue;\n\n        if (!asset.nome_curto && quote.nameShort) {\n          await assetRepo.updateNameShort(asset.id, quote.nameShort);\n        }\n\n        await assetRepo.insertQuote({\n          id: crypto.randomUUID(),\n          ativo_id: asset.id,\n          preco: quote.price,\n          cotado_em: quote.quotedAt,\n          buscado_em: new Date().toISOString(),\n          fonte: quote.source\n        });\n\n        processed += 1;\n\n        const assetAlerts = alertsByAsset.get(asset.id) ?? [];\n        if (assetAlerts.length === 0) continue;\n\n        for (const alert of assetAlerts) {\n          if (!isConditionMet(alert, quote.price)) continue;\n\n          if (alert.ultimo_disparo_em) {\n            const mins = minutesBetween(alert.ultimo_disparo_em, new Date().toISOString());\n            if (mins < (alert.cooldown_minutos ?? 30)) {\n              continue;\n            }\n          }\n\n          await alertRepo.createFireEvent({\n            id: crypto.randomUUID(),\n            alerta_id: alert.id,\n            usuario_id: alert.usuario_id,\n            ativo_id: alert.ativo_id,\n            preco_observado: quote.price,\n            motivo: 'CONDICAO_ATINGIDA'\n          });\n          await alertRepo.markFired(alert.id);\n\n          const condText = alert.condicao === 'ACIMA_OU_IGUAL' ? 'acima/igual' : 'abaixo/igual';\n          const title = `Alerta: ${asset.ticker} ${condText} ${alert.preco_alvo}`;\n          const body = `Pre\u00E7o observado: ${quote.price} (${quote.quotedAt}).`;\n\n          await notifRepo.createMessage({\n            id: crypto.randomUUID(),\n            usuario_id: alert.usuario_id,\n            tipo: 'ALERTA_PRECO',\n            canal: 'PUSH',\n            titulo: title,\n            corpo: body,\n            deep_link: `/ativos/${asset.ticker}`\n          });\n\n          alertsTriggered += 1;\n        }\n      } catch (e: any) {\n        errors += 1;\n        await jobRepo.logError({\n          tipo_job: 'POLLING_PRECO',\n          ativo_id: assetId,\n          mensagem: e?.message ?? 'Erro no polling de pre\u00E7o',\n          stack: e?.stack,\n          contexto: { assetId }\n        });\n      }\n    }\n\n    await jobRepo.finishExecution(execId, errors === 0 ? 'SUCESSO' : 'PARCIAL', {\n      qtdProcessada: processed,\n      qtdErros: errors,\n      detalhes: { alertsTriggered }\n    });\n\n    return { processed, alertsTriggered, errors };\n  } catch (e: any) {\n    await jobRepo.finishExecution(execId, 'FALHA', {\n      qtdProcessada: processed,\n      qtdErros: errors + 1,\n      detalhes: { error: e?.message ?? 'unknown' }\n    });\n    throw e;\n  }\n}\n", "import type { Env } from '../types/env';\nimport { WatchlistRepository } from '../repositories/watchlist.repository';\nimport { AssetRepository } from '../repositories/asset.repository';\nimport { NewsRepository } from '../repositories/news.repository';\nimport { JobRepository } from '../repositories/job.repository';\nimport { NewsService } from '../services/news.service';\n\nexport async function runNewsCollection(env: Env, meta?: { cron?: string; sinceHours?: number }): Promise<{ tickers: number; saved: number; errors: number }> {\n  const jobRepo = new JobRepository(env.DB);\n  const execId = await jobRepo.startExecution('COLETA_NOTICIAS', { cron: meta?.cron ?? null, sinceHours: meta?.sinceHours ?? null });\n\n  const watchRepo = new WatchlistRepository(env.DB);\n  const assetRepo = new AssetRepository(env.DB);\n  const newsRepo = new NewsRepository(env.DB);\n  const service = new NewsService(env, newsRepo);\n\n  let errors = 0;\n  let saved = 0;\n\n  try {\n    const assetIds = await watchRepo.listDistinctActiveAssetIds();\n    const tickers: string[] = [];\n    for (const id of assetIds) {\n      const a = await assetRepo.getById(id);\n      if (a?.ticker) tickers.push(a.ticker);\n    }\n\n    if (tickers.length === 0) {\n      await jobRepo.finishExecution(execId, 'SUCESSO', { qtdProcessada: 0, qtdErros: 0, detalhes: { note: 'no-tickers' } });\n      return { tickers: 0, saved: 0, errors: 0 };\n    }\n\n    try {\n      const { saved: s } = await service.collectForTickers(tickers, { hours: meta?.sinceHours ?? 24 });\n      saved = s;\n    } catch (e: any) {\n      errors += 1;\n      await jobRepo.logError({ tipo_job: 'COLETA_NOTICIAS', mensagem: e?.message ?? 'Erro coletando not\u00EDcias', stack: e?.stack });\n    }\n\n    await jobRepo.finishExecution(execId, errors === 0 ? 'SUCESSO' : 'PARCIAL', {\n      qtdProcessada: tickers.length,\n      qtdErros: errors,\n      detalhes: { saved }\n    });\n\n    return { tickers: tickers.length, saved, errors };\n  } catch (e: any) {\n    await jobRepo.finishExecution(execId, 'FALHA', { qtdProcessada: 0, qtdErros: errors + 1, detalhes: { error: e?.message ?? 'unknown' } });\n    throw e;\n  }\n}\n", "import { XMLParser } from 'fast-xml-parser';\nimport type { Env } from '../types/env';\nimport { sha256Hex } from '../lib/crypto';\nimport { AssetRepository } from '../repositories/asset.repository';\nimport { NewsRepository } from '../repositories/news.repository';\n\nexport type NewsCollectStats = { tickers: number; inserted: number; linked: number };\n\nexport class NewsService {\n  constructor(private env: Env, private assetRepo: AssetRepository, private newsRepo: NewsRepository) {}\n\n  async collectForTickers(tickers: string[], opts?: { hours?: number }):\n    Promise<NewsCollectStats> {\n    const hours = opts?.hours ?? 24;\n    const uniq = Array.from(new Set(tickers.map((t) => t.trim().toUpperCase()).filter(Boolean)));\n\n    let inserted = 0;\n    let linked = 0;\n\n    const parser = new XMLParser({ ignoreAttributes: false });\n\n    for (const ticker of uniq) {\n      const asset = await this.ensureAssetExists(ticker);\n      if (!asset) continue;\n\n      const url = this.buildGoogleNewsRssUrl(ticker, hours);\n      const res = await fetch(url.toString(), { headers: { 'user-agent': 'FinancialSecretaryBot/1.0' } });\n      if (!res.ok) continue;\n\n      const xml = await res.text();\n      const parsed: any = parser.parse(xml);\n      const items = parsed?.rss?.channel?.item;\n      const list = Array.isArray(items) ? items : items ? [items] : [];\n\n      for (const it of list) {\n        const title: string = it?.title || '';\n        const link: string = it?.link || '';\n        const pubDate: string | undefined = it?.pubDate;\n\n        if (!title || !link) continue;\n\n        const { titulo, fonte } = splitTitle(title);\n        const hash = await sha256Hex(`${titulo}||${fonte || ''}`.toLowerCase());\n\n        const insertedRow = await this.newsRepo.insertNews({\n          url: link,\n          fonte,\n          titulo,\n          trecho: it?.description ? String(it.description).slice(0, 500) : null,\n          publicado_em: pubDate ? new Date(pubDate).toISOString() : null,\n          hash_dedupe: hash\n        });\n\n        if (insertedRow.created) inserted++;\n\n        await this.newsRepo.linkNewsToAsset(asset.id, insertedRow.id);\n        linked++;\n      }\n    }\n\n    return { tickers: uniq.length, inserted, linked };\n  }\n\n  async listNewsForTicker(ticker: string, limit = 20) {\n    const asset = await this.assetRepo.getByTicker(ticker.trim().toUpperCase());\n    if (!asset) return [];\n    return await this.newsRepo.listNewsForAsset(asset.id, limit);\n  }\n\n  private buildGoogleNewsRssUrl(ticker: string, hours: number) {\n    const query = `${ticker} when:${Math.max(1, Math.floor(hours / 24))}d`;\n    const url = new URL('https://news.google.com/rss/search');\n    url.searchParams.set('q', query);\n    url.searchParams.set('hl', 'pt-BR');\n    url.searchParams.set('gl', 'BR');\n    url.searchParams.set('ceid', 'BR:pt-419');\n    return url;\n  }\n\n  private async ensureAssetExists(ticker: string) {\n    const existing = await this.assetRepo.getByTicker(ticker);\n    if (existing) return existing;\n\n    await this.assetRepo.upsertAsset({\n      ticker,\n      nome_curto: null,\n      tipo: ['BTC', 'ETH', 'SOL'].includes(ticker) ? 'CRIPTO' : ticker.endsWith('11') ? 'FII' : 'ACAO',\n      bolsa: ['BTC', 'ETH', 'SOL'].includes(ticker) ? 'GLOBAL' : 'B3'\n    });\n\n    return await this.assetRepo.getByTicker(ticker);\n  }\n}\n\nfunction splitTitle(title: string) {\n  const idx = title.lastIndexOf(' - ');\n  if (idx > 0) {\n    return { titulo: title.slice(0, idx).trim(), fonte: title.slice(idx + 3).trim() };\n  }\n  return { titulo: title.trim(), fonte: null as string | null };\n}\n", "export async function sha256Hex(input: string) {\n  const enc = new TextEncoder();\n  const data = enc.encode(input);\n  const buf = await crypto.subtle.digest('SHA-256', data);\n  const bytes = Array.from(new Uint8Array(buf));\n  return bytes.map((b) => b.toString(16).padStart(2, '0')).join('');\n}\n\nexport function nowIso() {\n  return new Date().toISOString();\n}\n", "import type { Env } from '../types/env';\nimport { PreferencesRepository } from '../repositories/preferences.repository';\nimport { WatchlistRepository } from '../repositories/watchlist.repository';\nimport { NewsRepository } from '../repositories/news.repository';\nimport { DigestRepository } from '../repositories/digest.repository';\nimport { NotificationRepository } from '../repositories/notification.repository';\nimport { JobRepository } from '../repositories/job.repository';\nimport { OpenAIService } from '../services/openai.service';\n\nfunction formatLocalDate(timeZone: string, now: Date): string {\n  // en-CA returns YYYY-MM-DD\n  return new Intl.DateTimeFormat('en-CA', {\n    timeZone,\n    year: 'numeric',\n    month: '2-digit',\n    day: '2-digit'\n  }).format(now);\n}\n\nfunction formatLocalTime(timeZone: string, now: Date): string {\n  const parts = new Intl.DateTimeFormat('en-GB', {\n    timeZone,\n    hour12: false,\n    hour: '2-digit',\n    minute: '2-digit'\n  }).format(now);\n  return parts;\n}\n\nexport async function runDigestGeneration(\n  env: Env,\n  meta?: { cron?: string; force?: boolean }\n): Promise<{ usersChecked: number; digestsCreated: number; errors: number }> {\n  const jobRepo = new JobRepository(env.DB);\n  const execId = await jobRepo.startExecution('GERAR_RESUMO', { cron: meta?.cron ?? null, force: meta?.force ?? false });\n\n  const prefsRepo = new PreferencesRepository(env.DB);\n  const watchRepo = new WatchlistRepository(env.DB);\n  const newsRepo = new NewsRepository(env.DB);\n  const digestRepo = new DigestRepository(env.DB);\n  const notifRepo = new NotificationRepository(env.DB);\n  const openai = new OpenAIService(env);\n\n  const now = new Date();\n  let usersChecked = 0;\n  let digestsCreated = 0;\n  let errors = 0;\n\n  try {\n    const users = await prefsRepo.listDailyDigestUsers();\n\n    for (const u of users) {\n      usersChecked += 1;\n\n      try {\n        const tz = u.fuso_horario || 'America/Sao_Paulo';\n        const localDate = formatLocalDate(tz, now);\n        const localTime = formatLocalTime(tz, now);\n\n        const prefTime = (u.horario_resumo || '08:00').trim();\n\n        if (!meta?.force) {\n          if (prefTime.length >= 4 && localTime !== prefTime) continue;\n        }\n\n        const existing = await digestRepo.getDigestByUserAndDate(u.usuario_id, localDate);\n        if (existing && existing.enviado_em) continue;\n\n        const watchItems = await watchRepo.listByUser(u.usuario_id);\n        const tickers = watchItems.map((w) => w.ticker).filter(Boolean);\n        if (tickers.length === 0) continue;\n\n        const news = await newsRepo.listNewsForUserWatchlist(u.usuario_id, 24, 30);\n\n        let texto_resumo = '';\n        let provedor_modelo: string | null = null;\n        let nome_modelo: string | null = null;\n\n        if (env.OPENAI_API_KEY && news.length > 0) {\n          provedor_modelo = 'openai';\n          nome_modelo = env.OPENAI_MODEL ?? 'unknown';\n\n          const inputNews = news.slice(0, 12).map((n) => ({\n            titulo: n.titulo,\n            fonte: n.fonte,\n            publicado_em: n.publicado_em,\n            url: n.url\n          }));\n\n          const summary = await openai.summarizeDailyDigest({\n            tickers,\n            news: inputNews\n          });\n\n          const bullets = summary.bullets?.length ? summary.bullets.map((b) => `\u2022 ${b}`).join('\\n') : '';\n          texto_resumo = `${summary.summary}\\n\\n${bullets}`.trim();\n        } else {\n          const top = news.slice(0, 8);\n          if (top.length === 0) {\n            texto_resumo = `Sem not\u00EDcias relevantes nas \u00FAltimas 24h para: ${tickers.join(', ')}.`;\n          } else {\n            const lines = top.map((n) => `\u2022 ${n.titulo}${n.fonte ? ` (${n.fonte})` : ''}`);\n            texto_resumo = `Principais not\u00EDcias (\u00FAltimas 24h) para: ${tickers.join(', ')}\\n\\n${lines.join('\\n')}`;\n          }\n        }\n\n        const digestId = existing?.id ?? crypto.randomUUID();\n\n        await digestRepo.upsertDigest({\n          id: digestId,\n          usuario_id: u.usuario_id,\n          data_resumo: localDate,\n          provedor_modelo,\n          nome_modelo,\n          texto_resumo\n        });\n\n        const digestItems = news.slice(0, 10).map((n, idx) => ({\n          id: crypto.randomUUID(),\n          resumo_id: digestId,\n          noticia_id: n.id,\n          ativo_id: n.ativo_id ?? null,\n          bullets: null,\n          ordem: idx\n        }));\n\n        await digestRepo.replaceDigestItems(digestId, digestItems);\n\n        const title = `Resumo di\u00E1rio (${localDate})`;\n        const deepLink = `digest:${digestId}`;\n\n        const canal = (u.canal_padrao_noticias || 'PUSH').toUpperCase();\n        if (canal === 'EMAIL') {\n          await notifRepo.createMessage({\n            id: crypto.randomUUID(),\n            usuario_id: u.usuario_id,\n            tipo: 'RESUMO_DIARIO',\n            canal: 'EMAIL',\n            titulo: title,\n            corpo: texto_resumo,\n            deep_link: deepLink\n          });\n        } else if (canal === 'AMBOS') {\n          await notifRepo.createMessage({\n            id: crypto.randomUUID(),\n            usuario_id: u.usuario_id,\n            tipo: 'RESUMO_DIARIO',\n            canal: 'PUSH',\n            titulo: title,\n            corpo: texto_resumo,\n            deep_link: deepLink\n          });\n          await notifRepo.createMessage({\n            id: crypto.randomUUID(),\n            usuario_id: u.usuario_id,\n            tipo: 'RESUMO_DIARIO',\n            canal: 'EMAIL',\n            titulo: title,\n            corpo: texto_resumo,\n            deep_link: deepLink\n          });\n        } else {\n          await notifRepo.createMessage({\n            id: crypto.randomUUID(),\n            usuario_id: u.usuario_id,\n            tipo: 'RESUMO_DIARIO',\n            canal: 'PUSH',\n            titulo: title,\n            corpo: texto_resumo,\n            deep_link: deepLink\n          });\n        }\n\n        digestsCreated += 1;\n      } catch (e: any) {\n        errors += 1;\n        await jobRepo.logError({\n          tipo_job: 'GERAR_RESUMO',\n          usuario_id: u.usuario_id,\n          mensagem: e?.message ?? 'Erro gerando resumo',\n          stack: e?.stack\n        });\n      }\n    }\n\n    await jobRepo.finishExecution(execId, errors === 0 ? 'SUCESSO' : 'PARCIAL', {\n      qtdProcessada: digestsCreated,\n      qtdErros: errors,\n      detalhes: { usersChecked }\n    });\n\n    return { usersChecked, digestsCreated, errors };\n  } catch (e: any) {\n    await jobRepo.finishExecution(execId, 'FALHA', {\n      qtdProcessada: digestsCreated,\n      qtdErros: errors + 1,\n      detalhes: { error: e?.message ?? 'unknown' }\n    });\n    throw e;\n  }\n}\n", "import type { Env } from '../types/env';\n\nexport class OpenAIService {\n  constructor(private env: Env) {}\n\n  hasKey() {\n    return !!this.env.OPENAI_API_KEY;\n  }\n\n  async summarizeDailyDigest(input: {\n    tickers: string[];\n    items: Array<{ titulo: string; trecho?: string | null; fonte?: string | null }>;\n    language?: 'pt' | 'en';\n  }): Promise<{ summary: string; bullets: string[] }> {\n    if (!this.env.OPENAI_API_KEY) {\n      const bullets = input.items.slice(0, 8).map((x) => x.titulo);\n      const summary = bullets.slice(0, 5).join('\\n');\n      return { summary, bullets };\n    }\n\n    const model = this.env.OPENAI_MODEL || 'gpt-4o-mini';\n\n    const system = input.language === 'en'\n      ? 'You are a helpful assistant that summarizes financial news for retail investors. Be concise and factual.'\n      : 'Voc\u00EA \u00E9 um assistente que resume not\u00EDcias financeiras para investidores pessoa f\u00EDsica. Seja conciso e factual.';\n\n    const prompt = {\n      tickers: input.tickers,\n      items: input.items.slice(0, 12)\n    };\n\n    const body = {\n      model,\n      messages: [\n        { role: 'system', content: system },\n        {\n          role: 'user',\n          content:\n            (input.language === 'en'\n              ? 'Summarize the following news into 3-10 headlines and bullet points. Return JSON with fields: summary (string) and bullets (array of strings).'\n              : 'Resuma as not\u00EDcias abaixo em 3-10 manchetes e bullets de pontos principais. Retorne JSON com os campos: summary (string) e bullets (array de strings).')\n            + '\\n\\n' + JSON.stringify(prompt)\n        }\n      ],\n      response_format: { type: 'json_object' },\n      temperature: 0.3\n    };\n\n    const res = await fetch('https://api.openai.com/v1/chat/completions', {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/json',\n        authorization: `Bearer ${this.env.OPENAI_API_KEY}`\n      },\n      body: JSON.stringify(body)\n    });\n\n    if (!res.ok) {\n      const t = await res.text();\n      const bullets = input.items.slice(0, 8).map((x) => x.titulo);\n      return { summary: (t || '').slice(0, 400), bullets };\n    }\n\n    const data: any = await res.json();\n    const content = data?.choices?.[0]?.message?.content;\n    try {\n      const parsed = JSON.parse(content);\n      const summary = typeof parsed.summary === 'string' ? parsed.summary : '';\n      const bullets = Array.isArray(parsed.bullets) ? parsed.bullets.filter((x: any) => typeof x === 'string').slice(0, 12) : [];\n      return { summary, bullets };\n    } catch {\n      const bullets = input.items.slice(0, 8).map((x) => x.titulo);\n      return { summary: String(content || '').slice(0, 600), bullets };\n    }\n  }\n}\n", "import type { Env } from '../types/env';\nimport { NotificationRepository, type NotificationMessageRow } from '../repositories/notification.repository';\nimport { UserRepository } from '../repositories/user.repository';\nimport { DigestRepository } from '../repositories/digest.repository';\nimport { JobRepository } from '../repositories/job.repository';\nimport { PushService } from '../services/push.service';\nimport { EmailService } from '../services/email.service';\n\nfunction extractDigestId(deepLink?: string | null): string | null {\n  if (!deepLink) return null;\n  if (!deepLink.startsWith('digest:')) return null;\n  return deepLink.slice('digest:'.length) || null;\n}\n\nfunction toEmailHtml(title: string, body: string | null | undefined): string {\n  const safeBody = (body ?? '').replace(/\\n/g, '<br/>');\n  return `<h2>${title}</h2><p>${safeBody}</p>`;\n}\n\nasync function trySendPush(\n  push: PushService,\n  notifRepo: NotificationRepository,\n  msg: NotificationMessageRow\n): Promise<{ sent: boolean; reason?: string }> {\n  const subs = await notifRepo.listValidSubscriptionsByUser(msg.usuario_id);\n  if (subs.length === 0) return { sent: false, reason: 'no_push_subscription' };\n\n  let ok = 0;\n  for (const s of subs) {\n    try {\n      await push.sendNotification(\n        {\n          endpoint: s.endpoint,\n          keys: { p256dh: s.p256dh, auth: s.auth }\n        },\n        {\n          title: msg.titulo,\n          body: msg.corpo ?? undefined,\n          url: msg.deep_link ?? undefined\n        }\n      );\n      ok += 1;\n    } catch (e: any) {\n      const status = e?.statusCode ?? e?.status;\n      if (status === 404 || status === 410) {\n        await notifRepo.invalidateSubscription(s.id);\n      }\n    }\n  }\n\n  if (ok > 0) return { sent: true };\n  return { sent: false, reason: 'push_failed' };\n}\n\nasync function trySendEmail(env: Env, emailSvc: EmailService, userRepo: UserRepository, msg: NotificationMessageRow): Promise<{ sent: boolean; reason?: string }> {\n  const u = await userRepo.getById(msg.usuario_id);\n  if (!u?.email) return { sent: false, reason: 'no_email' };\n\n  try {\n    const res = await emailSvc.sendNotificationEmail({\n      to: u.email,\n      subject: msg.titulo,\n      html: toEmailHtml(msg.titulo, msg.corpo),\n      text: msg.corpo ?? undefined\n    });\n\n    if (res?.skipped) return { sent: false, reason: 'email_not_configured' };\n    return { sent: true };\n  } catch (e) {\n    return { sent: false, reason: 'email_failed' };\n  }\n}\n\nexport async function runDispatchNotifications(\n  env: Env,\n  meta?: { cron?: string; limit?: number }\n): Promise<{ processed: number; sent: number; failed: number; ignored: number }> {\n  const jobRepo = new JobRepository(env.DB);\n  const execId = await jobRepo.startExecution('DISPARO_NOTIFICACOES', { cron: meta?.cron ?? null, limit: meta?.limit ?? null });\n\n  const notifRepo = new NotificationRepository(env.DB);\n  const userRepo = new UserRepository(env.DB);\n  const digestRepo = new DigestRepository(env.DB);\n\n  const push = new PushService(env);\n  const emailSvc = new EmailService(env);\n\n  const limit = meta?.limit ?? 100;\n  const pending = await notifRepo.listPendingMessages(limit);\n\n  let processed = 0;\n  let sent = 0;\n  let failed = 0;\n  let ignored = 0;\n\n  for (const msg of pending) {\n    processed += 1;\n\n    try {\n      if (msg.canal === 'PUSH') {\n        const r = await trySendPush(push, notifRepo, msg);\n\n        if (r.sent) {\n          await notifRepo.markMessageSent(msg.id);\n          sent += 1;\n\n          const d = extractDigestId(msg.deep_link);\n          if (d) await digestRepo.markDigestSent(d);\n        } else {\n          await notifRepo.markMessageIgnored(msg.id, r.reason ?? 'push_not_sent');\n          ignored += 1;\n\n          // fallback email\n          const fallbackId = crypto.randomUUID();\n          await notifRepo.createMessage({\n            id: fallbackId,\n            usuario_id: msg.usuario_id,\n            tipo: msg.tipo,\n            canal: 'EMAIL',\n            titulo: msg.titulo,\n            corpo: msg.corpo,\n            deep_link: msg.deep_link\n          });\n        }\n      } else {\n        const r = await trySendEmail(env, emailSvc, userRepo, msg);\n\n        if (r.sent) {\n          await notifRepo.markMessageSent(msg.id);\n          sent += 1;\n\n          const d = extractDigestId(msg.deep_link);\n          if (d) await digestRepo.markDigestSent(d);\n        } else if (r.reason === 'email_not_configured') {\n          await notifRepo.markMessageIgnored(msg.id, 'email_not_configured');\n          ignored += 1;\n        } else {\n          await notifRepo.markMessageFailed(msg.id, r.reason ?? 'email_failed');\n          failed += 1;\n        }\n      }\n    } catch (e: any) {\n      failed += 1;\n      await notifRepo.markMessageFailed(msg.id, e?.message ?? 'dispatch_failed');\n      await jobRepo.logError({ tipo_job: 'DISPARO_NOTIFICACOES', usuario_id: msg.usuario_id, mensagem: e?.message ?? 'Erro disparando', stack: e?.stack });\n    }\n  }\n\n  await jobRepo.finishExecution(execId, failed === 0 ? 'SUCESSO' : 'PARCIAL', {\n    qtdProcessada: processed,\n    qtdErros: failed,\n    detalhes: { sent, ignored }\n  });\n\n  return { processed, sent, failed, ignored };\n}\n", "import type { Env } from '../types/env';\nimport { buildPushHTTPRequest } from '@pushforge/builder';\n\nexport type WebPushSubscription = {\n  endpoint: string;\n  p256dh: string;\n  auth: string;\n};\n\nexport class PushService {\n  constructor(private readonly env: Env) {}\n\n  private getAdminContact(): string {\n    const c = this.env.PUSH_SUBJECT || this.env.CONTACT_EMAIL || '';\n    if (!c) return 'mailto:admin@example.com';\n    if (c.startsWith('mailto:') || c.startsWith('https://') || c.startsWith('http://')) return c;\n    if (c.includes('@')) return `mailto:${c}`;\n    return c;\n  }\n\n  private parsePrivateJwk(): any {\n    if (!this.env.VAPID_PRIVATE_KEY) throw new Error('VAPID_PRIVATE_KEY not configured');\n    try {\n      return JSON.parse(this.env.VAPID_PRIVATE_KEY);\n    } catch {\n      throw new Error('VAPID_PRIVATE_KEY must be a JSON JWK string');\n    }\n  }\n\n  async send(params: {\n    subscription: WebPushSubscription;\n    payload: unknown;\n    ttlSeconds?: number;\n  }): Promise<{ ok: boolean; status: number; responseText?: string }> {\n    const privateJWK = this.parsePrivateJwk();\n\n    const subscription = {\n      endpoint: params.subscription.endpoint,\n      keys: {\n        p256dh: params.subscription.p256dh,\n        auth: params.subscription.auth\n      }\n    };\n\n    const { endpoint, headers, body } = await buildPushHTTPRequest({\n      privateJWK,\n      subscription,\n      message: {\n        payload: params.payload,\n        adminContact: this.getAdminContact(),\n        ttl: params.ttlSeconds ?? 900\n      } as any\n    } as any);\n\n    const res = await fetch(endpoint, { method: 'POST', headers, body });\n    const text = await res.text().catch(() => undefined);\n\n    return { ok: res.ok, status: res.status, responseText: text };\n  }\n}\n", "export { buildPushHTTPRequest } from './request.js';\n", "import { crypto } from './crypto.js';\nimport { encryptPayload } from './payload.js';\nimport { vapidHeaders } from './vapid.js';\n/**\n * Validates that a JWK has the required properties for ECDSA P-256.\n *\n * @param {JsonWebKey} jwk - The JSON Web Key to validate.\n * @throws {Error} Throws if the JWK is missing required properties or has invalid values.\n */\nconst validatePrivateJWK = (jwk) => {\n    if (jwk.kty !== 'EC') {\n        throw new Error(`Invalid JWK: 'kty' must be 'EC', received '${jwk.kty ?? 'undefined'}'`);\n    }\n    if (jwk.crv !== 'P-256') {\n        throw new Error(`Invalid JWK: 'crv' must be 'P-256', received '${jwk.crv ?? 'undefined'}'`);\n    }\n    if (!jwk.x || typeof jwk.x !== 'string') {\n        throw new Error(\"Invalid JWK: missing or invalid 'x' coordinate\");\n    }\n    if (!jwk.y || typeof jwk.y !== 'string') {\n        throw new Error(\"Invalid JWK: missing or invalid 'y' coordinate\");\n    }\n    if (!jwk.d || typeof jwk.d !== 'string') {\n        throw new Error(\"Invalid JWK: missing or invalid 'd' (private key)\");\n    }\n};\n/**\n * Validates that the subscription endpoint is a valid HTTPS URL.\n *\n * @param {string} endpoint - The push subscription endpoint URL.\n * @throws {Error} Throws if the endpoint is not a valid HTTPS URL.\n */\nconst validateEndpoint = (endpoint) => {\n    let url;\n    try {\n        url = new URL(endpoint);\n    }\n    catch {\n        throw new Error(`Invalid subscription endpoint: '${endpoint}' is not a valid URL`);\n    }\n    if (url.protocol !== 'https:') {\n        throw new Error(`Invalid subscription endpoint: push endpoints must use HTTPS, received '${url.protocol}'`);\n    }\n};\n/**\n * Builds an HTTP request body and headers for sending a push notification.\n *\n * This function constructs the necessary components for a push notification request,\n * including the payload, headers, and any required cryptographic operations.\n *\n * @param {BuilderOptions} options - The options for building the push notification request.\n * @param {JsonWebKey | string} options.privateJWK - The private JSON Web Key (JWK) used for signing.\n * @param {PushMessage} options.message - The message to be sent in the push notification, including user-defined options.\n * @param {PushSubscription} options.subscription - The subscription details for the push notification.\n * @returns {Promise<{ endpoint: string, body: ArrayBuffer, headers: Record<string, string> | Headers }>} A promise that resolves to an object containing the endpoint, encrypted body, and headers for the push notification.\n *\n * @throws {Error} Throws an error if the privateJWK is invalid, if the request fails, or if the payload encryption fails.\n *\n * @example\n * // Example usage\n * const privateJWK = '{\"kty\":\"EC\",\"crv\":\"P-256\",\"d\":\"_eQ...\"}'; // Your private VAPID key\n *\n * const message = {\n *   payload: {\n *     title: \"New Message\",\n *     body: \"You have a new message!\",\n *     icon: \"/images/icon.png\"\n *   },\n *   options: {\n *     ttl: 3600, // 1 hour in seconds\n *     urgency: \"high\",\n *     topic: \"new-messages\"\n *   },\n *   adminContact: \"mailto:admin@example.com\"\n * };\n *\n * const subscription = {\n *   endpoint: \"https://fcm.googleapis.com/fcm/send/...\",\n *   keys: {\n *     p256dh: \"BNn5....\",\n *     auth: \"tBHI....\"\n *   }\n * };\n *\n * // Build the request\n * const request = await buildPushHTTPRequest({\n *   privateJWK,\n *   message,\n *   subscription\n * });\n *\n * // Send the push notification\n * const response = await fetch(request.endpoint, {\n *   method: 'POST',\n *   headers: request.headers,\n *   body: request.body\n * });\n */\nexport async function buildPushHTTPRequest({ privateJWK, message, subscription, }) {\n    // Parse the private JWK if it's a string\n    let jwk;\n    try {\n        jwk = typeof privateJWK === 'string' ? JSON.parse(privateJWK) : privateJWK;\n    }\n    catch {\n        throw new Error('Invalid privateJWK: failed to parse JSON string');\n    }\n    // Validate the JWK structure\n    validatePrivateJWK(jwk);\n    // Validate the subscription endpoint\n    validateEndpoint(subscription.endpoint);\n    const MAX_TTL = 24 * 60 * 60;\n    if (message.options?.ttl && message.options.ttl > MAX_TTL) {\n        throw new Error('TTL must be less than 24 hours');\n    }\n    // Determine the time-to-live (TTL) for the push notification\n    const ttl = message.options?.ttl && message.options.ttl > 0\n        ? message.options.ttl\n        : MAX_TTL; // Default to 24 hours\n    // Create the JWT payload\n    const jwt = {\n        aud: new URL(subscription.endpoint).origin,\n        exp: Math.floor(Date.now() / 1000) + ttl,\n        sub: message.adminContact,\n    };\n    // Construct the options for the push notification\n    const options = {\n        jwk,\n        jwt,\n        payload: JSON.stringify(message.payload),\n        ttl,\n        ...(message.options?.urgency && {\n            urgency: message.options.urgency,\n        }),\n        ...(message.options?.topic && {\n            topic: message.options.topic,\n        }),\n    };\n    // Generate a random salt for encryption\n    const salt = crypto.getRandomValues(new Uint8Array(16));\n    // Generate local keys for encryption\n    const localKeys = await crypto.subtle.generateKey({ name: 'ECDH', namedCurve: 'P-256' }, true, ['deriveBits']);\n    // Encrypt the payload for the push notification\n    const body = await encryptPayload(localKeys, salt, options.payload, subscription);\n    // Construct the VAPID headers for the push notification request\n    const headers = await vapidHeaders(options, body.byteLength, salt, localKeys.publicKey);\n    // Return the constructed request components\n    return { endpoint: subscription.endpoint, body, headers };\n}\n", "/// <reference lib=\"webworker\" />\n/// <reference types=\"node\" />\n/**\n * A module that provides a cross-platform cryptographic interface.\n * Uses globalThis.crypto which is available in:\n * - Node.js 20+ (current LTS)\n * - Browsers\n * - Cloudflare Workers\n * - Deno\n * - Bun\n * - Convex\n *\n * @module crypto\n */\nif (!globalThis.crypto?.subtle) {\n    throw new Error('Web Crypto API not available. Ensure you are using Node.js 20+ or a modern runtime with globalThis.crypto support.');\n}\nconst isomorphicCrypto = globalThis.crypto;\n/**\n * A cryptographic interface that provides methods for generating random values\n * and accessing subtle cryptographic operations.\n */\nexport const crypto = {\n    /**\n     * Fills the given typed array with cryptographically secure random values.\n     *\n     * @param {T} array - The typed array to fill with random values.\n     * @returns {T} The filled typed array.\n     * @template T - The type of the typed array (e.g., Uint8Array).\n     */\n    getRandomValues(array) {\n        return isomorphicCrypto.getRandomValues(array);\n    },\n    /**\n     * Provides access to subtle cryptographic operations.\n     *\n     * @type {SubtleCrypto} The subtle cryptographic interface.\n     */\n    subtle: isomorphicCrypto.subtle,\n};\n", "import { base64UrlDecode, base64UrlDecodeString, base64UrlEncode, } from './base64.js';\nimport { crypto } from './crypto.js';\nimport { deriveSharedSecret } from './shared-secret.js';\nimport { concatTypedArrays } from './utils.js';\n/**\n * Imports and validates the client's public and authentication keys from a PushSubscriptionKey.\n *\n * @param {PushSubscriptionKey} keys - The keys associated with the push subscription.\n * @returns {Promise<{ auth: ArrayBuffer, p256: CryptoKey }>} A promise that resolves to an object containing the authentication key and the imported public key.\n * @throws {Error} Throws an error if the authentication key length is incorrect.\n */\nconst importClientKeys = async (keys) => {\n    const auth = base64UrlDecode(keys.auth);\n    if (auth.byteLength !== 16) {\n        throw new Error(`Incorrect auth length, expected 16 bytes but got ${auth.byteLength}`);\n    }\n    let decodedKey;\n    const base64Key = base64UrlDecodeString(keys.p256dh);\n    if (typeof globalThis !== 'undefined' && 'atob' in globalThis) {\n        // Browser environment\n        const binaryStr = globalThis.atob(base64Key);\n        decodedKey = new Uint8Array(binaryStr.length);\n        for (let i = 0; i < binaryStr.length; i++) {\n            decodedKey[i] = binaryStr.charCodeAt(i);\n        }\n    }\n    else {\n        // Node.js environment\n        decodedKey = new Uint8Array(Buffer.from(base64Key, 'base64'));\n    }\n    // Validate p256dh key format: must be 65 bytes (uncompressed P-256 point)\n    // Format: 0x04 (1 byte) + x coordinate (32 bytes) + y coordinate (32 bytes)\n    if (decodedKey.byteLength !== 65) {\n        throw new Error(`Invalid p256dh key: expected 65 bytes but got ${decodedKey.byteLength} bytes`);\n    }\n    if (decodedKey[0] !== 0x04) {\n        throw new Error(`Invalid p256dh key: expected uncompressed point format (0x04 prefix) but got 0x${decodedKey[0].toString(16).padStart(2, '0')}`);\n    }\n    const p256 = await crypto.subtle.importKey('jwk', {\n        kty: 'EC',\n        crv: 'P-256',\n        x: base64UrlEncode(decodedKey.slice(1, 33)),\n        y: base64UrlEncode(decodedKey.slice(33, 65)),\n        ext: true,\n    }, { name: 'ECDH', namedCurve: 'P-256' }, true, []);\n    return { auth, p256 };\n};\n/**\n * Derives a pseudo-random key using HKDF from the shared secret and authentication key.\n *\n * @param {ArrayBuffer} auth - The authentication key used as salt in the derivation process.\n * @param {CryptoKey} sharedSecret - The shared secret derived from the client's public key and local private key.\n * @returns {Promise<CryptoKey>} A promise that resolves to the derived pseudo-random key.\n */\nconst derivePseudoRandomKey = async (auth, sharedSecret) => {\n    const pseudoRandomKeyBytes = await crypto.subtle.deriveBits({\n        name: 'HKDF',\n        hash: 'SHA-256',\n        salt: auth,\n        // Adding Content-Encoding data info here is required by the Web Push API\n        info: new TextEncoder().encode('Content-Encoding: auth\\0'),\n    }, sharedSecret, 256);\n    return crypto.subtle.importKey('raw', pseudoRandomKeyBytes, 'HKDF', false, [\n        'deriveBits',\n    ]);\n};\n/**\n * Creates a context for the ECDH key exchange using the client's and local public keys.\n *\n * @param {CryptoKey} clientPublicKey - The client's public key.\n * @param {CryptoKey} localPublicKey - The local public key.\n * @returns {Promise<Uint8Array>} A promise that resolves to a concatenated context array.\n */\nconst createContext = async (clientPublicKey, localPublicKey) => {\n    const [clientKeyBytes, localKeyBytes] = await Promise.all([\n        crypto.subtle.exportKey('raw', clientPublicKey),\n        crypto.subtle.exportKey('raw', localPublicKey),\n    ]);\n    return concatTypedArrays([\n        new TextEncoder().encode('P-256\\0'),\n        new Uint8Array([0, clientKeyBytes.byteLength]),\n        new Uint8Array(clientKeyBytes),\n        new Uint8Array([0, localKeyBytes.byteLength]),\n        new Uint8Array(localKeyBytes),\n    ]);\n};\n/**\n * Derives a nonce for encryption using HKDF from the pseudo-random key, salt, and context.\n *\n * @param {CryptoKey} pseudoRandomKey - The pseudo-random key derived from the shared secret.\n * @param {Uint8Array} salt - The salt used in the derivation process.\n * @param {Uint8Array} context - The context for the nonce derivation.\n * @returns {Promise<ArrayBuffer>} A promise that resolves to the derived nonce.\n */\nconst deriveNonce = async (pseudoRandomKey, salt, context) => {\n    const nonceInfo = concatTypedArrays([\n        new TextEncoder().encode('Content-Encoding: nonce\\0'),\n        context,\n    ]);\n    return crypto.subtle.deriveBits({ name: 'HKDF', hash: 'SHA-256', salt, info: nonceInfo }, pseudoRandomKey, 12 * 8);\n};\n/**\n * Derives a content encryption key using HKDF from the pseudo-random key, salt, and context.\n *\n * @param {CryptoKey} pseudoRandomKey - The pseudo-random key derived from the shared secret.\n * @param {Uint8Array} salt - The salt used in the derivation process.\n * @param {Uint8Array} context - The context for the key derivation.\n * @returns {Promise<CryptoKey>} A promise that resolves to the derived content encryption key.\n */\nconst deriveContentEncryptionKey = async (pseudoRandomKey, salt, context) => {\n    const info = concatTypedArrays([\n        new TextEncoder().encode('Content-Encoding: aesgcm\\0'),\n        context,\n    ]);\n    const bits = await crypto.subtle.deriveBits({ name: 'HKDF', hash: 'SHA-256', salt, info }, pseudoRandomKey, 16 * 8);\n    return crypto.subtle.importKey('raw', bits, 'AES-GCM', false, ['encrypt']);\n};\n/**\n * Maximum payload size after accounting for encryption overhead.\n * Web push payloads have an overall max size of 4KB (4096 bytes).\n * With the required overhead (16 bytes auth tag + 2 bytes padding length),\n * the actual max payload size is 4078 bytes.\n */\nconst MAX_PAYLOAD_SIZE = 4078;\n/**\n * Minimum required size for padding length prefix (2 bytes).\n */\nconst PADDING_LENGTH_PREFIX_SIZE = 2;\n/**\n * Pads the payload to ensure it fits within the maximum allowed size for web push notifications.\n *\n * Web push payloads have an overall max size of 4KB (4096 bytes). With the\n * required overhead for encryption, the actual max payload size is 4078 bytes.\n *\n * @param {Uint8Array} payload - The original payload to be padded.\n * @returns {Uint8Array<ArrayBuffer>} The padded payload, including length information.\n * @throws {Error} Throws an error if the payload exceeds the maximum allowed size.\n */\nconst padPayload = (payload) => {\n    const maxPayloadContentSize = MAX_PAYLOAD_SIZE - PADDING_LENGTH_PREFIX_SIZE;\n    if (payload.byteLength > maxPayloadContentSize) {\n        throw new Error(`Payload too large. Maximum size is ${maxPayloadContentSize} bytes, but received ${payload.byteLength} bytes`);\n    }\n    // Calculate available space for padding\n    const availableSpace = MAX_PAYLOAD_SIZE - PADDING_LENGTH_PREFIX_SIZE - payload.byteLength;\n    // Generate random padding size, clamped to available space\n    const maxRandomPadding = Math.min(100, availableSpace);\n    const paddingSize = maxRandomPadding > 0\n        ? Math.floor(Math.random() * (maxRandomPadding + 1))\n        : 0;\n    const paddingArray = new ArrayBuffer(PADDING_LENGTH_PREFIX_SIZE + paddingSize);\n    new DataView(paddingArray).setUint16(0, paddingSize); // Store the length of the padding\n    // Return the new payload with padding added\n    return concatTypedArrays([new Uint8Array(paddingArray), payload]);\n};\n/**\n * Encrypts the payload for a push notification using the provided keys and context.\n *\n * @param {CryptoKeyPair} localKeys - The local key pair used for encryption.\n * @param {Uint8Array} salt - The salt used in the encryption process.\n * @param {string} payload - The original payload to encrypt.\n * @param {PushSubscription} target - The target push subscription containing client keys.\n * @returns {Promise<ArrayBuffer>} A promise that resolves to the encrypted payload.\n */\nexport const encryptPayload = async (localKeys, salt, payload, target) => {\n    const clientKeys = await importClientKeys(target.keys);\n    const sharedSecret = await deriveSharedSecret(clientKeys.p256, localKeys.privateKey);\n    const pseudoRandomKey = await derivePseudoRandomKey(clientKeys.auth, sharedSecret);\n    const context = await createContext(clientKeys.p256, localKeys.publicKey);\n    const nonce = await deriveNonce(pseudoRandomKey, salt, context);\n    const contentEncryptionKey = await deriveContentEncryptionKey(pseudoRandomKey, salt, context);\n    const encodedPayload = new TextEncoder().encode(payload);\n    const paddedPayload = padPayload(encodedPayload);\n    return crypto.subtle.encrypt({ name: 'AES-GCM', iv: nonce }, contentEncryptionKey, paddedPayload);\n};\n", "import { stringFromArrayBuffer } from './utils.js';\n/**\n * Encodes a string, ArrayBuffer, or Uint8Array into a Base64 URL format.\n *\n * This function handles both browser and Node.js environments by using\n * the appropriate encoding method based on the environment.\n *\n * @param {string | ArrayBuffer | Uint8Array} input - The input to encode.\n * @returns {string} The Base64 URL encoded string.\n */\nexport const base64UrlEncode = (input) => {\n    // Convert input to string if it's binary\n    const text = typeof input === 'string' ? input : stringFromArrayBuffer(input);\n    // Use environment-specific encoding\n    let base64;\n    if (typeof globalThis !== 'undefined' && 'btoa' in globalThis) {\n        // Browser environment\n        base64 = globalThis.btoa(text);\n    }\n    else {\n        // Node.js environment\n        base64 = Buffer.from(text, 'binary').toString('base64');\n    }\n    // Convert base64 to base64url format\n    return base64.replace(/=/g, '').replace(/\\+/g, '-').replace(/\\//g, '_');\n};\n/**\n * Decodes a Base64 URL encoded string back to its original format.\n *\n * This function handles both browser and Node.js environments by using\n * the appropriate decoding method based on the environment.\n *\n * @param {string | undefined} s - The Base64 URL encoded string to decode.\n * @returns {string} The decoded data as a string.\n * @throws {Error} Throws an error if the input string is invalid.\n */\nexport const base64UrlDecodeString = (s) => {\n    if (!s)\n        throw new Error('Invalid input');\n    return (s.replace(/-/g, '+').replace(/_/g, '/') +\n        '='.repeat((4 - (s.length % 4)) % 4));\n};\n/**\n * Decodes a Base64 URL encoded string into an ArrayBuffer.\n *\n * This function handles both browser and Node.js environments by using\n * the appropriate decoding method based on the environment.\n *\n * @param {string} input - The Base64 URL encoded string to decode.\n * @returns {ArrayBuffer} The decoded data as an ArrayBuffer.\n */\nexport const base64UrlDecode = (input) => {\n    // Convert from base64url to base64\n    const base64 = base64UrlDecodeString(input);\n    // Decode based on environment\n    if (typeof globalThis !== 'undefined' && 'atob' in globalThis) {\n        // Browser environment\n        const binaryString = globalThis.atob(base64);\n        const bytes = new Uint8Array(binaryString.length);\n        for (let i = 0; i < binaryString.length; i++) {\n            bytes[i] = binaryString.charCodeAt(i);\n        }\n        return bytes.buffer;\n    }\n    // Node.js environment\n    return Buffer.from(base64, 'base64').buffer;\n};\n", "import { base64UrlDecodeString, base64UrlEncode } from './base64.js';\n/**\n * Converts an ArrayBuffer or Uint8Array to a string.\n *\n * @param {ArrayBuffer | Uint8Array} s - The input array to convert.\n * @returns {string} The resulting string representation of the input.\n */\nexport const stringFromArrayBuffer = (s) => {\n    let result = '';\n    for (const code of new Uint8Array(s))\n        result += String.fromCharCode(code);\n    return result;\n};\n/**\n * Cross-platform function to decode a Base64 string into a binary string.\n * Works in both browser and Node.js environments.\n *\n * @param {string} base64String - The Base64 encoded string to decode.\n * @returns {string} The decoded binary string.\n */\nexport const base64Decode = (base64String) => {\n    // Add padding if needed\n    const paddedBase64 = base64String.padEnd(base64String.length + ((4 - (base64String.length % 4 || 4)) % 4), '=');\n    // Node.js environment\n    if (typeof Buffer !== 'undefined') {\n        return Buffer.from(paddedBase64, 'base64').toString('binary');\n    }\n    // Browser environment\n    if (typeof atob === 'function') {\n        return atob(paddedBase64);\n    }\n    // Pure JavaScript implementation for environments without atob or Buffer\n    const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n    let result = '';\n    let i = 0;\n    while (i < paddedBase64.length) {\n        const enc1 = characters.indexOf(paddedBase64.charAt(i++));\n        const enc2 = characters.indexOf(paddedBase64.charAt(i++));\n        const enc3 = characters.indexOf(paddedBase64.charAt(i++));\n        const enc4 = characters.indexOf(paddedBase64.charAt(i++));\n        const char1 = (enc1 << 2) | (enc2 >> 4);\n        const char2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n        const char3 = ((enc3 & 3) << 6) | enc4;\n        result += String.fromCharCode(char1);\n        if (enc3 !== 64)\n            result += String.fromCharCode(char2);\n        if (enc4 !== 64)\n            result += String.fromCharCode(char3);\n    }\n    return result;\n};\n/**\n * Extracts the public key from a JSON Web Key (JWK) and encodes it in base64 URL format.\n *\n * @param {JsonWebKey} jwk - The JSON Web Key from which to extract the public key.\n * @returns {string} The base64 URL encoded public key.\n */\nexport const getPublicKeyFromJwk = (jwk) => base64UrlEncode(`\\x04${base64Decode(base64UrlDecodeString(jwk.x))}${base64Decode(base64UrlDecodeString(jwk.y))}`);\n/**\n * Concatenates multiple Uint8Array instances into a single Uint8Array.\n *\n * @param {Uint8Array[]} arrays - An array of Uint8Array instances to concatenate.\n * @returns {Uint8Array<ArrayBuffer>} A new Uint8Array containing all the concatenated data.\n */\nexport const concatTypedArrays = (arrays) => {\n    const length = arrays.reduce((accumulator, current) => accumulator + current.byteLength, 0);\n    let index = 0;\n    const targetArray = new Uint8Array(length);\n    for (const array of arrays) {\n        targetArray.set(array, index);\n        index += array.byteLength;\n    }\n    return targetArray;\n};\n", "import { crypto } from './crypto.js';\n/**\n * Derives a shared secret from a client's public key and a local private key using the ECDH algorithm.\n *\n * This function uses the Web Crypto API to derive a shared secret, which can then be used\n * for further cryptographic operations, such as key derivation using HKDF.\n *\n * @param {CryptoKey} clientPublicKey - The public key of the client, used to derive the shared secret.\n * @param {CryptoKey} localPrivateKey - The local private key used in the derivation process.\n * @returns {Promise<CryptoKey>} A promise that resolves to a CryptoKey representing the derived shared secret.\n *\n * @throws {Error} Throws an error if the key derivation fails.\n */\nexport const deriveSharedSecret = async (clientPublicKey, localPrivateKey) => {\n    const sharedSecretBytes = await crypto.subtle.deriveBits({ name: 'ECDH', public: clientPublicKey }, localPrivateKey, 256);\n    return crypto.subtle.importKey('raw', sharedSecretBytes, { name: 'HKDF' }, false, ['deriveBits', 'deriveKey']);\n};\n", "import { base64UrlEncode } from './base64.js';\nimport { crypto } from './crypto.js';\nimport { createJwt } from './jwt.js';\nimport { getPublicKeyFromJwk } from './utils.js';\n/**\n * Constructs the VAPID headers for a push notification request.\n *\n * This function generates the necessary headers for sending a push notification\n * using the VAPID protocol, including authentication and encryption information.\n *\n * @param {PushOptions} options - The options for the push notification, including the JSON Web Key (JWK) and JWT data.\n * @param {number} payloadLength - The length of the payload being sent in the push notification.\n * @param {Uint8Array} salt - A salt value used in the encryption process.\n * @param {CryptoKey} localPublicKey - The local public key used for encryption.\n * @returns {Promise<Record<string, string> | Headers>} A promise that resolves to an object containing the VAPID headers.\n *\n * @throws {Error} Throws an error if the JWT creation fails or if key export fails.\n */\nexport const vapidHeaders = async (options, payloadLength, salt, localPublicKey) => {\n    // Export the local public key to a raw format and encode it in Base64 URL format\n    const localPublicKeyBase64 = await crypto.subtle\n        .exportKey('raw', localPublicKey)\n        .then((bytes) => base64UrlEncode(bytes));\n    // Get the server public key from the JWK\n    const serverPublicKey = getPublicKeyFromJwk(options.jwk);\n    // Create the JWT for authentication\n    const jwt = await createJwt(options.jwk, options.jwt);\n    // Construct the header values for the VAPID request\n    const headerValues = {\n        Encryption: `salt=${base64UrlEncode(salt)}`,\n        'Crypto-Key': `dh=${localPublicKeyBase64}`,\n        'Content-Length': payloadLength.toString(),\n        'Content-Type': 'application/octet-stream',\n        'Content-Encoding': 'aesgcm',\n        Authorization: `vapid t=${jwt}, k=${serverPublicKey}`,\n    };\n    let headers;\n    // Add optional headers if they are defined\n    if (options.ttl !== undefined)\n        headerValues.TTL = options.ttl.toString();\n    if (options.topic !== undefined)\n        headerValues.Topic = options.topic;\n    if (options.urgency !== undefined)\n        headerValues.Urgency = options.urgency;\n    // Create Headers object if available (for browser or Node.js 18+)\n    if (typeof Headers !== 'undefined') {\n        headers = new Headers(headerValues);\n    }\n    else {\n        // Fallback for Node.js < 18 without polyfill\n        headers = headerValues;\n    }\n    return headers; // Return the constructed headers\n};\n", "import { base64UrlEncode } from './base64.js';\nimport { crypto } from './crypto.js';\n/**\n * Creates a JSON Web Token (JWT) using the ECDSA algorithm.\n *\n * This function takes a JSON Web Key (JWK) and JWT data, encodes them,\n * and signs the token using the specified algorithm and hash function.\n *\n * In the Web Push protocol, the VAPID JWT includes an `exp` (expiration) claim\n * that specifies the token's validity period. According to the VAPID specification,\n * the `exp` value must not exceed 24 hours from the time of the request. If it does,\n * the push service (like FCM) will reject the request with a 403 Forbidden error.\n *\n * @param {JsonWebKey} jwk - The JSON Web Key used for signing the JWT.\n * @param {JwtData} jwtData - The data to be included in the JWT payload.\n * @returns {Promise<string>} A promise that resolves to the signed JWT as a string.\n *\n * @throws {Error} Throws an error if the key import or signing process fails.\n */\nexport const createJwt = async (jwk, jwtData) => {\n    // JWT header information\n    const jwtInfo = {\n        typ: 'JWT', // Type of the token\n        alg: 'ES256', // Algorithm used for signing\n    };\n    // Encode the JWT header and payload\n    const base64JwtInfo = base64UrlEncode(JSON.stringify(jwtInfo));\n    const base64JwtData = base64UrlEncode(JSON.stringify(jwtData));\n    const unsignedToken = `${base64JwtInfo}.${base64JwtData}`;\n    // Import the private key from the JWK\n    const privateKey = await crypto.subtle.importKey('jwk', jwk, { name: 'ECDSA', namedCurve: 'P-256' }, true, ['sign']);\n    // Sign the token using the ECDSA algorithm and SHA-256 hash\n    const signature = await crypto.subtle\n        .sign({ name: 'ECDSA', hash: { name: 'SHA-256' } }, privateKey, new TextEncoder().encode(unsignedToken))\n        .then((token) => base64UrlEncode(token));\n    // Return the complete JWT\n    return `${base64JwtInfo}.${base64JwtData}.${signature}`;\n};\n", "import type { Middleware } from \"./common\";\n\nconst drainBody: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} finally {\n\t\ttry {\n\t\t\tif (request.body !== null && !request.bodyUsed) {\n\t\t\t\tconst reader = request.body.getReader();\n\t\t\t\twhile (!(await reader.read()).done) {}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to drain the unused request body.\", e);\n\t\t}\n\t}\n};\n\nexport default drainBody;\n", "import type { Middleware } from \"./common\";\n\ninterface JsonError {\n\tmessage?: string;\n\tname?: string;\n\tstack?: string;\n\tcause?: JsonError;\n}\n\nfunction reduceError(e: any): JsonError {\n\treturn {\n\t\tname: e?.name,\n\t\tmessage: e?.message ?? String(e),\n\t\tstack: e?.stack,\n\t\tcause: e?.cause === undefined ? undefined : reduceError(e.cause),\n\t};\n}\n\n// See comment in `bundle.ts` for details on why this is needed\nconst jsonError: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} catch (e: any) {\n\t\tconst error = reduceError(e);\n\t\treturn Response.json(error, {\n\t\t\tstatus: 500,\n\t\t\theaders: { \"MF-Experimental-Error-Stack\": \"true\" },\n\t\t});\n\t}\n};\n\nexport default jsonError;\n", "export type Awaitable<T> = T | Promise<T>;\n// TODO: allow dispatching more events?\nexport type Dispatcher = (\n\ttype: \"scheduled\",\n\tinit: { cron?: string }\n) => Awaitable<void>;\n\nexport type IncomingRequest = Request<\n\tunknown,\n\tIncomingRequestCfProperties<unknown>\n>;\n\nexport interface MiddlewareContext {\n\tdispatch: Dispatcher;\n\tnext(request: IncomingRequest, env: any): Awaitable<Response>;\n}\n\nexport type Middleware = (\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tmiddlewareCtx: MiddlewareContext\n) => Awaitable<Response>;\n\nconst __facade_middleware__: Middleware[] = [];\n\n// The register functions allow for the insertion of one or many middleware,\n// We register internal middleware first in the stack, but have no way of controlling\n// the order that addMiddleware is run in service workers so need an internal function.\nexport function __facade_register__(...args: (Middleware | Middleware[])[]) {\n\t__facade_middleware__.push(...args.flat());\n}\nexport function __facade_registerInternal__(\n\t...args: (Middleware | Middleware[])[]\n) {\n\t__facade_middleware__.unshift(...args.flat());\n}\n\nfunction __facade_invokeChain__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tmiddlewareChain: Middleware[]\n): Awaitable<Response> {\n\tconst [head, ...tail] = middlewareChain;\n\tconst middlewareCtx: MiddlewareContext = {\n\t\tdispatch,\n\t\tnext(newRequest, newEnv) {\n\t\t\treturn __facade_invokeChain__(newRequest, newEnv, ctx, dispatch, tail);\n\t\t},\n\t};\n\treturn head(request, env, ctx, middlewareCtx);\n}\n\nexport function __facade_invoke__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tfinalMiddleware: Middleware\n): Awaitable<Response> {\n\treturn __facade_invokeChain__(request, env, ctx, dispatch, [\n\t\t...__facade_middleware__,\n\t\tfinalMiddleware,\n\t]);\n}\n"],
  "mappings": "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",
  "names": ["util", "isValid", "message", "util", "sign", "util", "result", "XMLParser", "attStr", "XMLParser", "message", "message", "message", "message", "message", "message", "message", "types", "util", "objectUtil", "message", "errorUtil", "message", "errorMap", "message", "ctx", "result", "issues", "types", "elements", "processed", "result", "r", "ZodFirstPartyTypeKind", "crypto", "crypto", "crypto", "crypto", "crypto", "message", "crypto"]
}
