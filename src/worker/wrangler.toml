# Configuracao do Cloudflare Worker para Jobs em Background
name = "investalerta-worker"
main = "src/index.ts"
compatibility_date = "2024-01-01"

# Ambiente de desenvolvimento
[env.dev]
name = "investalerta-worker-dev"
vars = { ENVIRONMENT = "development" }

# Ambiente de producao
[env.production]
name = "investalerta-worker"
vars = { ENVIRONMENT = "production" }

# Binding do D1 Database (mesmo banco da API)
[[d1_databases]]
binding = "DB"
database_name = "investalerta-db"
database_id = "YOUR_DATABASE_ID_HERE" # Substituir pelo ID real apos criar o banco

# Variaveis de ambiente
[vars]
PRICE_UPDATE_INTERVAL = "5"

# Triggers para cron jobs
[triggers]
crons = [
  "*/5 * * * *",  # Atualizar precos a cada 5 minutos
  "0 * * * *",    # Verificar alertas a cada hora
  "0 8 * * *"     # Enviar resumo diario as 8h
]
